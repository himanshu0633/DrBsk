{"ast":null,"code":"var _jsxFileName = \"/Users/himanshu/Desktop/Dr BSK/Dr bsk/src/components/AddToCart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Trash2, ShoppingBag, ArrowLeft } from 'lucide-react';\nimport './addToCart.css';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { deleteProduct, updateData, clearProducts } from '../store/Action';\nimport API_URL from '../config';\nimport axiosInstance from './AxiosInstance';\nimport { Dialog, DialogTitle, DialogContent, DialogActions, TextField, Button, Grid, InputAdornment } from '@mui/material';\nimport JoinUrl from '../JoinUrl';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AddToCart = () => {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  const [addresses, setAddresses] = useState([]);\n  const [OriginalAddress, setOriginalAddress] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [states, setStates] = useState([]);\n  const [cities, setCities] = useState([]);\n  const [checkoutLoading, setCheckoutLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    flat: '',\n    landmark: '',\n    state: '',\n    city: '',\n    country: 'India',\n    phone: '',\n    selectedAddress: ''\n  });\n  const userData = JSON.parse(localStorage.getItem('userData') || '{}');\n  const cartItems = useSelector(state => state.app.data);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const userData = localStorage.getItem('userData');\n    if (userData) {\n      setIsAuthenticated(true);\n    } else {\n      navigate('/login');\n      return;\n    }\n  }, [navigate]);\n  const totalPrice = cartItems.reduce((acc, item) => {\n    const price = parseFloat(item.final_price || 0);\n    return acc + price * (item.quantity || 1);\n  }, 0);\n  const handleQuantityChange = (itemId, newQuantity) => {\n    if (newQuantity < 1) return;\n    const updatedItem = cartItems.find(item => item._id === itemId);\n    if (updatedItem) {\n      const updatedProduct = {\n        ...updatedItem,\n        quantity: newQuantity\n      };\n      dispatch(updateData(updatedProduct));\n      toast.success('Item quantity updated!', {\n        position: 'top-right',\n        autoClose: 2000\n      });\n    }\n  };\n  const handleRemoveItem = itemId => {\n    dispatch(deleteProduct(itemId));\n    toast.info('Item removed from cart.', {\n      position: 'top-right',\n      autoClose: 2000\n    });\n  };\n  const handleAddAddress = async () => {\n    const userData = JSON.parse(localStorage.getItem('userData'));\n    const userId = userData === null || userData === void 0 ? void 0 : userData._id;\n    if (!userId) {\n      toast.error(\"Please login first\");\n      return;\n    }\n    if (!formData.flat || !formData.landmark || !formData.city || !formData.state || !formData.phone) {\n      toast.error(\"Please fill all address fields\");\n      return;\n    }\n    if (formData.phone.length !== 10) {\n      toast.error(\"Please enter a valid 10-digit phone number\");\n      return;\n    }\n    setLoading(true);\n    const phoneWithCountry = `+91${formData.phone}`;\n    const fullAddress = `${formData.flat}, ${formData.landmark}, ${formData.city}, ${formData.state}, ${formData.country}`;\n    try {\n      const response = await axiosInstance.put(`admin/updateAdmin/${userId}`, {\n        address: [...addresses, fullAddress],\n        phone: phoneWithCountry\n      });\n      if (response.status === 200) {\n        toast.success(\"Address added successfully\");\n        setAddresses(prev => [...prev, fullAddress]);\n        setFormData({\n          ...formData,\n          selectedAddress: fullAddress,\n          flat: '',\n          landmark: '',\n          state: '',\n          city: '',\n          phone: ''\n        });\n        setShowModal(false);\n      }\n    } catch (error) {\n      toast.error(\"Failed to update address\");\n      console.error(\"Address update error:\", error);\n    }\n    setLoading(false);\n  };\n  useEffect(() => {\n    const fetchStates = async () => {\n      try {\n        const res = await axiosInstance.post('https://countriesnow.space/api/v0.1/countries/states', {\n          country: 'India'\n        });\n        setStates(res.data.data.states.map(s => s.name));\n      } catch (err) {\n        console.error('Error fetching states', err);\n      }\n    };\n    fetchStates();\n  }, []);\n  useEffect(() => {\n    if (!formData.state) return;\n    const fetchCities = async () => {\n      try {\n        const res = await axiosInstance.post('https://countriesnow.space/api/v0.1/countries/state/cities', {\n          country: 'India',\n          state: formData.state\n        });\n        setCities(res.data.data);\n      } catch (err) {\n        console.error('Error fetching cities', err);\n      }\n    };\n    fetchCities();\n  }, [formData.state]);\n\n  // // 1:\n  // const handleCheckout = async () => {\n  //   console.log(\"=== STARTING CHECKOUT ===\");\n\n  //   // Prevent double submission\n  //   if (checkoutLoading) {\n  //     console.log(\"Checkout already in progress\");\n  //     return;\n  //   }\n\n  //   setCheckoutLoading(true);\n\n  //   try {\n  //     // Validation checks\n  //     if (!formData.selectedAddress) {\n  //       toast.warn('Please select an address before checkout.');\n  //       return;\n  //     }\n\n  //     if (!userData || !userData._id) {\n  //       toast.error('Please log in again to continue');\n  //       navigate('/login');\n  //       return;\n  //     }\n\n  //     if (!cartItems || cartItems.length === 0) {\n  //       toast.error('Your cart is empty');\n  //       return;\n  //     }\n\n  //     // Get phone number - prioritize form data, then original address\n  //     const phoneNumber = formData.phone \n  //       ? formData.phone.toString() \n  //       : OriginalAddress?.phone?.replace('+91', '') || \"\";\n\n  //     if (!phoneNumber || phoneNumber.length < 10) {\n  //       toast.error('Please provide a valid 10-digit phone number');\n  //       return;\n  //     }\n\n  //     console.log(\"Validation passed, creating order...\");\n\n  //     // Prepare order payload with detailed validation\n  //     const orderPayload = {\n  //       userId: userData._id,\n  //       items: cartItems.map((item, index) => {\n  //         const qty = item.quantity || 1;\n  //         const price = parseFloat(item.final_price || 0);\n\n  //         console.log(`Processing item ${index}:`, {\n  //           id: item._id,\n  //           name: item.name,\n  //           quantity: qty,\n  //           price: price\n  //         });\n\n  //         if (!item._id || !item.name || qty < 1 || price <= 0) {\n  //           throw new Error(`Invalid item data for: ${item.name || 'Unknown item'}`);\n  //         }\n\n  //         return {\n  //           productId: item._id,\n  //           name: item.name.trim(),\n  //           quantity: parseInt(qty),\n  //           price: parseFloat(price)\n  //         };\n  //       }),\n  //       address: formData.selectedAddress.trim(),\n  //       phone: phoneNumber.toString(), // Send as string without +91 prefix\n  //       totalAmount: parseFloat(totalPrice)\n  //     };\n\n  //     console.log(\"Final Order Payload:\", orderPayload);\n\n  //     // Validate total amount\n  //     const calculatedTotal = orderPayload.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n  //     if (Math.abs(calculatedTotal - orderPayload.totalAmount) > 0.01) {\n  //       throw new Error(`Total amount mismatch. Expected: ${calculatedTotal}, Got: ${orderPayload.totalAmount}`);\n  //     }\n\n  //     // Create order in backend first\n  //     console.log(\"Sending order to backend...\");\n  //     const orderResponse = await axiosInstance.post('/api/createOrder', orderPayload);\n\n  //     console.log(\"Backend response:\", {\n  //       status: orderResponse.status,\n  //       data: orderResponse.data\n  //     });\n\n  //     // Check if order was created successfully\n  //     if (orderResponse.status !== 201) {\n  //       const errorMsg = orderResponse.data?.message || 'Failed to create order';\n  //       console.error(\"Order creation failed:\", errorMsg);\n  //       toast.error(errorMsg);\n  //       return;\n  //     }\n\n  //     const { success, orderId, razorpayOrderId, message } = orderResponse.data;\n\n  //     if (!success || !orderId || !razorpayOrderId) {\n  //       const errorMsg = message || 'Order creation response missing required data';\n  //       console.error(\"Invalid order response:\", orderResponse.data);\n  //       toast.error(errorMsg);\n  //       return;\n  //     }\n\n  //     console.log(\"Order created successfully:\", { orderId, razorpayOrderId });\n  //     toast.success(message || 'Order created successfully');\n\n  //     // Initialize Razorpay payment\n  //     const razorpayOptions = {\n  //       key: 'rzp_live_hgk55iUzVRpKZ1',\n  //       amount: Math.round(orderPayload.totalAmount * 100), // Amount in paise\n  //       currency: 'INR',\n  //       name: 'BSK Healthcare',\n  //       description: `Order #${orderId.slice(-8)}`,\n  //       order_id: razorpayOrderId,\n\n  //       handler: async function (response) {\n  //         console.log(\"=== PAYMENT SUCCESS ===\");\n  //         console.log(\"Payment response:\", response);\n\n  //         try {\n  //           toast.success('Payment successful! Order placed.');\n\n  //           // Clear cart and redirect\n  //           dispatch(clearProducts());\n  //           localStorage.setItem('lastOrderId', orderId);\n  //           navigate('/successOrder');\n\n  //         } catch (err) {\n  //           console.error('Post-payment processing error:', err);\n  //           toast.error('Payment successful but there was an issue. Please contact support.');\n  //           navigate('/successOrder');\n  //         }\n  //       },\n\n  //       modal: {\n  //         ondismiss: function () {\n  //           console.log(\"Payment modal dismissed\");\n  //           toast.info('Payment cancelled');\n  //           setCheckoutLoading(false);\n  //         }\n  //       },\n\n  //       prefill: {\n  //         name: userData.name || '',\n  //         email: userData.email || '',\n  //         contact: phoneNumber\n  //       },\n\n  //       notes: {\n  //         address: formData.selectedAddress,\n  //         orderId: orderId,\n  //         userId: userData._id,\n  //         userEmail: userData.email\n  //       },\n\n  //       theme: {\n  //         color: '#3399cc'\n  //       },\n\n  //       method: {\n  //         netbanking: true,\n  //         card: true,\n  //         upi: true,\n  //         wallet: true,\n  //         emi: false\n  //       }\n  //     };\n\n  //     console.log(\"Initializing Razorpay...\");\n\n  //     // Create Razorpay instance and handle failures\n  //     const razorpayInstance = new window.Razorpay(razorpayOptions);\n\n  //     razorpayInstance.on('payment.failed', function (response) {\n  //       console.log(\"=== PAYMENT FAILED ===\");\n  //       console.error(\"Payment failure response:\", response);\n\n  //       const errorMsg = response.error?.description || response.error?.reason || 'Payment failed';\n  //       toast.error(`Payment failed: ${errorMsg}`);\n  //       setCheckoutLoading(false);\n  //     });\n\n  //     // Open payment modal\n  //     razorpayInstance.open();\n\n  //   } catch (error) {\n  //     console.error('=== CHECKOUT ERROR ===');\n  //     console.error('Error details:', {\n  //       message: error.message,\n  //       response: error.response?.data,\n  //       status: error.response?.status,\n  //       stack: error.stack\n  //     });\n\n  //     let errorMessage = 'Failed to initiate checkout. Please try again.';\n\n  //     if (error.response?.status === 500) {\n  //       errorMessage = 'Server error occurred. Please try again in a moment.';\n  //     } else if (error.response?.status === 400) {\n  //       errorMessage = error.response.data?.message || 'Invalid order data. Please check your details.';\n  //     } else if (error.response?.status === 404) {\n  //       errorMessage = 'User account not found. Please login again.';\n  //     } else if (error.response?.data?.message) {\n  //       errorMessage = error.response.data.message;\n  //     } else if (error.message) {\n  //       errorMessage = error.message;\n  //     }\n\n  //     toast.error(errorMessage);\n  //   } finally {\n  //     setCheckoutLoading(false);\n  //   }\n  // };\n\n  // // 2:\n  const handleCheckout = async () => {\n    console.log(\"=== STARTING CHECKOUT ===\");\n    // Prevent double submission\n    if (checkoutLoading) {\n      console.log(\"Checkout already in progress\");\n      return;\n    }\n    setCheckoutLoading(true);\n    try {\n      var _formData$phone;\n      // Validation checks\n      if (!formData.selectedAddress) {\n        toast.warn('Please select an address before checkout.');\n        setCheckoutLoading(false);\n        return;\n      }\n      if (!userData || !userData._id) {\n        toast.error('Please log in again to continue');\n        navigate('/login');\n        setCheckoutLoading(false);\n        return;\n      }\n      if (!cartItems || cartItems.length === 0) {\n        toast.error('Your cart is empty');\n        setCheckoutLoading(false);\n        return;\n      }\n\n      // Get and validate phone number\n      let phoneNumber = (_formData$phone = formData.phone) === null || _formData$phone === void 0 ? void 0 : _formData$phone.toString().trim();\n      if (!phoneNumber && OriginalAddress !== null && OriginalAddress !== void 0 && OriginalAddress.phone) {\n        phoneNumber = OriginalAddress.phone.replace(/^\\+91/, '').replace(/^91/, '').trim();\n      }\n\n      // console.log(\"Phone number validation:\", {\n      //   formDataPhone: formData.phone,\n      //   originalPhone: OriginalAddress?.phone,\n      //   finalPhone: phoneNumber\n      // });\n\n      // Validate phone is exactly 10 digits\n      if (!phoneNumber || !/^\\d{10}$/.test(phoneNumber)) {\n        toast.error('Please provide a valid 10-digit phone number');\n        setCheckoutLoading(false);\n        return;\n      }\n\n      // Prepare order items with validation\n      const orderItems = cartItems.map((item, index) => {\n        const qty = parseInt(item.quantity) || 1;\n        const price = parseFloat(item.final_price) || 0;\n        if (!item._id || !item.name || qty < 1 || price <= 0) {\n          throw new Error(`Invalid item data for: ${item.name || 'Unknown item'}`);\n        }\n        return {\n          productId: item._id,\n          name: item.name.trim(),\n          quantity: qty,\n          price: price\n        };\n      });\n\n      // Calculate total\n      const calculatedTotal = orderItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n      console.log(\"Total calculation:\", {\n        itemsTotal: calculatedTotal.toFixed(2),\n        cartTotal: totalPrice.toFixed(2),\n        difference: Math.abs(calculatedTotal - totalPrice).toFixed(2)\n      });\n\n      // Prepare order payload\n      const orderPayload = {\n        userId: userData._id,\n        items: orderItems,\n        address: formData.selectedAddress.trim(),\n        phone: phoneNumber,\n        // Send without +91 prefix\n        totalAmount: parseFloat(totalPrice.toFixed(2))\n      };\n\n      // Send order to backend\n      console.log(\"Sending POST request to /api/createOrder...\");\n      const orderResponse = await axiosInstance.post('/api/createOrder', orderPayload);\n\n      // console.log(\"=== BACKEND RESPONSE ===\");\n      // console.log(\"Status:\", orderResponse.status);\n      // console.log(\"Data:\", JSON.stringify(orderResponse.data, null, 2));\n\n      // Validate response\n      if (orderResponse.status !== 201) {\n        var _orderResponse$data;\n        const errorMsg = ((_orderResponse$data = orderResponse.data) === null || _orderResponse$data === void 0 ? void 0 : _orderResponse$data.message) || 'Failed to create order';\n        console.error(\"❌ Order creation failed:\", errorMsg);\n        toast.error(errorMsg);\n        setCheckoutLoading(false);\n        return;\n      }\n      const {\n        success,\n        orderId,\n        razorpayOrderId,\n        message\n      } = orderResponse.data;\n      if (!success || !orderId || !razorpayOrderId) {\n        const errorMsg = message || 'Order creation response missing required data';\n        console.error(\"❌ Invalid order response:\", orderResponse.data);\n        toast.error(errorMsg);\n        setCheckoutLoading(false);\n        return;\n      }\n      toast.success(message || 'Order created successfully');\n\n      // Verify Razorpay is loaded\n      if (!window.Razorpay) {\n        console.error(\"❌ Razorpay SDK not loaded!\");\n        toast.error('Payment system not loaded. Please refresh and try again.');\n        setCheckoutLoading(false);\n        return;\n      }\n      console.log(\"✓ Razorpay SDK loaded\");\n\n      // Initialize Razorpay payment\n      const razorpayOptions = {\n        key: 'rzp_live_hgk55iUzVRpKZ1',\n        // Your Razorpay key\n        amount: Math.round(orderPayload.totalAmount * 100),\n        // Amount in paise\n        currency: 'INR',\n        name: 'BSK Healthcare',\n        description: `Order #${orderId.slice(-8)}`,\n        order_id: razorpayOrderId,\n        handler: async function (response) {\n          console.log(\"=== PAYMENT SUCCESS ===\");\n          console.log(\"Payment ID:\", response.razorpay_payment_id);\n          console.log(\"Order ID:\", response.razorpay_order_id);\n          console.log(\"Signature:\", response.razorpay_signature);\n          try {\n            toast.success('Payment successful! Order placed.');\n\n            // Clear cart\n            dispatch(clearProducts());\n\n            // Store order ID and redirect\n            localStorage.setItem('lastOrderId', orderId);\n            console.log(\"Redirecting to success page...\");\n            navigate('/successOrder');\n          } catch (err) {\n            console.error('Post-payment error:', err);\n            toast.error('Payment successful but there was an issue. Please contact support.');\n            navigate('/successOrder');\n          }\n        },\n        modal: {\n          ondismiss: function () {\n            console.log(\"❌ Payment modal dismissed by user\");\n            toast.info('Payment cancelled');\n            setCheckoutLoading(false);\n          }\n        },\n        prefill: {\n          name: userData.name || '',\n          email: userData.email || '',\n          contact: phoneNumber || ''\n        },\n        notes: {\n          orderId: orderId,\n          userId: userData._id\n        },\n        theme: {\n          // color: '#3399cc'\n          color: '#68171b'\n        }\n      };\n      console.log(\"=== RAZORPAY OPTIONS ===\");\n      console.log(JSON.stringify({\n        ...razorpayOptions,\n        key: razorpayOptions.key.substring(0, 10) + '...'\n      }, null, 2));\n\n      // Create Razorpay instance\n      const razorpayInstance = new window.Razorpay(razorpayOptions);\n\n      // Handle payment failures\n      razorpayInstance.on('payment.failed', function (response) {\n        var _response$error, _response$error2, _response$error3, _response$error4, _response$error5;\n        console.log(\"=== PAYMENT FAILED ===\");\n        console.error(\"Error code:\", (_response$error = response.error) === null || _response$error === void 0 ? void 0 : _response$error.code);\n        console.error(\"Error description:\", (_response$error2 = response.error) === null || _response$error2 === void 0 ? void 0 : _response$error2.description);\n        console.error(\"Error reason:\", (_response$error3 = response.error) === null || _response$error3 === void 0 ? void 0 : _response$error3.reason);\n        console.error(\"Full error:\", JSON.stringify(response.error, null, 2));\n        const errorMsg = ((_response$error4 = response.error) === null || _response$error4 === void 0 ? void 0 : _response$error4.description) || ((_response$error5 = response.error) === null || _response$error5 === void 0 ? void 0 : _response$error5.reason) || 'Payment failed';\n        toast.error(`Payment failed: ${errorMsg}`);\n        setCheckoutLoading(false);\n      });\n\n      // Open payment modal\n      razorpayInstance.open();\n    } catch (error) {\n      var _error$response, _error$response2, _error$response3, _error$response4, _error$response4$data;\n      console.error('=== CHECKOUT ERROR ===');\n      console.error('Error type:', error.constructor.name);\n      console.error('Error message:', error.message);\n      if (error.response) {\n        console.error('Response status:', error.response.status);\n        console.error('Response data:', JSON.stringify(error.response.data, null, 2));\n        console.error('Response headers:', error.response.headers);\n      } else if (error.request) {\n        console.error('No response received');\n        console.error('Request details:', error.request);\n      }\n      console.error('Error stack:', error.stack);\n      let errorMessage = 'Failed to initiate checkout. Please try again.';\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 500) {\n        var _error$response$data, _error$response$data2;\n        const details = ((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.details) || ((_error$response$data2 = error.response.data) === null || _error$response$data2 === void 0 ? void 0 : _error$response$data2.error);\n        errorMessage = 'Server error occurred. ' + (details || 'Please try again in a moment.');\n      } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 400) {\n        var _error$response$data3;\n        errorMessage = ((_error$response$data3 = error.response.data) === null || _error$response$data3 === void 0 ? void 0 : _error$response$data3.message) || 'Invalid order data. Please check your details.';\n      } else if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 404) {\n        errorMessage = 'User account not found. Please login again.';\n      } else if ((_error$response4 = error.response) !== null && _error$response4 !== void 0 && (_error$response4$data = _error$response4.data) !== null && _error$response4$data !== void 0 && _error$response4$data.message) {\n        errorMessage = error.response.data.message;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      toast.error(errorMessage);\n      setCheckoutLoading(false);\n    }\n  };\n  const fetchData = async () => {\n    const userData = JSON.parse(localStorage.getItem('userData'));\n    const userId = userData === null || userData === void 0 ? void 0 : userData._id;\n    if (!userId) {\n      console.error(\"User ID not found.\");\n      return;\n    }\n    try {\n      var _response$data;\n      const response = await axiosInstance.get(`/admin/readAdmin/${userId}`);\n      const userInfo = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.data;\n      console.log(\"Fetched user info:\", userInfo);\n      setOriginalAddress(userInfo || {});\n      if (Array.isArray(userInfo === null || userInfo === void 0 ? void 0 : userInfo.address)) {\n        setAddresses(userInfo.address);\n        // Auto-select first address if available\n        if (userInfo.address.length > 0 && !formData.selectedAddress) {\n          setFormData(prev => ({\n            ...prev,\n            selectedAddress: userInfo.address[0]\n          }));\n        }\n      } else {\n        setAddresses([]);\n      }\n    } catch (error) {\n      console.error(\"Error fetching address:\", error);\n    }\n  };\n  useEffect(() => {\n    if (isAuthenticated) {\n      fetchData();\n    }\n  }, [isAuthenticated]);\n  if (isAuthenticated === null) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => navigate(-1),\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 15\n            }, this), \" Continue Shopping\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"cart-title\",\n            children: [/*#__PURE__*/_jsxDEV(ShoppingBag, {\n              size: 28\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 665,\n              columnNumber: 15\n            }, this), \" Shopping Cart\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-items-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: [\"Your Items (\", cartItems.length, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 674,\n                columnNumber: 17\n              }, this), cartItems.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"clear-cart-btn\",\n                onClick: () => {\n                  dispatch(clearProducts());\n                  toast.info('Cart cleared.', {\n                    position: 'top-right',\n                    autoClose: 2000\n                  });\n                },\n                children: \"Clear Cart\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 15\n            }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-cart\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"empty-cart-icon\",\n                children: /*#__PURE__*/_jsxDEV(ShoppingBag, {\n                  size: 64\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 694,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 693,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Your cart is empty\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 696,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Add some items to get started\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 697,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => navigate(\"/fever\"),\n                className: \"continue-shopping-btn\",\n                children: \"Start Shopping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 698,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-items\",\n              children: cartItems.map(item => {\n                var _item$media$;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"cart-item\",\n                  children: [/*#__PURE__*/_jsxDEV(Link, {\n                    to: `/ProductPage/${item._id}`,\n                    className: \"item-image\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: JoinUrl(API_URL, (_item$media$ = item.media[0]) === null || _item$media$ === void 0 ? void 0 : _item$media$.url),\n                      alt: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 705,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 704,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item-details\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"item-name\",\n                      children: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 709,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"item-description\",\n                      children: [item.quantity, \" Pack\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 710,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"item-pricing\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"current-price\",\n                        children: [\"\\u20B9\", parseFloat(item.final_price || 0).toFixed(2)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 713,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"discount\",\n                        children: [Math.round(item.discount), \"% OFF\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 716,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 712,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 708,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"item-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"quantity-controls\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"quantity-btn\",\n                        onClick: () => handleQuantityChange(item._id, (item.quantity || 1) - 1),\n                        disabled: (item.quantity || 1) <= 1,\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \"-\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 729,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 724,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"quantity\",\n                        children: item.quantity || 1\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 731,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"quantity-btn\",\n                        onClick: () => handleQuantityChange(item._id, (item.quantity || 1) + 1),\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \"+\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 736,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 732,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 723,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"remove-btn\",\n                      onClick: () => handleRemoveItem(item._id),\n                      children: /*#__PURE__*/_jsxDEV(Trash2, {\n                        size: 18\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 740,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 739,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 722,\n                    columnNumber: 23\n                  }, this)]\n                }, item._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 703,\n                  columnNumber: 21\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 13\n          }, this), cartItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"order-summary\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"summary-title\",\n                children: \"Order Summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 752,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"enhanced-add-address-btn\",\n                onClick: () => setShowModal(true),\n                children: \"\\u2795 Add New Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"my_10\",\n                children: addresses.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"saved-addresses\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"section-subtitle\",\n                    children: \"\\uD83D\\uDCCD Saved Addresses\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 764,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                    className: \"address-list\",\n                    children: addresses.map((addr, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                      className: `address-card ${formData.selectedAddress === addr ? 'selected' : ''}`,\n                      children: /*#__PURE__*/_jsxDEV(\"label\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"radio\",\n                          name: \"selectedAddress\",\n                          value: addr,\n                          checked: formData.selectedAddress === addr,\n                          onChange: () => setFormData({\n                            ...formData,\n                            selectedAddress: addr\n                          })\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 769,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text_20\",\n                          children: addr\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 778,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 768,\n                        columnNumber: 31\n                      }, this)\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 767,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 765,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 763,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"no-address-text\",\n                  children: \"No address saved yet. Please add one.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 785,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 761,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Subtotal (\", cartItems.length, \" items)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 793,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"\\u20B9\", totalPrice.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 794,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 792,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Shipping\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 797,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"free-shipping\",\n                    children: \"FREE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 798,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 796,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Tax\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 801,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"\\u20B90.00\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 802,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 800,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-row discount-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Discount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 805,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"-\\u20B90.00\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 806,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 804,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 791,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-divider\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 810,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-total\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 812,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u20B9\", totalPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 813,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 811,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"checkout-btn\",\n                onClick: handleCheckout,\n                disabled: !formData.selectedAddress || checkoutLoading,\n                children: checkoutLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Processing...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 823,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [\"Proceed to Checkout\", /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                    size: 18,\n                    style: {\n                      transform: 'rotate(180deg)'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 828,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 816,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"security-badges\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"badge\",\n                  children: \"\\uD83D\\uDD12 Secure Checkout\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 834,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 833,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 751,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 750,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 658,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: showModal,\n      onClose: () => setShowModal(false),\n      fullWidth: true,\n      maxWidth: \"sm\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        sx: {\n          fontWeight: 'bold'\n        },\n        children: \"Add New Address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 849,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        sx: {\n          pt: 2,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              label: \"Flat / House\",\n              fullWidth: true,\n              variant: \"outlined\",\n              size: \"small\",\n              value: formData.flat,\n              onChange: e => setFormData({\n                ...formData,\n                flat: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 853,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 852,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              label: \"Landmark\",\n              fullWidth: true,\n              variant: \"outlined\",\n              size: \"small\",\n              value: formData.landmark,\n              onChange: e => setFormData({\n                ...formData,\n                landmark: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 863,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 862,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"state\",\n              value: formData.state,\n              onChange: e => setFormData({\n                ...formData,\n                state: e.target.value,\n                city: ''\n              }),\n              style: {\n                width: '100%',\n                padding: '8px',\n                borderRadius: '4px',\n                border: '1px solid #ccc'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select State\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 880,\n                columnNumber: 17\n              }, this), states.map(state => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: state,\n                children: state\n              }, state, false, {\n                fileName: _jsxFileName,\n                lineNumber: 881,\n                columnNumber: 40\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 874,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 873,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"city\",\n              value: formData.city,\n              onChange: e => setFormData({\n                ...formData,\n                city: e.target.value\n              }),\n              style: {\n                width: '100%',\n                padding: '8px',\n                borderRadius: '4px',\n                border: '1px solid #ccc'\n              },\n              disabled: !formData.state,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select City\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 893,\n                columnNumber: 17\n              }, this), cities.map(city => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: city,\n                children: city\n              }, city, false, {\n                fileName: _jsxFileName,\n                lineNumber: 894,\n                columnNumber: 39\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 886,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 885,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              label: \"Country\",\n              fullWidth: true,\n              variant: \"outlined\",\n              size: \"small\",\n              value: \"India\",\n              disabled: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 899,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 898,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              label: \"Phone Number\",\n              fullWidth: true,\n              variant: \"outlined\",\n              size: \"small\",\n              name: \"phone\",\n              value: formData.phone,\n              onChange: e => {\n                const value = e.target.value.replace(/\\D/g, ''); // Only digits\n                if (value.length <= 10) {\n                  setFormData({\n                    ...formData,\n                    phone: value\n                  });\n                }\n              },\n              InputProps: {\n                startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                  position: \"start\",\n                  children: \"+91\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 924,\n                  columnNumber: 35\n                }, this)\n              },\n              helperText: formData.phone.length > 0 && formData.phone.length !== 10 ? \"Phone number must be 10 digits\" : \"\",\n              error: formData.phone.length > 0 && formData.phone.length !== 10\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 910,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 909,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 850,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        sx: {\n          px: 3,\n          pb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleAddAddress,\n          color: \"primary\",\n          variant: \"contained\",\n          sx: {\n            fontWeight: 600\n          },\n          disabled: loading || !formData.flat || !formData.landmark || !formData.city || !formData.state || formData.phone.length !== 10,\n          children: loading ? 'Adding...' : 'Add Address'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 933,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setShowModal(false),\n          color: \"secondary\",\n          variant: \"outlined\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 942,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 932,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 843,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(AddToCart, \"e1JC2dcTnEzCdv3MxkwZpPH/lM4=\", false, function () {\n  return [useSelector, useDispatch, useNavigate];\n});\n_c = AddToCart;\nexport default AddToCart;\n\n// // 2:\n// import React, { useEffect, useState } from 'react';\n// import { useSelector, useDispatch } from 'react-redux';\n// import { Trash2, ShoppingBag, ArrowLeft } from 'lucide-react';\n// import './addToCart.css';\n// import { Link, useNavigate } from 'react-router-dom';\n// import { toast } from 'react-toastify';\n// import { deleteProduct, updateData, clearProducts } from '../store/Action';\n// import API_URL from '../config';\n// import axiosInstance from './AxiosInstance';\n// import { Dialog, DialogTitle, DialogContent, DialogActions, TextField, Button, Grid, InputAdornment } from '@mui/material';\n// import JoinUrl from '../JoinUrl';\n\n// const AddToCart = () => {\n//   const [isAuthenticated, setIsAuthenticated] = useState(null);\n//   const [showModal, setShowModal] = useState(false);\n//   const [addresses, setAddresses] = useState([]);\n//   const [OriginalAddress, setOriginalAddress] = useState({});\n//   const [loading, setLoading] = useState(false);\n//   const [states, setStates] = useState([]);\n//   const [cities, setCities] = useState([]);\n//   const [formData, setFormData] = useState({\n//     flat: '',\n//     landmark: '',\n//     state: '',\n//     city: '',\n//     country: 'India',\n//     phone: '',\n//     selectedAddress: ''\n//   });\n\n//   const userData = JSON.parse(localStorage.getItem('userData') || '{}');\n//   const cartItems = useSelector((state) => state.app.data);\n//   const dispatch = useDispatch();\n//   const navigate = useNavigate();\n\n//   useEffect(() => {\n//     const userData = localStorage.getItem('userData');\n//     if (userData) {\n//       setIsAuthenticated(true);\n//     } else {\n//       navigate('/login');\n//       return;\n//     }\n//   }, [navigate]);\n\n//   const totalPrice = cartItems.reduce((acc, item) => {\n//     const price = parseFloat(item.final_price || 0);\n//     return acc + price * (item.quantity || 1);\n//   }, 0);\n\n//   const handleQuantityChange = (itemId, newQuantity) => {\n//     if (newQuantity < 1) return;\n//     const updatedItem = cartItems.find((item) => item._id === itemId);\n//     if (updatedItem) {\n//       const updatedProduct = { ...updatedItem, quantity: newQuantity };\n//       dispatch(updateData(updatedProduct));\n//       toast.success('Item quantity updated!', { position: 'top-right', autoClose: 2000 });\n//     }\n//   };\n\n//   const handleRemoveItem = (itemId) => {\n//     dispatch(deleteProduct(itemId));\n//     toast.info('Item removed from cart.', { position: 'top-right', autoClose: 2000 });\n//   };\n\n//   const handleAddAddress = async () => {\n//     const userData = JSON.parse(localStorage.getItem('userData'));\n//     const userId = userData?._id;\n\n//     if (!userId) {\n//       toast.error(\"Please login first\");\n//       return;\n//     }\n\n//     if (!formData.flat || !formData.landmark || !formData.city || !formData.state || !formData.phone) {\n//       toast.error(\"Please fill all address fields\");\n//       return;\n//     }\n\n//     if (formData.phone.length !== 10) {\n//       toast.error(\"Please enter a valid 10-digit phone number\");\n//       return;\n//     }\n\n//     setLoading(true);\n//     const phoneWithCountry = `+91${formData.phone}`;\n//     const fullAddress = `${formData.flat}, ${formData.landmark}, ${formData.city}, ${formData.state}, ${formData.country}`;\n\n//     try {\n//       const response = await axiosInstance.put(`admin/updateAdmin/${userId}`, {\n//         address: [...addresses, fullAddress],\n//         phone: phoneWithCountry,\n//       });\n\n//       if (response.status === 200) {\n//         toast.success(\"Address added successfully\");\n//         setAddresses((prev) => [...prev, fullAddress]);\n//         setFormData({\n//           ...formData,\n//           selectedAddress: fullAddress,\n//           flat: '',\n//           landmark: '',\n//           state: '',\n//           city: '',\n//           phone: ''\n//         });\n//         setShowModal(false);\n//       }\n//     } catch (error) {\n//       toast.error(\"Failed to update address\");\n//       console.error(\"Address update error:\", error);\n//     }\n//     setLoading(false);\n//   };\n\n//   useEffect(() => {\n//     const fetchStates = async () => {\n//       try {\n//         const res = await axiosInstance.post('https://countriesnow.space/api/v0.1/countries/states', {\n//           country: 'India'\n//         });\n//         setStates(res.data.data.states.map(s => s.name));\n//       } catch (err) {\n//         console.error('Error fetching states', err);\n//       }\n//     };\n//     fetchStates();\n//   }, []);\n\n//   useEffect(() => {\n//     if (!formData.state) return;\n\n//     const fetchCities = async () => {\n//       try {\n//         const res = await axiosInstance.post('https://countriesnow.space/api/v0.1/countries/state/cities', {\n//           country: 'India',\n//           state: formData.state\n//         });\n//         setCities(res.data.data);\n//       } catch (err) {\n//         console.error('Error fetching cities', err);\n//       }\n//     };\n//     fetchCities();\n//   }, [formData.state]);\n\n//   const handleCheckout = async () => {\n//     // Validation checks\n//     if (!formData.selectedAddress) {\n//       toast.warn('Please select an address before checkout.');\n//       return;\n//     }\n\n//     if (!userData || !userData._id || !userData.email) {\n//       toast.error('Please log in again to continue');\n//       navigate('/login');\n//       return;\n//     }\n\n//     if (!cartItems || cartItems.length === 0) {\n//       toast.error('Your cart is empty');\n//       return;\n//     }\n\n//     // Get phone number - prioritize form data, then original address\n//     const phoneNumber = formData.phone ? `+91${formData.phone}` : OriginalAddress?.phone || \"\";\n\n//     if (!phoneNumber) {\n//       toast.error('Phone number is required for checkout');\n//       return;\n//     }\n\n//     try {\n//       // Prepare order payload with detailed validation\n//       const orderPayload = {\n//         userId: userData._id,\n//         items: cartItems.map((item, index) => {\n//           const qty = item.quantity || 1;\n//           const price = parseFloat(item.final_price || 0);\n\n//           if (!item._id || !item.name || qty < 1 || price <= 0) {\n//             throw new Error(`Invalid item data for: ${item.name || 'Unknown item'}`);\n//           }\n\n//           return {\n//             productId: item._id,\n//             name: item.name.trim(),\n//             quantity: parseInt(qty),\n//             price: parseFloat(price)\n//           };\n//         }),\n//         address: formData.selectedAddress.trim(),\n//         phone: phoneNumber.replace('+91', '').trim(),\n//         totalAmount: parseFloat(totalPrice)\n//       };\n\n//       console.log(\"Final Order Payload:\", orderPayload);\n\n//       // Validate total amount\n//       const calculatedTotal = orderPayload.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n//       if (Math.abs(calculatedTotal - orderPayload.totalAmount) > 0.01) {\n//         throw new Error(`Total amount mismatch. Expected: ${calculatedTotal}, Got: ${orderPayload.totalAmount}`);\n//       }\n\n//       // Create order in backend first\n//       console.log(\"Creating order in backend...\");\n//       const orderResponse = await axiosInstance.post('/api/createOrder', orderPayload);\n\n//       console.log(\"Order response:\", orderResponse.data);\n\n//       const { orderId, razorpayOrderId, message } = orderResponse.data || {};\n\n//       if (orderResponse.status !== 201 || !orderId || !razorpayOrderId) {\n//         toast.error(`Failed to create order${message ? `: ${message}` : ''}`);\n//         return;\n//       }\n\n//       // success path\n//       toast.success(message || 'Order created');\n\n//       console.log(\"Order created successfully:\", { orderId, razorpayOrderId });\n\n//       // Initialize Razorpay payment\n//       const razorpayOptions = {\n//         key: 'rzp_live_hgk55iUzVRpKZ1',\n//         amount: Math.round(orderPayload.totalAmount * 100), // Amount in paise\n//         currency: 'INR',\n//         name: 'BSK Healthcare',\n//         description: `Order #${orderId.slice(-8)}`,\n//         order_id: razorpayOrderId,\n\n//         handler: async function (response) {\n//           console.log(\"Payment response:\", response);\n\n//           try {\n//             toast.success('Payment successful! Order placed.');\n\n//             // Clear cart and redirect\n//             dispatch(clearProducts());\n//             localStorage.setItem('lastOrderId', orderId);\n//             navigate('/success');\n\n//           } catch (err) {\n//             console.error('Post-payment processing error:', err);\n//             toast.error('Payment successful but there was an issue. Please contact support.');\n//             navigate('/success');\n//           }\n//         },\n\n//         modal: {\n//           ondismiss: function () {\n//             toast.info('Payment cancelled');\n//           }\n//         },\n\n//         prefill: {\n//           name: userData.name || '',\n//           email: userData.email || '', // This ensures email shows in Razorpay dashboard\n//           contact: phoneNumber.replace('+91', '') // Remove +91 for prefill\n//         },\n\n//         notes: {\n//           address: formData.selectedAddress,\n//           orderId: orderId,\n//           userId: userData._id,\n//           userEmail: userData.email\n//         },\n\n//         theme: {\n//           color: '#3399cc'\n//         },\n\n//         method: {\n//           netbanking: true,\n//           card: true,\n//           upi: true,\n//           wallet: true,\n//           emi: false\n//         }\n//       };\n\n//       console.log(\"Initializing Razorpay with options:\", {\n//         ...razorpayOptions,\n//         handler: '[Function]'\n//       });\n\n//       // Create Razorpay instance and handle failures\n//       const razorpayInstance = new window.Razorpay(razorpayOptions);\n\n//       razorpayInstance.on('payment.failed', function (response) {\n//         console.log(\"=== PAYMENT FAILED ===\");\n//         console.log(\"Failed payment response:\", response);\n\n//         const errorMsg = response.error?.description || response.error?.reason || 'Payment failed';\n//         toast.error(`Payment failed: ${errorMsg}`);\n//       });\n\n//       // Open payment modal\n//       razorpayInstance.open();\n\n//     } catch (error) {\n//       console.error('Checkout Error details:', {\n//         message: error.message,\n//         response: error.response?.data,\n//         status: error.response?.status\n//       });\n\n//       let errorMessage = 'Failed to initiate checkout. Please try again.';\n\n//       if (error.response?.data?.message) {\n//         errorMessage = error.response.data.message;\n//       } else if (error.message) {\n//         errorMessage = error.message;\n//       }\n\n//       toast.error(errorMessage);\n//     }\n//   };\n\n//   const fetchData = async () => {\n//     const userData = JSON.parse(localStorage.getItem('userData'));\n//     const userId = userData?._id;\n\n//     if (!userId) {\n//       console.error(\"User ID not found.\");\n//       return;\n//     }\n\n//     try {\n//       const response = await axiosInstance.get(`/admin/readAdmin/${userId}`);\n//       const userInfo = response?.data?.data;\n\n//       console.log(\"✅ Fetched user info:\", userInfo);\n//       setOriginalAddress(userInfo || {});\n\n//       if (Array.isArray(userInfo?.address)) {\n//         setAddresses(userInfo.address);\n//         // Auto-select first address if available\n//         if (userInfo.address.length > 0 && !formData.selectedAddress) {\n//           setFormData(prev => ({ ...prev, selectedAddress: userInfo.address[0] }));\n//         }\n//       } else {\n//         setAddresses([]);\n//       }\n//     } catch (error) {\n//       console.error(\"Error fetching address:\", error);\n//     }\n//   };\n\n//   useEffect(() => {\n//     if (isAuthenticated) {\n//       fetchData();\n//     }\n//   }, [isAuthenticated]);\n\n//   if (isAuthenticated === null) return null;\n\n//   return (\n//     <>\n//       <div className=\"cart-container\">\n//         <div className=\"cart-header\">\n//           <div className=\"container\">\n//             <button className=\"back-button\" onClick={() => navigate(-1)}>\n//               <ArrowLeft size={20} /> Continue Shopping\n//             </button>\n//             <h1 className=\"cart-title\">\n//               <ShoppingBag size={28} /> Shopping Cart\n//             </h1>\n//           </div>\n//         </div>\n\n//         <div className=\"container\">\n//           <div className=\"cart-content\">\n//             <div className=\"cart-items-section\">\n//               <div className=\"section-header\">\n//                 <h2>Your Items ({cartItems.length})</h2>\n//                 {cartItems.length > 0 && (\n//                   <button\n//                     className=\"clear-cart-btn\"\n//                     onClick={() => {\n//                       dispatch(clearProducts());\n//                       toast.info('Cart cleared.', {\n//                         position: 'top-right',\n//                         autoClose: 2000,\n//                       });\n//                     }}\n//                   >\n//                     Clear Cart\n//                   </button>\n//                 )}\n//               </div>\n\n//               {cartItems.length === 0 ? (\n//                 <div className=\"empty-cart\">\n//                   <div className=\"empty-cart-icon\">\n//                     <ShoppingBag size={64} />\n//                   </div>\n//                   <h3>Your cart is empty</h3>\n//                   <p>Add some items to get started</p>\n//                   <button onClick={() => navigate(\"/fever\")} className=\"continue-shopping-btn\">Start Shopping</button>\n//                 </div>\n//               ) : (\n//                 <div className=\"cart-items\">\n//                   {cartItems.map((item) => (\n//                     <div key={item._id} className=\"cart-item\">\n//                       <Link to={`/ProductPage/${item._id}`} className=\"item-image\">\n//                         <img src={JoinUrl(API_URL, item.media[0]?.url)} alt={item.name} />\n//                       </Link>\n\n//                       <div className=\"item-details\">\n//                         <h3 className=\"item-name\">{item.name}</h3>\n//                         <p className=\"item-description\">{item.quantity} Pack</p>\n\n//                         <div className=\"item-pricing\">\n//                           <span className=\"current-price\">\n//                             ₹{parseFloat(item.final_price || 0).toFixed(2)}\n//                           </span>\n//                           <span className=\"discount\">\n//                             {Math.round((item.discount))}% OFF\n//                           </span>\n//                         </div>\n//                       </div>\n\n//                       <div className=\"item-actions\">\n//                         <div className=\"quantity-controls\">\n//                           <button\n//                             className=\"quantity-btn\"\n//                             onClick={() => handleQuantityChange(item._id, (item.quantity || 1) - 1)}\n//                             disabled={(item.quantity || 1) <= 1}\n//                           >\n//                             <span>-</span>\n//                           </button>\n//                           <span className=\"quantity\">{item.quantity || 1}</span>\n//                           <button\n//                             className=\"quantity-btn\"\n//                             onClick={() => handleQuantityChange(item._id, (item.quantity || 1) + 1)}\n//                           >\n//                             <span>+</span>\n//                           </button>\n//                         </div>\n//                         <button className=\"remove-btn\" onClick={() => handleRemoveItem(item._id)}>\n//                           <Trash2 size={18} />\n//                         </button>\n//                       </div>\n//                     </div>\n//                   ))}\n//                 </div>\n//               )}\n//             </div>\n\n//             {cartItems.length > 0 && (\n//               <div className=\"order-summary\">\n//                 <div className=\"summary-card\">\n//                   <h3 className=\"summary-title\">Order Summary</h3>\n\n//                   <button\n//                     className=\"enhanced-add-address-btn\"\n//                     onClick={() => setShowModal(true)}\n//                   >\n//                     ➕ Add New Address\n//                   </button>\n\n//                   <div className='my_10'>\n//                     {addresses.length > 0 ? (\n//                       <div className=\"saved-addresses\">\n//                         <h4 className=\"section-subtitle\">📍 Saved Addresses</h4>\n//                         <ul className=\"address-list\">\n//                           {addresses.map((addr, index) => (\n//                             <li key={index} className={`address-card ${formData.selectedAddress === addr ? 'selected' : ''}`}>\n//                               <label>\n//                                 <input\n//                                   type=\"radio\"\n//                                   name=\"selectedAddress\"\n//                                   value={addr}\n//                                   checked={formData.selectedAddress === addr}\n//                                   onChange={() =>\n//                                     setFormData({ ...formData, selectedAddress: addr })\n//                                   }\n//                                 />\n//                                 <span className='text_20'>{addr}</span>\n//                               </label>\n//                             </li>\n//                           ))}\n//                         </ul>\n//                       </div>\n//                     ) : (\n//                       <p className=\"no-address-text\">\n//                         No address saved yet. Please add one.\n//                       </p>\n//                     )}\n//                   </div>\n\n//                   <div className=\"summary-details\">\n//                     <div className=\"summary-row\">\n//                       <span>Subtotal ({cartItems.length} items)</span>\n//                       <span>₹{totalPrice.toFixed(2)}</span>\n//                     </div>\n//                     <div className=\"summary-row\">\n//                       <span>Shipping</span>\n//                       <span className=\"free-shipping\">FREE</span>\n//                     </div>\n//                     <div className=\"summary-row\">\n//                       <span>Tax</span>\n//                       <span>₹0.00</span>\n//                     </div>\n//                     <div className=\"summary-row discount-row\">\n//                       <span>Discount</span>\n//                       <span>-₹0.00</span>\n//                     </div>\n//                   </div>\n\n//                   <div className=\"summary-divider\"></div>\n//                   <div className=\"summary-total\">\n//                     <span>Total</span>\n//                     <span>₹{totalPrice.toFixed(2)}</span>\n//                   </div>\n\n//                   <button\n//                     className=\"checkout-btn\"\n//                     onClick={handleCheckout}\n//                     disabled={!formData.selectedAddress}\n//                   >\n//                     Proceed to Checkout\n//                     <ArrowLeft size={18} style={{ transform: 'rotate(180deg)' }} />\n//                   </button>\n\n//                   <div className=\"security-badges\">\n//                     <div className=\"badge\">🔒 Secure Checkout</div>\n//                   </div>\n//                 </div>\n//               </div>\n//             )}\n//           </div>\n//         </div>\n//       </div>\n\n//       <Dialog\n//         open={showModal}\n//         onClose={() => setShowModal(false)}\n//         fullWidth\n//         maxWidth=\"sm\"\n//       >\n//         <DialogTitle sx={{ fontWeight: 'bold' }}>Add New Address</DialogTitle>\n//         <DialogContent sx={{ pt: 2, display: 'flex', flexDirection: 'column', gap: 2 }}>\n//           <Grid container spacing={2}>\n//             <Grid item xs={12} sm={6}>\n//               <TextField\n//                 label=\"Flat / House\"\n//                 fullWidth\n//                 variant=\"outlined\"\n//                 size=\"small\"\n//                 value={formData.flat}\n//                 onChange={(e) => setFormData({ ...formData, flat: e.target.value })}\n//               />\n//             </Grid>\n//             <Grid item xs={12} sm={6}>\n//               <TextField\n//                 label=\"Landmark\"\n//                 fullWidth\n//                 variant=\"outlined\"\n//                 size=\"small\"\n//                 value={formData.landmark}\n//                 onChange={(e) => setFormData({ ...formData, landmark: e.target.value })}\n//               />\n//             </Grid>\n\n//             <Grid item xs={12} sm={6}>\n//               <select\n//                 name=\"state\"\n//                 value={formData.state}\n//                 onChange={(e) => setFormData({ ...formData, state: e.target.value, city: '' })}\n//                 style={{ width: '100%', padding: '8px', borderRadius: '4px', border: '1px solid #ccc' }}\n//               >\n//                 <option value=\"\">Select State</option>\n//                 {states.map((state) => <option key={state} value={state}>{state}</option>)}\n//               </select>\n//             </Grid>\n\n//             <Grid item xs={12} sm={6}>\n//               <select\n//                 name=\"city\"\n//                 value={formData.city}\n//                 onChange={(e) => setFormData({ ...formData, city: e.target.value })}\n//                 style={{ width: '100%', padding: '8px', borderRadius: '4px', border: '1px solid #ccc' }}\n//                 disabled={!formData.state}\n//               >\n//                 <option value=\"\">Select City</option>\n//                 {cities.map((city) => <option key={city} value={city}>{city}</option>)}\n//               </select>\n//             </Grid>\n\n//             <Grid item xs={12} sm={6}>\n//               <TextField\n//                 label=\"Country\"\n//                 fullWidth\n//                 variant=\"outlined\"\n//                 size=\"small\"\n//                 value=\"India\"\n//                 disabled\n//               />\n//             </Grid>\n\n//             <Grid item xs={12} sm={6}>\n//               <TextField\n//                 label=\"Phone Number\"\n//                 fullWidth\n//                 variant=\"outlined\"\n//                 size=\"small\"\n//                 name=\"phone\"\n//                 value={formData.phone}\n//                 onChange={(e) => {\n//                   const value = e.target.value.replace(/\\D/g, ''); // Only digits\n//                   if (value.length <= 10) {\n//                     setFormData({ ...formData, phone: value });\n//                   }\n//                 }}\n//                 InputProps={{\n//                   startAdornment: <InputAdornment position=\"start\">+91</InputAdornment>,\n//                 }}\n//                 helperText={formData.phone.length > 0 && formData.phone.length !== 10 ? \"Phone number must be 10 digits\" : \"\"}\n//                 error={formData.phone.length > 0 && formData.phone.length !== 10}\n//               />\n//             </Grid>\n//           </Grid>\n//         </DialogContent>\n//         <DialogActions sx={{ px: 3, pb: 2 }}>\n//           <Button\n//             onClick={handleAddAddress}\n//             color=\"primary\"\n//             variant=\"contained\"\n//             sx={{ fontWeight: 600 }}\n//             disabled={loading || !formData.flat || !formData.landmark || !formData.city || !formData.state || formData.phone.length !== 10}\n//           >\n//             {loading ? 'Adding...' : 'Add Address'}\n//           </Button>\n//           <Button\n//             onClick={() => setShowModal(false)}\n//             color=\"secondary\"\n//             variant=\"outlined\"\n//           >\n//             Cancel\n//           </Button>\n//         </DialogActions>\n//       </Dialog>\n//     </>\n//   );\n// };\n\n// export default AddToCart;\nvar _c;\n$RefreshReg$(_c, \"AddToCart\");","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","Trash2","ShoppingBag","ArrowLeft","Link","useNavigate","toast","deleteProduct","updateData","clearProducts","API_URL","axiosInstance","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Button","Grid","InputAdornment","JoinUrl","jsxDEV","_jsxDEV","Fragment","_Fragment","AddToCart","_s","isAuthenticated","setIsAuthenticated","showModal","setShowModal","addresses","setAddresses","OriginalAddress","setOriginalAddress","loading","setLoading","states","setStates","cities","setCities","checkoutLoading","setCheckoutLoading","formData","setFormData","flat","landmark","state","city","country","phone","selectedAddress","userData","JSON","parse","localStorage","getItem","cartItems","app","data","dispatch","navigate","totalPrice","reduce","acc","item","price","parseFloat","final_price","quantity","handleQuantityChange","itemId","newQuantity","updatedItem","find","_id","updatedProduct","success","position","autoClose","handleRemoveItem","info","handleAddAddress","userId","error","length","phoneWithCountry","fullAddress","response","put","address","status","prev","console","fetchStates","res","post","map","s","name","err","fetchCities","handleCheckout","log","_formData$phone","warn","phoneNumber","toString","trim","replace","test","orderItems","index","qty","parseInt","Error","productId","calculatedTotal","sum","itemsTotal","toFixed","cartTotal","difference","Math","abs","orderPayload","items","totalAmount","orderResponse","_orderResponse$data","errorMsg","message","orderId","razorpayOrderId","window","Razorpay","razorpayOptions","key","amount","round","currency","description","slice","order_id","handler","razorpay_payment_id","razorpay_order_id","razorpay_signature","setItem","modal","ondismiss","prefill","email","contact","notes","theme","color","stringify","substring","razorpayInstance","on","_response$error","_response$error2","_response$error3","_response$error4","_response$error5","code","reason","open","_error$response","_error$response2","_error$response3","_error$response4","_error$response4$data","constructor","headers","request","stack","errorMessage","_error$response$data","_error$response$data2","details","_error$response$data3","fetchData","_response$data","get","userInfo","Array","isArray","children","className","onClick","size","fileName","_jsxFileName","lineNumber","columnNumber","_item$media$","to","src","media","url","alt","discount","disabled","addr","type","value","checked","onChange","style","transform","onClose","fullWidth","maxWidth","sx","fontWeight","pt","display","flexDirection","gap","container","spacing","xs","sm","label","variant","e","target","width","padding","borderRadius","border","InputProps","startAdornment","helperText","px","pb","_c","$RefreshReg$"],"sources":["/Users/himanshu/Desktop/Dr BSK/Dr bsk/src/components/AddToCart.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Trash2, ShoppingBag, ArrowLeft } from 'lucide-react';\r\nimport './addToCart.css';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { deleteProduct, updateData, clearProducts } from '../store/Action';\r\nimport API_URL from '../config';\r\nimport axiosInstance from './AxiosInstance';\r\nimport { Dialog, DialogTitle, DialogContent, DialogActions, TextField, Button, Grid, InputAdornment } from '@mui/material';\r\nimport JoinUrl from '../JoinUrl';\r\n\r\nconst AddToCart = () => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [addresses, setAddresses] = useState([]);\r\n  const [OriginalAddress, setOriginalAddress] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [states, setStates] = useState([]);\r\n  const [cities, setCities] = useState([]);\r\n  const [checkoutLoading, setCheckoutLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    flat: '',\r\n    landmark: '',\r\n    state: '',\r\n    city: '',\r\n    country: 'India',\r\n    phone: '',\r\n    selectedAddress: ''\r\n  });\r\n\r\n  const userData = JSON.parse(localStorage.getItem('userData') || '{}');\r\n  const cartItems = useSelector((state) => state.app.data);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem('userData');\r\n    if (userData) {\r\n      setIsAuthenticated(true);\r\n    } else {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n  }, [navigate]);\r\n\r\n  const totalPrice = cartItems.reduce((acc, item) => {\r\n    const price = parseFloat(item.final_price || 0);\r\n    return acc + price * (item.quantity || 1);\r\n  }, 0);\r\n\r\n  const handleQuantityChange = (itemId, newQuantity) => {\r\n    if (newQuantity < 1) return;\r\n    const updatedItem = cartItems.find((item) => item._id === itemId);\r\n    if (updatedItem) {\r\n      const updatedProduct = { ...updatedItem, quantity: newQuantity };\r\n      dispatch(updateData(updatedProduct));\r\n      toast.success('Item quantity updated!', { position: 'top-right', autoClose: 2000 });\r\n    }\r\n  };\r\n\r\n  const handleRemoveItem = (itemId) => {\r\n    dispatch(deleteProduct(itemId));\r\n    toast.info('Item removed from cart.', { position: 'top-right', autoClose: 2000 });\r\n  };\r\n\r\n  const handleAddAddress = async () => {\r\n    const userData = JSON.parse(localStorage.getItem('userData'));\r\n    const userId = userData?._id;\r\n\r\n    if (!userId) {\r\n      toast.error(\"Please login first\");\r\n      return;\r\n    }\r\n\r\n    if (!formData.flat || !formData.landmark || !formData.city || !formData.state || !formData.phone) {\r\n      toast.error(\"Please fill all address fields\");\r\n      return;\r\n    }\r\n\r\n    if (formData.phone.length !== 10) {\r\n      toast.error(\"Please enter a valid 10-digit phone number\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    const phoneWithCountry = `+91${formData.phone}`;\r\n    const fullAddress = `${formData.flat}, ${formData.landmark}, ${formData.city}, ${formData.state}, ${formData.country}`;\r\n\r\n    try {\r\n      const response = await axiosInstance.put(`admin/updateAdmin/${userId}`, {\r\n        address: [...addresses, fullAddress],\r\n        phone: phoneWithCountry,\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        toast.success(\"Address added successfully\");\r\n        setAddresses((prev) => [...prev, fullAddress]);\r\n        setFormData({\r\n          ...formData,\r\n          selectedAddress: fullAddress,\r\n          flat: '',\r\n          landmark: '',\r\n          state: '',\r\n          city: '',\r\n          phone: ''\r\n        });\r\n        setShowModal(false);\r\n      }\r\n    } catch (error) {\r\n      toast.error(\"Failed to update address\");\r\n      console.error(\"Address update error:\", error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchStates = async () => {\r\n      try {\r\n        const res = await axiosInstance.post('https://countriesnow.space/api/v0.1/countries/states', {\r\n          country: 'India'\r\n        });\r\n        setStates(res.data.data.states.map(s => s.name));\r\n      } catch (err) {\r\n        console.error('Error fetching states', err);\r\n      }\r\n    };\r\n    fetchStates();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!formData.state) return;\r\n\r\n    const fetchCities = async () => {\r\n      try {\r\n        const res = await axiosInstance.post('https://countriesnow.space/api/v0.1/countries/state/cities', {\r\n          country: 'India',\r\n          state: formData.state\r\n        });\r\n        setCities(res.data.data);\r\n      } catch (err) {\r\n        console.error('Error fetching cities', err);\r\n      }\r\n    };\r\n    fetchCities();\r\n  }, [formData.state]);\r\n\r\n\r\n  // // 1:\r\n  // const handleCheckout = async () => {\r\n  //   console.log(\"=== STARTING CHECKOUT ===\");\r\n\r\n  //   // Prevent double submission\r\n  //   if (checkoutLoading) {\r\n  //     console.log(\"Checkout already in progress\");\r\n  //     return;\r\n  //   }\r\n\r\n  //   setCheckoutLoading(true);\r\n\r\n  //   try {\r\n  //     // Validation checks\r\n  //     if (!formData.selectedAddress) {\r\n  //       toast.warn('Please select an address before checkout.');\r\n  //       return;\r\n  //     }\r\n\r\n  //     if (!userData || !userData._id) {\r\n  //       toast.error('Please log in again to continue');\r\n  //       navigate('/login');\r\n  //       return;\r\n  //     }\r\n\r\n  //     if (!cartItems || cartItems.length === 0) {\r\n  //       toast.error('Your cart is empty');\r\n  //       return;\r\n  //     }\r\n\r\n  //     // Get phone number - prioritize form data, then original address\r\n  //     const phoneNumber = formData.phone \r\n  //       ? formData.phone.toString() \r\n  //       : OriginalAddress?.phone?.replace('+91', '') || \"\";\r\n\r\n  //     if (!phoneNumber || phoneNumber.length < 10) {\r\n  //       toast.error('Please provide a valid 10-digit phone number');\r\n  //       return;\r\n  //     }\r\n\r\n  //     console.log(\"Validation passed, creating order...\");\r\n\r\n  //     // Prepare order payload with detailed validation\r\n  //     const orderPayload = {\r\n  //       userId: userData._id,\r\n  //       items: cartItems.map((item, index) => {\r\n  //         const qty = item.quantity || 1;\r\n  //         const price = parseFloat(item.final_price || 0);\r\n\r\n  //         console.log(`Processing item ${index}:`, {\r\n  //           id: item._id,\r\n  //           name: item.name,\r\n  //           quantity: qty,\r\n  //           price: price\r\n  //         });\r\n\r\n  //         if (!item._id || !item.name || qty < 1 || price <= 0) {\r\n  //           throw new Error(`Invalid item data for: ${item.name || 'Unknown item'}`);\r\n  //         }\r\n\r\n  //         return {\r\n  //           productId: item._id,\r\n  //           name: item.name.trim(),\r\n  //           quantity: parseInt(qty),\r\n  //           price: parseFloat(price)\r\n  //         };\r\n  //       }),\r\n  //       address: formData.selectedAddress.trim(),\r\n  //       phone: phoneNumber.toString(), // Send as string without +91 prefix\r\n  //       totalAmount: parseFloat(totalPrice)\r\n  //     };\r\n\r\n  //     console.log(\"Final Order Payload:\", orderPayload);\r\n\r\n  //     // Validate total amount\r\n  //     const calculatedTotal = orderPayload.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n  //     if (Math.abs(calculatedTotal - orderPayload.totalAmount) > 0.01) {\r\n  //       throw new Error(`Total amount mismatch. Expected: ${calculatedTotal}, Got: ${orderPayload.totalAmount}`);\r\n  //     }\r\n\r\n  //     // Create order in backend first\r\n  //     console.log(\"Sending order to backend...\");\r\n  //     const orderResponse = await axiosInstance.post('/api/createOrder', orderPayload);\r\n\r\n  //     console.log(\"Backend response:\", {\r\n  //       status: orderResponse.status,\r\n  //       data: orderResponse.data\r\n  //     });\r\n\r\n  //     // Check if order was created successfully\r\n  //     if (orderResponse.status !== 201) {\r\n  //       const errorMsg = orderResponse.data?.message || 'Failed to create order';\r\n  //       console.error(\"Order creation failed:\", errorMsg);\r\n  //       toast.error(errorMsg);\r\n  //       return;\r\n  //     }\r\n\r\n  //     const { success, orderId, razorpayOrderId, message } = orderResponse.data;\r\n\r\n  //     if (!success || !orderId || !razorpayOrderId) {\r\n  //       const errorMsg = message || 'Order creation response missing required data';\r\n  //       console.error(\"Invalid order response:\", orderResponse.data);\r\n  //       toast.error(errorMsg);\r\n  //       return;\r\n  //     }\r\n\r\n  //     console.log(\"Order created successfully:\", { orderId, razorpayOrderId });\r\n  //     toast.success(message || 'Order created successfully');\r\n\r\n  //     // Initialize Razorpay payment\r\n  //     const razorpayOptions = {\r\n  //       key: 'rzp_live_hgk55iUzVRpKZ1',\r\n  //       amount: Math.round(orderPayload.totalAmount * 100), // Amount in paise\r\n  //       currency: 'INR',\r\n  //       name: 'BSK Healthcare',\r\n  //       description: `Order #${orderId.slice(-8)}`,\r\n  //       order_id: razorpayOrderId,\r\n\r\n  //       handler: async function (response) {\r\n  //         console.log(\"=== PAYMENT SUCCESS ===\");\r\n  //         console.log(\"Payment response:\", response);\r\n\r\n  //         try {\r\n  //           toast.success('Payment successful! Order placed.');\r\n\r\n  //           // Clear cart and redirect\r\n  //           dispatch(clearProducts());\r\n  //           localStorage.setItem('lastOrderId', orderId);\r\n  //           navigate('/successOrder');\r\n\r\n  //         } catch (err) {\r\n  //           console.error('Post-payment processing error:', err);\r\n  //           toast.error('Payment successful but there was an issue. Please contact support.');\r\n  //           navigate('/successOrder');\r\n  //         }\r\n  //       },\r\n\r\n  //       modal: {\r\n  //         ondismiss: function () {\r\n  //           console.log(\"Payment modal dismissed\");\r\n  //           toast.info('Payment cancelled');\r\n  //           setCheckoutLoading(false);\r\n  //         }\r\n  //       },\r\n\r\n  //       prefill: {\r\n  //         name: userData.name || '',\r\n  //         email: userData.email || '',\r\n  //         contact: phoneNumber\r\n  //       },\r\n\r\n  //       notes: {\r\n  //         address: formData.selectedAddress,\r\n  //         orderId: orderId,\r\n  //         userId: userData._id,\r\n  //         userEmail: userData.email\r\n  //       },\r\n\r\n  //       theme: {\r\n  //         color: '#3399cc'\r\n  //       },\r\n\r\n  //       method: {\r\n  //         netbanking: true,\r\n  //         card: true,\r\n  //         upi: true,\r\n  //         wallet: true,\r\n  //         emi: false\r\n  //       }\r\n  //     };\r\n\r\n  //     console.log(\"Initializing Razorpay...\");\r\n\r\n  //     // Create Razorpay instance and handle failures\r\n  //     const razorpayInstance = new window.Razorpay(razorpayOptions);\r\n\r\n  //     razorpayInstance.on('payment.failed', function (response) {\r\n  //       console.log(\"=== PAYMENT FAILED ===\");\r\n  //       console.error(\"Payment failure response:\", response);\r\n\r\n  //       const errorMsg = response.error?.description || response.error?.reason || 'Payment failed';\r\n  //       toast.error(`Payment failed: ${errorMsg}`);\r\n  //       setCheckoutLoading(false);\r\n  //     });\r\n\r\n  //     // Open payment modal\r\n  //     razorpayInstance.open();\r\n\r\n  //   } catch (error) {\r\n  //     console.error('=== CHECKOUT ERROR ===');\r\n  //     console.error('Error details:', {\r\n  //       message: error.message,\r\n  //       response: error.response?.data,\r\n  //       status: error.response?.status,\r\n  //       stack: error.stack\r\n  //     });\r\n\r\n  //     let errorMessage = 'Failed to initiate checkout. Please try again.';\r\n\r\n  //     if (error.response?.status === 500) {\r\n  //       errorMessage = 'Server error occurred. Please try again in a moment.';\r\n  //     } else if (error.response?.status === 400) {\r\n  //       errorMessage = error.response.data?.message || 'Invalid order data. Please check your details.';\r\n  //     } else if (error.response?.status === 404) {\r\n  //       errorMessage = 'User account not found. Please login again.';\r\n  //     } else if (error.response?.data?.message) {\r\n  //       errorMessage = error.response.data.message;\r\n  //     } else if (error.message) {\r\n  //       errorMessage = error.message;\r\n  //     }\r\n\r\n  //     toast.error(errorMessage);\r\n  //   } finally {\r\n  //     setCheckoutLoading(false);\r\n  //   }\r\n  // };\r\n\r\n\r\n  // // 2:\r\n  const handleCheckout = async () => {\r\n    console.log(\"=== STARTING CHECKOUT ===\");\r\n    // Prevent double submission\r\n    if (checkoutLoading) {\r\n      console.log(\"Checkout already in progress\");\r\n      return;\r\n    }\r\n\r\n    setCheckoutLoading(true);\r\n\r\n    try {\r\n      // Validation checks\r\n      if (!formData.selectedAddress) {\r\n        toast.warn('Please select an address before checkout.');\r\n        setCheckoutLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (!userData || !userData._id) {\r\n        toast.error('Please log in again to continue');\r\n        navigate('/login');\r\n        setCheckoutLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (!cartItems || cartItems.length === 0) {\r\n        toast.error('Your cart is empty');\r\n        setCheckoutLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Get and validate phone number\r\n      let phoneNumber = formData.phone?.toString().trim();\r\n\r\n      if (!phoneNumber && OriginalAddress?.phone) {\r\n        phoneNumber = OriginalAddress.phone.replace(/^\\+91/, '').replace(/^91/, '').trim();\r\n      }\r\n\r\n      // console.log(\"Phone number validation:\", {\r\n      //   formDataPhone: formData.phone,\r\n      //   originalPhone: OriginalAddress?.phone,\r\n      //   finalPhone: phoneNumber\r\n      // });\r\n\r\n      // Validate phone is exactly 10 digits\r\n      if (!phoneNumber || !/^\\d{10}$/.test(phoneNumber)) {\r\n        toast.error('Please provide a valid 10-digit phone number');\r\n        setCheckoutLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Prepare order items with validation\r\n      const orderItems = cartItems.map((item, index) => {\r\n        const qty = parseInt(item.quantity) || 1;\r\n        const price = parseFloat(item.final_price) || 0;\r\n\r\n\r\n        if (!item._id || !item.name || qty < 1 || price <= 0) {\r\n          throw new Error(`Invalid item data for: ${item.name || 'Unknown item'}`);\r\n        }\r\n\r\n        return {\r\n          productId: item._id,\r\n          name: item.name.trim(),\r\n          quantity: qty,\r\n          price: price\r\n        };\r\n      });\r\n\r\n      // Calculate total\r\n      const calculatedTotal = orderItems.reduce((sum, item) =>\r\n        sum + (item.price * item.quantity), 0\r\n      );\r\n\r\n      console.log(\"Total calculation:\", {\r\n        itemsTotal: calculatedTotal.toFixed(2),\r\n        cartTotal: totalPrice.toFixed(2),\r\n        difference: Math.abs(calculatedTotal - totalPrice).toFixed(2)\r\n      });\r\n\r\n      // Prepare order payload\r\n      const orderPayload = {\r\n        userId: userData._id,\r\n        items: orderItems,\r\n        address: formData.selectedAddress.trim(),\r\n        phone: phoneNumber, // Send without +91 prefix\r\n        totalAmount: parseFloat(totalPrice.toFixed(2))\r\n      };\r\n\r\n\r\n      // Send order to backend\r\n      console.log(\"Sending POST request to /api/createOrder...\");\r\n      const orderResponse = await axiosInstance.post('/api/createOrder', orderPayload);\r\n\r\n      // console.log(\"=== BACKEND RESPONSE ===\");\r\n      // console.log(\"Status:\", orderResponse.status);\r\n      // console.log(\"Data:\", JSON.stringify(orderResponse.data, null, 2));\r\n\r\n      // Validate response\r\n      if (orderResponse.status !== 201) {\r\n        const errorMsg = orderResponse.data?.message || 'Failed to create order';\r\n        console.error(\"❌ Order creation failed:\", errorMsg);\r\n        toast.error(errorMsg);\r\n        setCheckoutLoading(false);\r\n        return;\r\n      }\r\n\r\n      const { success, orderId, razorpayOrderId, message } = orderResponse.data;\r\n\r\n      if (!success || !orderId || !razorpayOrderId) {\r\n        const errorMsg = message || 'Order creation response missing required data';\r\n        console.error(\"❌ Invalid order response:\", orderResponse.data);\r\n        toast.error(errorMsg);\r\n        setCheckoutLoading(false);\r\n        return;\r\n      }\r\n\r\n      toast.success(message || 'Order created successfully');\r\n\r\n      // Verify Razorpay is loaded\r\n      if (!window.Razorpay) {\r\n        console.error(\"❌ Razorpay SDK not loaded!\");\r\n        toast.error('Payment system not loaded. Please refresh and try again.');\r\n        setCheckoutLoading(false);\r\n        return;\r\n      }\r\n\r\n      console.log(\"✓ Razorpay SDK loaded\");\r\n\r\n      // Initialize Razorpay payment\r\n      const razorpayOptions = {\r\n        key: 'rzp_live_hgk55iUzVRpKZ1', // Your Razorpay key\r\n        amount: Math.round(orderPayload.totalAmount * 100), // Amount in paise\r\n        currency: 'INR',\r\n        name: 'BSK Healthcare',\r\n        description: `Order #${orderId.slice(-8)}`,\r\n        order_id: razorpayOrderId,\r\n\r\n        handler: async function (response) {\r\n          console.log(\"=== PAYMENT SUCCESS ===\");\r\n          console.log(\"Payment ID:\", response.razorpay_payment_id);\r\n          console.log(\"Order ID:\", response.razorpay_order_id);\r\n          console.log(\"Signature:\", response.razorpay_signature);\r\n\r\n          try {\r\n            toast.success('Payment successful! Order placed.');\r\n\r\n            // Clear cart\r\n            dispatch(clearProducts());\r\n\r\n            // Store order ID and redirect\r\n            localStorage.setItem('lastOrderId', orderId);\r\n            console.log(\"Redirecting to success page...\");\r\n            navigate('/successOrder');\r\n\r\n          } catch (err) {\r\n            console.error('Post-payment error:', err);\r\n            toast.error('Payment successful but there was an issue. Please contact support.');\r\n            navigate('/successOrder');\r\n          }\r\n        },\r\n\r\n        modal: {\r\n          ondismiss: function () {\r\n            console.log(\"❌ Payment modal dismissed by user\");\r\n            toast.info('Payment cancelled');\r\n            setCheckoutLoading(false);\r\n          }\r\n        },\r\n\r\n        prefill: {\r\n          name: userData.name || '',\r\n          email: userData.email || '',\r\n          contact: phoneNumber || '',\r\n        },\r\n\r\n        notes: {\r\n          orderId: orderId,\r\n          userId: userData._id\r\n        },\r\n\r\n        theme: {\r\n          // color: '#3399cc'\r\n          color: '#68171b'\r\n        }\r\n      };\r\n\r\n      console.log(\"=== RAZORPAY OPTIONS ===\");\r\n      console.log(JSON.stringify({\r\n        ...razorpayOptions,\r\n        key: razorpayOptions.key.substring(0, 10) + '...'\r\n      }, null, 2));\r\n\r\n      // Create Razorpay instance\r\n      const razorpayInstance = new window.Razorpay(razorpayOptions);\r\n\r\n      // Handle payment failures\r\n      razorpayInstance.on('payment.failed', function (response) {\r\n        console.log(\"=== PAYMENT FAILED ===\");\r\n        console.error(\"Error code:\", response.error?.code);\r\n        console.error(\"Error description:\", response.error?.description);\r\n        console.error(\"Error reason:\", response.error?.reason);\r\n        console.error(\"Full error:\", JSON.stringify(response.error, null, 2));\r\n\r\n        const errorMsg = response.error?.description ||\r\n          response.error?.reason ||\r\n          'Payment failed';\r\n        toast.error(`Payment failed: ${errorMsg}`);\r\n        setCheckoutLoading(false);\r\n      });\r\n\r\n      // Open payment modal\r\n      razorpayInstance.open();\r\n\r\n    } catch (error) {\r\n      console.error('=== CHECKOUT ERROR ===');\r\n      console.error('Error type:', error.constructor.name);\r\n      console.error('Error message:', error.message);\r\n\r\n      if (error.response) {\r\n        console.error('Response status:', error.response.status);\r\n        console.error('Response data:', JSON.stringify(error.response.data, null, 2));\r\n        console.error('Response headers:', error.response.headers);\r\n      } else if (error.request) {\r\n        console.error('No response received');\r\n        console.error('Request details:', error.request);\r\n      }\r\n\r\n      console.error('Error stack:', error.stack);\r\n\r\n      let errorMessage = 'Failed to initiate checkout. Please try again.';\r\n\r\n      if (error.response?.status === 500) {\r\n        const details = error.response.data?.details || error.response.data?.error;\r\n        errorMessage = 'Server error occurred. ' + (details || 'Please try again in a moment.');\r\n      } else if (error.response?.status === 400) {\r\n        errorMessage = error.response.data?.message || 'Invalid order data. Please check your details.';\r\n      } else if (error.response?.status === 404) {\r\n        errorMessage = 'User account not found. Please login again.';\r\n      } else if (error.response?.data?.message) {\r\n        errorMessage = error.response.data.message;\r\n      } else if (error.message) {\r\n        errorMessage = error.message;\r\n      }\r\n\r\n      toast.error(errorMessage);\r\n      setCheckoutLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchData = async () => {\r\n    const userData = JSON.parse(localStorage.getItem('userData'));\r\n    const userId = userData?._id;\r\n\r\n    if (!userId) {\r\n      console.error(\"User ID not found.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axiosInstance.get(`/admin/readAdmin/${userId}`);\r\n      const userInfo = response?.data?.data;\r\n\r\n      console.log(\"Fetched user info:\", userInfo);\r\n      setOriginalAddress(userInfo || {});\r\n\r\n      if (Array.isArray(userInfo?.address)) {\r\n        setAddresses(userInfo.address);\r\n        // Auto-select first address if available\r\n        if (userInfo.address.length > 0 && !formData.selectedAddress) {\r\n          setFormData(prev => ({ ...prev, selectedAddress: userInfo.address[0] }));\r\n        }\r\n      } else {\r\n        setAddresses([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching address:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      fetchData();\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  if (isAuthenticated === null) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"cart-container\">\r\n        <div className=\"cart-header\">\r\n          <div className=\"container\">\r\n            <button className=\"back-button\" onClick={() => navigate(-1)}>\r\n              <ArrowLeft size={20} /> Continue Shopping\r\n            </button>\r\n            <h1 className=\"cart-title\">\r\n              <ShoppingBag size={28} /> Shopping Cart\r\n            </h1>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"container\">\r\n          <div className=\"cart-content\">\r\n            <div className=\"cart-items-section\">\r\n              <div className=\"section-header\">\r\n                <h2>Your Items ({cartItems.length})</h2>\r\n                {cartItems.length > 0 && (\r\n                  <button\r\n                    className=\"clear-cart-btn\"\r\n                    onClick={() => {\r\n                      dispatch(clearProducts());\r\n                      toast.info('Cart cleared.', {\r\n                        position: 'top-right',\r\n                        autoClose: 2000,\r\n                      });\r\n                    }}\r\n                  >\r\n                    Clear Cart\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {cartItems.length === 0 ? (\r\n                <div className=\"empty-cart\">\r\n                  <div className=\"empty-cart-icon\">\r\n                    <ShoppingBag size={64} />\r\n                  </div>\r\n                  <h3>Your cart is empty</h3>\r\n                  <p>Add some items to get started</p>\r\n                  <button onClick={() => navigate(\"/fever\")} className=\"continue-shopping-btn\">Start Shopping</button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"cart-items\">\r\n                  {cartItems.map((item) => (\r\n                    <div key={item._id} className=\"cart-item\">\r\n                      <Link to={`/ProductPage/${item._id}`} className=\"item-image\">\r\n                        <img src={JoinUrl(API_URL, item.media[0]?.url)} alt={item.name} />\r\n                      </Link>\r\n\r\n                      <div className=\"item-details\">\r\n                        <h3 className=\"item-name\">{item.name}</h3>\r\n                        <p className=\"item-description\">{item.quantity} Pack</p>\r\n\r\n                        <div className=\"item-pricing\">\r\n                          <span className=\"current-price\">\r\n                            ₹{parseFloat(item.final_price || 0).toFixed(2)}\r\n                          </span>\r\n                          <span className=\"discount\">\r\n                            {Math.round((item.discount))}% OFF\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"item-actions\">\r\n                        <div className=\"quantity-controls\">\r\n                          <button\r\n                            className=\"quantity-btn\"\r\n                            onClick={() => handleQuantityChange(item._id, (item.quantity || 1) - 1)}\r\n                            disabled={(item.quantity || 1) <= 1}\r\n                          >\r\n                            <span>-</span>\r\n                          </button>\r\n                          <span className=\"quantity\">{item.quantity || 1}</span>\r\n                          <button\r\n                            className=\"quantity-btn\"\r\n                            onClick={() => handleQuantityChange(item._id, (item.quantity || 1) + 1)}\r\n                          >\r\n                            <span>+</span>\r\n                          </button>\r\n                        </div>\r\n                        <button className=\"remove-btn\" onClick={() => handleRemoveItem(item._id)}>\r\n                          <Trash2 size={18} />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {cartItems.length > 0 && (\r\n              <div className=\"order-summary\">\r\n                <div className=\"summary-card\">\r\n                  <h3 className=\"summary-title\">Order Summary</h3>\r\n\r\n                  <button\r\n                    className=\"enhanced-add-address-btn\"\r\n                    onClick={() => setShowModal(true)}\r\n                  >\r\n                    ➕ Add New Address\r\n                  </button>\r\n\r\n                  <div className='my_10'>\r\n                    {addresses.length > 0 ? (\r\n                      <div className=\"saved-addresses\">\r\n                        <h4 className=\"section-subtitle\">📍 Saved Addresses</h4>\r\n                        <ul className=\"address-list\">\r\n                          {addresses.map((addr, index) => (\r\n                            <li key={index} className={`address-card ${formData.selectedAddress === addr ? 'selected' : ''}`}>\r\n                              <label>\r\n                                <input\r\n                                  type=\"radio\"\r\n                                  name=\"selectedAddress\"\r\n                                  value={addr}\r\n                                  checked={formData.selectedAddress === addr}\r\n                                  onChange={() =>\r\n                                    setFormData({ ...formData, selectedAddress: addr })\r\n                                  }\r\n                                />\r\n                                <span className='text_20'>{addr}</span>\r\n                              </label>\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </div>\r\n                    ) : (\r\n                      <p className=\"no-address-text\">\r\n                        No address saved yet. Please add one.\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"summary-details\">\r\n                    <div className=\"summary-row\">\r\n                      <span>Subtotal ({cartItems.length} items)</span>\r\n                      <span>₹{totalPrice.toFixed(2)}</span>\r\n                    </div>\r\n                    <div className=\"summary-row\">\r\n                      <span>Shipping</span>\r\n                      <span className=\"free-shipping\">FREE</span>\r\n                    </div>\r\n                    <div className=\"summary-row\">\r\n                      <span>Tax</span>\r\n                      <span>₹0.00</span>\r\n                    </div>\r\n                    <div className=\"summary-row discount-row\">\r\n                      <span>Discount</span>\r\n                      <span>-₹0.00</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"summary-divider\"></div>\r\n                  <div className=\"summary-total\">\r\n                    <span>Total</span>\r\n                    <span>₹{totalPrice.toFixed(2)}</span>\r\n                  </div>\r\n\r\n                  <button\r\n                    className=\"checkout-btn\"\r\n                    onClick={handleCheckout}\r\n                    disabled={!formData.selectedAddress || checkoutLoading}\r\n                  >\r\n                    {checkoutLoading ? (\r\n                      <>\r\n                        <span>Processing...</span>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        Proceed to Checkout\r\n                        <ArrowLeft size={18} style={{ transform: 'rotate(180deg)' }} />\r\n                      </>\r\n                    )}\r\n                  </button>\r\n\r\n                  <div className=\"security-badges\">\r\n                    <div className=\"badge\">🔒 Secure Checkout</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Dialog\r\n        open={showModal}\r\n        onClose={() => setShowModal(false)}\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <DialogTitle sx={{ fontWeight: 'bold' }}>Add New Address</DialogTitle>\r\n        <DialogContent sx={{ pt: 2, display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                label=\"Flat / House\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={formData.flat}\r\n                onChange={(e) => setFormData({ ...formData, flat: e.target.value })}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                label=\"Landmark\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={formData.landmark}\r\n                onChange={(e) => setFormData({ ...formData, landmark: e.target.value })}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6}>\r\n              <select\r\n                name=\"state\"\r\n                value={formData.state}\r\n                onChange={(e) => setFormData({ ...formData, state: e.target.value, city: '' })}\r\n                style={{ width: '100%', padding: '8px', borderRadius: '4px', border: '1px solid #ccc' }}\r\n              >\r\n                <option value=\"\">Select State</option>\r\n                {states.map((state) => <option key={state} value={state}>{state}</option>)}\r\n              </select>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6}>\r\n              <select\r\n                name=\"city\"\r\n                value={formData.city}\r\n                onChange={(e) => setFormData({ ...formData, city: e.target.value })}\r\n                style={{ width: '100%', padding: '8px', borderRadius: '4px', border: '1px solid #ccc' }}\r\n                disabled={!formData.state}\r\n              >\r\n                <option value=\"\">Select City</option>\r\n                {cities.map((city) => <option key={city} value={city}>{city}</option>)}\r\n              </select>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                label=\"Country\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value=\"India\"\r\n                disabled\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                label=\"Phone Number\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                name=\"phone\"\r\n                value={formData.phone}\r\n                onChange={(e) => {\r\n                  const value = e.target.value.replace(/\\D/g, ''); // Only digits\r\n                  if (value.length <= 10) {\r\n                    setFormData({ ...formData, phone: value });\r\n                  }\r\n                }}\r\n                InputProps={{\r\n                  startAdornment: <InputAdornment position=\"start\">+91</InputAdornment>,\r\n                }}\r\n                helperText={formData.phone.length > 0 && formData.phone.length !== 10 ? \"Phone number must be 10 digits\" : \"\"}\r\n                error={formData.phone.length > 0 && formData.phone.length !== 10}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions sx={{ px: 3, pb: 2 }}>\r\n          <Button\r\n            onClick={handleAddAddress}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            sx={{ fontWeight: 600 }}\r\n            disabled={loading || !formData.flat || !formData.landmark || !formData.city || !formData.state || formData.phone.length !== 10}\r\n          >\r\n            {loading ? 'Adding...' : 'Add Address'}\r\n          </Button>\r\n          <Button\r\n            onClick={() => setShowModal(false)}\r\n            color=\"secondary\"\r\n            variant=\"outlined\"\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddToCart;\r\n\r\n// // 2:\r\n// import React, { useEffect, useState } from 'react';\r\n// import { useSelector, useDispatch } from 'react-redux';\r\n// import { Trash2, ShoppingBag, ArrowLeft } from 'lucide-react';\r\n// import './addToCart.css';\r\n// import { Link, useNavigate } from 'react-router-dom';\r\n// import { toast } from 'react-toastify';\r\n// import { deleteProduct, updateData, clearProducts } from '../store/Action';\r\n// import API_URL from '../config';\r\n// import axiosInstance from './AxiosInstance';\r\n// import { Dialog, DialogTitle, DialogContent, DialogActions, TextField, Button, Grid, InputAdornment } from '@mui/material';\r\n// import JoinUrl from '../JoinUrl';\r\n\r\n// const AddToCart = () => {\r\n//   const [isAuthenticated, setIsAuthenticated] = useState(null);\r\n//   const [showModal, setShowModal] = useState(false);\r\n//   const [addresses, setAddresses] = useState([]);\r\n//   const [OriginalAddress, setOriginalAddress] = useState({});\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [states, setStates] = useState([]);\r\n//   const [cities, setCities] = useState([]);\r\n//   const [formData, setFormData] = useState({\r\n//     flat: '',\r\n//     landmark: '',\r\n//     state: '',\r\n//     city: '',\r\n//     country: 'India',\r\n//     phone: '',\r\n//     selectedAddress: ''\r\n//   });\r\n\r\n//   const userData = JSON.parse(localStorage.getItem('userData') || '{}');\r\n//   const cartItems = useSelector((state) => state.app.data);\r\n//   const dispatch = useDispatch();\r\n//   const navigate = useNavigate();\r\n\r\n//   useEffect(() => {\r\n//     const userData = localStorage.getItem('userData');\r\n//     if (userData) {\r\n//       setIsAuthenticated(true);\r\n//     } else {\r\n//       navigate('/login');\r\n//       return;\r\n//     }\r\n//   }, [navigate]);\r\n\r\n//   const totalPrice = cartItems.reduce((acc, item) => {\r\n//     const price = parseFloat(item.final_price || 0);\r\n//     return acc + price * (item.quantity || 1);\r\n//   }, 0);\r\n\r\n//   const handleQuantityChange = (itemId, newQuantity) => {\r\n//     if (newQuantity < 1) return;\r\n//     const updatedItem = cartItems.find((item) => item._id === itemId);\r\n//     if (updatedItem) {\r\n//       const updatedProduct = { ...updatedItem, quantity: newQuantity };\r\n//       dispatch(updateData(updatedProduct));\r\n//       toast.success('Item quantity updated!', { position: 'top-right', autoClose: 2000 });\r\n//     }\r\n//   };\r\n\r\n//   const handleRemoveItem = (itemId) => {\r\n//     dispatch(deleteProduct(itemId));\r\n//     toast.info('Item removed from cart.', { position: 'top-right', autoClose: 2000 });\r\n//   };\r\n\r\n//   const handleAddAddress = async () => {\r\n//     const userData = JSON.parse(localStorage.getItem('userData'));\r\n//     const userId = userData?._id;\r\n\r\n//     if (!userId) {\r\n//       toast.error(\"Please login first\");\r\n//       return;\r\n//     }\r\n\r\n//     if (!formData.flat || !formData.landmark || !formData.city || !formData.state || !formData.phone) {\r\n//       toast.error(\"Please fill all address fields\");\r\n//       return;\r\n//     }\r\n\r\n//     if (formData.phone.length !== 10) {\r\n//       toast.error(\"Please enter a valid 10-digit phone number\");\r\n//       return;\r\n//     }\r\n\r\n//     setLoading(true);\r\n//     const phoneWithCountry = `+91${formData.phone}`;\r\n//     const fullAddress = `${formData.flat}, ${formData.landmark}, ${formData.city}, ${formData.state}, ${formData.country}`;\r\n\r\n//     try {\r\n//       const response = await axiosInstance.put(`admin/updateAdmin/${userId}`, {\r\n//         address: [...addresses, fullAddress],\r\n//         phone: phoneWithCountry,\r\n//       });\r\n\r\n//       if (response.status === 200) {\r\n//         toast.success(\"Address added successfully\");\r\n//         setAddresses((prev) => [...prev, fullAddress]);\r\n//         setFormData({\r\n//           ...formData,\r\n//           selectedAddress: fullAddress,\r\n//           flat: '',\r\n//           landmark: '',\r\n//           state: '',\r\n//           city: '',\r\n//           phone: ''\r\n//         });\r\n//         setShowModal(false);\r\n//       }\r\n//     } catch (error) {\r\n//       toast.error(\"Failed to update address\");\r\n//       console.error(\"Address update error:\", error);\r\n//     }\r\n//     setLoading(false);\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     const fetchStates = async () => {\r\n//       try {\r\n//         const res = await axiosInstance.post('https://countriesnow.space/api/v0.1/countries/states', {\r\n//           country: 'India'\r\n//         });\r\n//         setStates(res.data.data.states.map(s => s.name));\r\n//       } catch (err) {\r\n//         console.error('Error fetching states', err);\r\n//       }\r\n//     };\r\n//     fetchStates();\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     if (!formData.state) return;\r\n\r\n//     const fetchCities = async () => {\r\n//       try {\r\n//         const res = await axiosInstance.post('https://countriesnow.space/api/v0.1/countries/state/cities', {\r\n//           country: 'India',\r\n//           state: formData.state\r\n//         });\r\n//         setCities(res.data.data);\r\n//       } catch (err) {\r\n//         console.error('Error fetching cities', err);\r\n//       }\r\n//     };\r\n//     fetchCities();\r\n//   }, [formData.state]);\r\n\r\n//   const handleCheckout = async () => {\r\n//     // Validation checks\r\n//     if (!formData.selectedAddress) {\r\n//       toast.warn('Please select an address before checkout.');\r\n//       return;\r\n//     }\r\n\r\n//     if (!userData || !userData._id || !userData.email) {\r\n//       toast.error('Please log in again to continue');\r\n//       navigate('/login');\r\n//       return;\r\n//     }\r\n\r\n//     if (!cartItems || cartItems.length === 0) {\r\n//       toast.error('Your cart is empty');\r\n//       return;\r\n//     }\r\n\r\n//     // Get phone number - prioritize form data, then original address\r\n//     const phoneNumber = formData.phone ? `+91${formData.phone}` : OriginalAddress?.phone || \"\";\r\n\r\n//     if (!phoneNumber) {\r\n//       toast.error('Phone number is required for checkout');\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       // Prepare order payload with detailed validation\r\n//       const orderPayload = {\r\n//         userId: userData._id,\r\n//         items: cartItems.map((item, index) => {\r\n//           const qty = item.quantity || 1;\r\n//           const price = parseFloat(item.final_price || 0);\r\n\r\n//           if (!item._id || !item.name || qty < 1 || price <= 0) {\r\n//             throw new Error(`Invalid item data for: ${item.name || 'Unknown item'}`);\r\n//           }\r\n\r\n//           return {\r\n//             productId: item._id,\r\n//             name: item.name.trim(),\r\n//             quantity: parseInt(qty),\r\n//             price: parseFloat(price)\r\n//           };\r\n//         }),\r\n//         address: formData.selectedAddress.trim(),\r\n//         phone: phoneNumber.replace('+91', '').trim(),\r\n//         totalAmount: parseFloat(totalPrice)\r\n//       };\r\n\r\n//       console.log(\"Final Order Payload:\", orderPayload);\r\n\r\n//       // Validate total amount\r\n//       const calculatedTotal = orderPayload.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n//       if (Math.abs(calculatedTotal - orderPayload.totalAmount) > 0.01) {\r\n//         throw new Error(`Total amount mismatch. Expected: ${calculatedTotal}, Got: ${orderPayload.totalAmount}`);\r\n//       }\r\n\r\n//       // Create order in backend first\r\n//       console.log(\"Creating order in backend...\");\r\n//       const orderResponse = await axiosInstance.post('/api/createOrder', orderPayload);\r\n\r\n//       console.log(\"Order response:\", orderResponse.data);\r\n\r\n//       const { orderId, razorpayOrderId, message } = orderResponse.data || {};\r\n\r\n//       if (orderResponse.status !== 201 || !orderId || !razorpayOrderId) {\r\n//         toast.error(`Failed to create order${message ? `: ${message}` : ''}`);\r\n//         return;\r\n//       }\r\n\r\n//       // success path\r\n//       toast.success(message || 'Order created');\r\n\r\n//       console.log(\"Order created successfully:\", { orderId, razorpayOrderId });\r\n\r\n//       // Initialize Razorpay payment\r\n//       const razorpayOptions = {\r\n//         key: 'rzp_live_hgk55iUzVRpKZ1',\r\n//         amount: Math.round(orderPayload.totalAmount * 100), // Amount in paise\r\n//         currency: 'INR',\r\n//         name: 'BSK Healthcare',\r\n//         description: `Order #${orderId.slice(-8)}`,\r\n//         order_id: razorpayOrderId,\r\n\r\n//         handler: async function (response) {\r\n//           console.log(\"Payment response:\", response);\r\n\r\n//           try {\r\n//             toast.success('Payment successful! Order placed.');\r\n\r\n//             // Clear cart and redirect\r\n//             dispatch(clearProducts());\r\n//             localStorage.setItem('lastOrderId', orderId);\r\n//             navigate('/success');\r\n\r\n//           } catch (err) {\r\n//             console.error('Post-payment processing error:', err);\r\n//             toast.error('Payment successful but there was an issue. Please contact support.');\r\n//             navigate('/success');\r\n//           }\r\n//         },\r\n\r\n//         modal: {\r\n//           ondismiss: function () {\r\n//             toast.info('Payment cancelled');\r\n//           }\r\n//         },\r\n\r\n//         prefill: {\r\n//           name: userData.name || '',\r\n//           email: userData.email || '', // This ensures email shows in Razorpay dashboard\r\n//           contact: phoneNumber.replace('+91', '') // Remove +91 for prefill\r\n//         },\r\n\r\n//         notes: {\r\n//           address: formData.selectedAddress,\r\n//           orderId: orderId,\r\n//           userId: userData._id,\r\n//           userEmail: userData.email\r\n//         },\r\n\r\n//         theme: {\r\n//           color: '#3399cc'\r\n//         },\r\n\r\n//         method: {\r\n//           netbanking: true,\r\n//           card: true,\r\n//           upi: true,\r\n//           wallet: true,\r\n//           emi: false\r\n//         }\r\n//       };\r\n\r\n//       console.log(\"Initializing Razorpay with options:\", {\r\n//         ...razorpayOptions,\r\n//         handler: '[Function]'\r\n//       });\r\n\r\n//       // Create Razorpay instance and handle failures\r\n//       const razorpayInstance = new window.Razorpay(razorpayOptions);\r\n\r\n//       razorpayInstance.on('payment.failed', function (response) {\r\n//         console.log(\"=== PAYMENT FAILED ===\");\r\n//         console.log(\"Failed payment response:\", response);\r\n\r\n//         const errorMsg = response.error?.description || response.error?.reason || 'Payment failed';\r\n//         toast.error(`Payment failed: ${errorMsg}`);\r\n//       });\r\n\r\n//       // Open payment modal\r\n//       razorpayInstance.open();\r\n\r\n//     } catch (error) {\r\n//       console.error('Checkout Error details:', {\r\n//         message: error.message,\r\n//         response: error.response?.data,\r\n//         status: error.response?.status\r\n//       });\r\n\r\n//       let errorMessage = 'Failed to initiate checkout. Please try again.';\r\n\r\n//       if (error.response?.data?.message) {\r\n//         errorMessage = error.response.data.message;\r\n//       } else if (error.message) {\r\n//         errorMessage = error.message;\r\n//       }\r\n\r\n//       toast.error(errorMessage);\r\n//     }\r\n//   };\r\n\r\n//   const fetchData = async () => {\r\n//     const userData = JSON.parse(localStorage.getItem('userData'));\r\n//     const userId = userData?._id;\r\n\r\n//     if (!userId) {\r\n//       console.error(\"User ID not found.\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       const response = await axiosInstance.get(`/admin/readAdmin/${userId}`);\r\n//       const userInfo = response?.data?.data;\r\n\r\n//       console.log(\"✅ Fetched user info:\", userInfo);\r\n//       setOriginalAddress(userInfo || {});\r\n\r\n//       if (Array.isArray(userInfo?.address)) {\r\n//         setAddresses(userInfo.address);\r\n//         // Auto-select first address if available\r\n//         if (userInfo.address.length > 0 && !formData.selectedAddress) {\r\n//           setFormData(prev => ({ ...prev, selectedAddress: userInfo.address[0] }));\r\n//         }\r\n//       } else {\r\n//         setAddresses([]);\r\n//       }\r\n//     } catch (error) {\r\n//       console.error(\"Error fetching address:\", error);\r\n//     }\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     if (isAuthenticated) {\r\n//       fetchData();\r\n//     }\r\n//   }, [isAuthenticated]);\r\n\r\n//   if (isAuthenticated === null) return null;\r\n\r\n//   return (\r\n//     <>\r\n//       <div className=\"cart-container\">\r\n//         <div className=\"cart-header\">\r\n//           <div className=\"container\">\r\n//             <button className=\"back-button\" onClick={() => navigate(-1)}>\r\n//               <ArrowLeft size={20} /> Continue Shopping\r\n//             </button>\r\n//             <h1 className=\"cart-title\">\r\n//               <ShoppingBag size={28} /> Shopping Cart\r\n//             </h1>\r\n//           </div>\r\n//         </div>\r\n\r\n//         <div className=\"container\">\r\n//           <div className=\"cart-content\">\r\n//             <div className=\"cart-items-section\">\r\n//               <div className=\"section-header\">\r\n//                 <h2>Your Items ({cartItems.length})</h2>\r\n//                 {cartItems.length > 0 && (\r\n//                   <button\r\n//                     className=\"clear-cart-btn\"\r\n//                     onClick={() => {\r\n//                       dispatch(clearProducts());\r\n//                       toast.info('Cart cleared.', {\r\n//                         position: 'top-right',\r\n//                         autoClose: 2000,\r\n//                       });\r\n//                     }}\r\n//                   >\r\n//                     Clear Cart\r\n//                   </button>\r\n//                 )}\r\n//               </div>\r\n\r\n//               {cartItems.length === 0 ? (\r\n//                 <div className=\"empty-cart\">\r\n//                   <div className=\"empty-cart-icon\">\r\n//                     <ShoppingBag size={64} />\r\n//                   </div>\r\n//                   <h3>Your cart is empty</h3>\r\n//                   <p>Add some items to get started</p>\r\n//                   <button onClick={() => navigate(\"/fever\")} className=\"continue-shopping-btn\">Start Shopping</button>\r\n//                 </div>\r\n//               ) : (\r\n//                 <div className=\"cart-items\">\r\n//                   {cartItems.map((item) => (\r\n//                     <div key={item._id} className=\"cart-item\">\r\n//                       <Link to={`/ProductPage/${item._id}`} className=\"item-image\">\r\n//                         <img src={JoinUrl(API_URL, item.media[0]?.url)} alt={item.name} />\r\n//                       </Link>\r\n\r\n//                       <div className=\"item-details\">\r\n//                         <h3 className=\"item-name\">{item.name}</h3>\r\n//                         <p className=\"item-description\">{item.quantity} Pack</p>\r\n\r\n//                         <div className=\"item-pricing\">\r\n//                           <span className=\"current-price\">\r\n//                             ₹{parseFloat(item.final_price || 0).toFixed(2)}\r\n//                           </span>\r\n//                           <span className=\"discount\">\r\n//                             {Math.round((item.discount))}% OFF\r\n//                           </span>\r\n//                         </div>\r\n//                       </div>\r\n\r\n//                       <div className=\"item-actions\">\r\n//                         <div className=\"quantity-controls\">\r\n//                           <button\r\n//                             className=\"quantity-btn\"\r\n//                             onClick={() => handleQuantityChange(item._id, (item.quantity || 1) - 1)}\r\n//                             disabled={(item.quantity || 1) <= 1}\r\n//                           >\r\n//                             <span>-</span>\r\n//                           </button>\r\n//                           <span className=\"quantity\">{item.quantity || 1}</span>\r\n//                           <button\r\n//                             className=\"quantity-btn\"\r\n//                             onClick={() => handleQuantityChange(item._id, (item.quantity || 1) + 1)}\r\n//                           >\r\n//                             <span>+</span>\r\n//                           </button>\r\n//                         </div>\r\n//                         <button className=\"remove-btn\" onClick={() => handleRemoveItem(item._id)}>\r\n//                           <Trash2 size={18} />\r\n//                         </button>\r\n//                       </div>\r\n//                     </div>\r\n//                   ))}\r\n//                 </div>\r\n//               )}\r\n//             </div>\r\n\r\n//             {cartItems.length > 0 && (\r\n//               <div className=\"order-summary\">\r\n//                 <div className=\"summary-card\">\r\n//                   <h3 className=\"summary-title\">Order Summary</h3>\r\n\r\n//                   <button\r\n//                     className=\"enhanced-add-address-btn\"\r\n//                     onClick={() => setShowModal(true)}\r\n//                   >\r\n//                     ➕ Add New Address\r\n//                   </button>\r\n\r\n//                   <div className='my_10'>\r\n//                     {addresses.length > 0 ? (\r\n//                       <div className=\"saved-addresses\">\r\n//                         <h4 className=\"section-subtitle\">📍 Saved Addresses</h4>\r\n//                         <ul className=\"address-list\">\r\n//                           {addresses.map((addr, index) => (\r\n//                             <li key={index} className={`address-card ${formData.selectedAddress === addr ? 'selected' : ''}`}>\r\n//                               <label>\r\n//                                 <input\r\n//                                   type=\"radio\"\r\n//                                   name=\"selectedAddress\"\r\n//                                   value={addr}\r\n//                                   checked={formData.selectedAddress === addr}\r\n//                                   onChange={() =>\r\n//                                     setFormData({ ...formData, selectedAddress: addr })\r\n//                                   }\r\n//                                 />\r\n//                                 <span className='text_20'>{addr}</span>\r\n//                               </label>\r\n//                             </li>\r\n//                           ))}\r\n//                         </ul>\r\n//                       </div>\r\n//                     ) : (\r\n//                       <p className=\"no-address-text\">\r\n//                         No address saved yet. Please add one.\r\n//                       </p>\r\n//                     )}\r\n//                   </div>\r\n\r\n//                   <div className=\"summary-details\">\r\n//                     <div className=\"summary-row\">\r\n//                       <span>Subtotal ({cartItems.length} items)</span>\r\n//                       <span>₹{totalPrice.toFixed(2)}</span>\r\n//                     </div>\r\n//                     <div className=\"summary-row\">\r\n//                       <span>Shipping</span>\r\n//                       <span className=\"free-shipping\">FREE</span>\r\n//                     </div>\r\n//                     <div className=\"summary-row\">\r\n//                       <span>Tax</span>\r\n//                       <span>₹0.00</span>\r\n//                     </div>\r\n//                     <div className=\"summary-row discount-row\">\r\n//                       <span>Discount</span>\r\n//                       <span>-₹0.00</span>\r\n//                     </div>\r\n//                   </div>\r\n\r\n//                   <div className=\"summary-divider\"></div>\r\n//                   <div className=\"summary-total\">\r\n//                     <span>Total</span>\r\n//                     <span>₹{totalPrice.toFixed(2)}</span>\r\n//                   </div>\r\n\r\n//                   <button\r\n//                     className=\"checkout-btn\"\r\n//                     onClick={handleCheckout}\r\n//                     disabled={!formData.selectedAddress}\r\n//                   >\r\n//                     Proceed to Checkout\r\n//                     <ArrowLeft size={18} style={{ transform: 'rotate(180deg)' }} />\r\n//                   </button>\r\n\r\n//                   <div className=\"security-badges\">\r\n//                     <div className=\"badge\">🔒 Secure Checkout</div>\r\n//                   </div>\r\n//                 </div>\r\n//               </div>\r\n//             )}\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       <Dialog\r\n//         open={showModal}\r\n//         onClose={() => setShowModal(false)}\r\n//         fullWidth\r\n//         maxWidth=\"sm\"\r\n//       >\r\n//         <DialogTitle sx={{ fontWeight: 'bold' }}>Add New Address</DialogTitle>\r\n//         <DialogContent sx={{ pt: 2, display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n//           <Grid container spacing={2}>\r\n//             <Grid item xs={12} sm={6}>\r\n//               <TextField\r\n//                 label=\"Flat / House\"\r\n//                 fullWidth\r\n//                 variant=\"outlined\"\r\n//                 size=\"small\"\r\n//                 value={formData.flat}\r\n//                 onChange={(e) => setFormData({ ...formData, flat: e.target.value })}\r\n//               />\r\n//             </Grid>\r\n//             <Grid item xs={12} sm={6}>\r\n//               <TextField\r\n//                 label=\"Landmark\"\r\n//                 fullWidth\r\n//                 variant=\"outlined\"\r\n//                 size=\"small\"\r\n//                 value={formData.landmark}\r\n//                 onChange={(e) => setFormData({ ...formData, landmark: e.target.value })}\r\n//               />\r\n//             </Grid>\r\n\r\n//             <Grid item xs={12} sm={6}>\r\n//               <select\r\n//                 name=\"state\"\r\n//                 value={formData.state}\r\n//                 onChange={(e) => setFormData({ ...formData, state: e.target.value, city: '' })}\r\n//                 style={{ width: '100%', padding: '8px', borderRadius: '4px', border: '1px solid #ccc' }}\r\n//               >\r\n//                 <option value=\"\">Select State</option>\r\n//                 {states.map((state) => <option key={state} value={state}>{state}</option>)}\r\n//               </select>\r\n//             </Grid>\r\n\r\n//             <Grid item xs={12} sm={6}>\r\n//               <select\r\n//                 name=\"city\"\r\n//                 value={formData.city}\r\n//                 onChange={(e) => setFormData({ ...formData, city: e.target.value })}\r\n//                 style={{ width: '100%', padding: '8px', borderRadius: '4px', border: '1px solid #ccc' }}\r\n//                 disabled={!formData.state}\r\n//               >\r\n//                 <option value=\"\">Select City</option>\r\n//                 {cities.map((city) => <option key={city} value={city}>{city}</option>)}\r\n//               </select>\r\n//             </Grid>\r\n\r\n//             <Grid item xs={12} sm={6}>\r\n//               <TextField\r\n//                 label=\"Country\"\r\n//                 fullWidth\r\n//                 variant=\"outlined\"\r\n//                 size=\"small\"\r\n//                 value=\"India\"\r\n//                 disabled\r\n//               />\r\n//             </Grid>\r\n\r\n//             <Grid item xs={12} sm={6}>\r\n//               <TextField\r\n//                 label=\"Phone Number\"\r\n//                 fullWidth\r\n//                 variant=\"outlined\"\r\n//                 size=\"small\"\r\n//                 name=\"phone\"\r\n//                 value={formData.phone}\r\n//                 onChange={(e) => {\r\n//                   const value = e.target.value.replace(/\\D/g, ''); // Only digits\r\n//                   if (value.length <= 10) {\r\n//                     setFormData({ ...formData, phone: value });\r\n//                   }\r\n//                 }}\r\n//                 InputProps={{\r\n//                   startAdornment: <InputAdornment position=\"start\">+91</InputAdornment>,\r\n//                 }}\r\n//                 helperText={formData.phone.length > 0 && formData.phone.length !== 10 ? \"Phone number must be 10 digits\" : \"\"}\r\n//                 error={formData.phone.length > 0 && formData.phone.length !== 10}\r\n//               />\r\n//             </Grid>\r\n//           </Grid>\r\n//         </DialogContent>\r\n//         <DialogActions sx={{ px: 3, pb: 2 }}>\r\n//           <Button\r\n//             onClick={handleAddAddress}\r\n//             color=\"primary\"\r\n//             variant=\"contained\"\r\n//             sx={{ fontWeight: 600 }}\r\n//             disabled={loading || !formData.flat || !formData.landmark || !formData.city || !formData.state || formData.phone.length !== 10}\r\n//           >\r\n//             {loading ? 'Adding...' : 'Add Address'}\r\n//           </Button>\r\n//           <Button\r\n//             onClick={() => setShowModal(false)}\r\n//             color=\"secondary\"\r\n//             variant=\"outlined\"\r\n//           >\r\n//             Cancel\r\n//           </Button>\r\n//         </DialogActions>\r\n//       </Dialog>\r\n//     </>\r\n//   );\r\n// };\r\n\r\n// export default AddToCart;"],"mappings":"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AAC;MAC1B,CAAC,CAAC,OAAOyC,GAAG,EAAE;QACZP,OAAO,CAACT,KAAK,CAAC,uBAAuB,EAAEgB,GAAG,CAAC;MAC7C;IACF,CAAC;IACDC,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAAC1D,QAAQ,CAACI,KAAK,CAAC,CAAC;;EAGpB;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAGA;EACA,MAAMuD,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjCT,OAAO,CAACU,GAAG,CAAC,2BAA2B,CAAC;IACxC;IACA,IAAI9D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;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA,IAAAqN,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}