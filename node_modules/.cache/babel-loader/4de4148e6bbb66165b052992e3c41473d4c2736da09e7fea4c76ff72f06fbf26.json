{"ast":null,"code":"var _jsxFileName = \"/Users/himanshu/Desktop/Dr BSK/Dr bsk/src/Pages/pharma-admin/component/AddNewProduct.js\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useState, useRef } from 'react'\n// import axiosInstance from '../../../components/AxiosInstance';\n// import { toast } from 'react-toastify';\n// import { useParams, useNavigate } from 'react-router-dom';\n\n// const AddNewProduct = () => {\n//     const { id } = useParams();\n//     const isEditMode = !!id;\n//     const navigate = useNavigate();\n\n//     const [categoryList, setCategoryList] = useState([]);\n//     const [subCategoryList, setSubCategoryList] = useState([]);\n//     const [formData, setFormData] = useState({\n//         name: \"\",\n//         description: \"\",\n//         media: [],\n//         retail_price: \"\",\n//         consumer_price: \"\",\n//         discount: \"\",\n//         mrp: \"\",\n//         gst: \"\",\n//         stock: \"yes\",\n//         quantity: [],\n//         category: \"\",\n//         productvariety: \"\",\n//         sub_category: \"\",\n//         expires_on: \"\",\n//         suitable_for: \"\",\n//         benefits: \"\",\n//         dosage: \"\",\n//         side_effects: \"\",\n//         prescription: \"required\",\n//         created_at: new Date().toISOString(),\n//         deleted_at: null\n//     });\n\n//     const [errors, setErrors] = useState({});\n//     const [isSubmitted, setIsSubmitted] = useState(false);\n//     const fileInputRef = useRef(null);\n\n//     useEffect(() => {\n//         const init = async () => {\n//             try {\n//                 const categoriesResponse = await axiosInstance.get('/user/allcategories');\n//                 setCategoryList(categoriesResponse.data);\n\n//                 if (isEditMode) {\n//                     const productResponse = await axiosInstance.get(`/user/product/${id}`);\n//                     const product = productResponse.data;\n//                     // console.log('lksdjf;sdkjfl;skjfl;sjdf;', productResponse.data)\n\n//                     // Fetch subcategories for selected category\n//                     if (product.category) {\n//                         const subCategoryResponse = await axiosInstance.get(\n//                             `/user/allSubcategories?category=${encodeURIComponent(product.category)}`\n//                         );\n//                         setSubCategoryList(subCategoryResponse.data);\n//                     }\n\n//                     setFormData({\n//                         ...product,\n//                         expires_on: product.expires_on?.split('T')[0],\n//                         media: product.media.map(m => ({\n//                             ...m,\n//                             url: m.url.startsWith('http') ? m.url : `${m.url}`,\n//                             type: m.type.includes('video') ? 'video' : 'image',\n//                             file: null\n//                         })),\n//                         quantity: Array.isArray(product.quantity)\n//                             ? product.quantity\n//                             : (typeof product.quantity === 'string' && product.quantity.length > 0\n//                                 ? [product.quantity]\n//                                 : []),\n//                         stock: (() => {\n//                             const s = (product.stock ?? '').toLowerCase().trim();\n//                             console.log(\"Stock value:\", s);\n//                             return s === 'yes' ? 'yes'\n//                                 : s === 'no' ? 'no'\n//                                     : 'yes';\n//                         })(),\n\n//                     });\n\n//                 }\n//             } catch (error) {\n//                 console.error(\"Error during initialization:\", error);\n//             }\n//         };\n\n//         init();\n//     }, [id]);\n\n//     const handleChange = (e) => {\n//         const { name, value } = e.target;\n//         setFormData(prev => {\n//             const updatedData = { ...prev, [name]: value };\n\n//             // Parse numeric values safely\n//             const mrp = parseFloat(updatedData.mrp);\n//             const discount = parseFloat(updatedData.discount);\n//             const gst = parseFloat(updatedData.gst);\n\n//             // Calculate base discounted price\n//             let discountedPrice = 0;\n//             if (!isNaN(mrp) && !isNaN(discount)) {\n//                 discountedPrice = mrp - (mrp * (discount / 100));\n//             }\n\n//             // Calculate consumer_price based on GST presence\n//             if (!isNaN(gst) && gst > 0) {\n//                 // Add GST on top of discounted price\n//                 const finalPrice = discountedPrice + (discountedPrice * (gst / 100));\n//                 updatedData.consumer_price = finalPrice.toFixed(2);\n//             } else {\n//                 // No GST, consumer_price is just discounted price\n//                 if (discountedPrice > 0) {\n//                     updatedData.consumer_price = discountedPrice.toFixed(2);\n//                 } else {\n//                     updatedData.consumer_price = \"\";\n//                 }\n//             }\n\n//             // Reset sub_category if category changes\n//             if (name === \"category\") {\n//                 updatedData.sub_category = \"\";\n//                 fetchSubCategories(value);\n//             }\n\n//             return updatedData;\n//         });\n//     };\n\n//     const handleMediaChange = (e) => {\n//         const files = Array.from(e.target.files);\n//         if (files.length === 0) return;\n\n//         const mediaPromises = files.map(file => {\n//             return new Promise((resolve) => {\n//                 const reader = new FileReader();\n//                 reader.onloadend = () => {\n//                     resolve({\n//                         url: reader.result,\n//                         type: file.type.startsWith('video') ? 'video' : 'image',\n//                         name: file.name,\n//                         size: file.size,\n//                         file: file\n//                     });\n//                 };\n//                 reader.readAsDataURL(file);\n//             });\n//         });\n\n//         Promise.all(mediaPromises).then(newMedia => {\n//             setFormData(prev => ({\n//                 ...prev,\n//                 media: [...prev.media, ...newMedia]\n//             }));\n//         });\n//     };\n\n//     const removeMedia = (index) => {\n//         setFormData(prev => {\n//             const updatedMedia = [...prev.media];\n//             updatedMedia.splice(index, 1);\n//             return {\n//                 ...prev,\n//                 media: updatedMedia\n//             };\n//         });\n//     };\n\n//     const triggerFileInput = () => {\n//         fileInputRef.current.value = null;\n//         fileInputRef.current.click();\n//     };\n\n//     const validateForm = () => {\n//         const newErrors = {};\n//         const requiredFields = [\n//             'name', 'description', 'retail_price', 'consumer_price',\n//             'quantity', 'category', 'expires_on', 'dosage', 'productvariety'\n//         ];\n\n//         requiredFields.forEach(field => {\n//             if (!formData[field]) {\n//                 newErrors[field] = `${field.replace('_', ' ')} is required`;\n//             }\n//         });\n\n//         // if (formData.expires_on && new Date(formData.expires_on) < new Date()) {\n//         //     newErrors.expires_on = \"Expiry date must be in the future\";\n//         // }\n\n//         setErrors(newErrors);\n//         return Object.keys(newErrors).length === 0;\n//     };\n\n//     const handleSubmit = async (e) => {\n//         e.preventDefault();\n//         if (!validateForm()) return;\n\n//         try {\n//             const formPayload = new FormData();\n\n//             // Append all fields (excluding media for now)\n//             Object.entries(formData).forEach(([key, value]) => {\n//                 if (key === 'media') return;\n//                 if (value !== null && value !== undefined) {\n//                     formPayload.append(key, value);\n//                 }\n//             });\n\n//             // Append media files (only new uploads with .file property)\n//             formData.media.forEach((item) => {\n//                 if (item?.file) {\n//                     formPayload.append('media', item.file);\n//                 } else {\n//                     // Optionally append existing media URLs if needed\n//                     formPayload.append('existingMedia', item.url);\n//                 }\n//             });\n\n//             let res;\n//             if (isEditMode) {\n//                 res = await axiosInstance.put(\n//                     `/user/updateProduct/${id}`,\n//                     formPayload,\n//                     {\n//                         headers: {\n//                             'Content-Type': 'multipart/form-data',\n//                         },\n//                     }\n//                 );\n//                 toast.success('Product updated successfully!');\n//             } else {\n//                 res = await axiosInstance.post(\n//                     '/user/createProduct',\n//                     formPayload,\n//                     {\n//                         headers: {\n//                             'Content-Type': 'multipart/form-data',\n//                         },\n//                     }\n//                 );\n//                 toast.success('Product added successfully!');\n//             }\n\n//             navigate('/pharma-admin/products');\n//         } catch (error) {\n//             console.error('Submit Error:', error);\n//             toast.error('Something went wrong. Please try again.', error);\n//         }\n//     };\n\n//     const handleReset = () => {\n//         setFormData({\n//             name: \"\",\n//             description: \"\",\n//             media: [],\n//             retail_price: \"\",\n//             consumer_price: \"\",\n//             discount: \"\",\n//             mrp: \"\",\n//             stock: \"\",\n//             gst: \"\",\n//             quantity: [],\n//             category: \"\",\n//             sub_category: \"\",\n//             productvariety: \"\",\n//             expires_on: \"\",\n//             suitable_for: \"\",\n//             benefits: \"\",\n//             dosage: \"\",\n//             side_effects: \"\",\n//             prescription: \"\",\n//             created_at: new Date().toISOString(),\n//             deleted_at: null\n//         });\n//         setErrors({});\n//         setIsSubmitted(false);\n//     };\n\n//     const formatFileSize = (bytes) => {\n//         if (bytes < 1024) return bytes + ' bytes';\n//         else if (bytes < 1048576) return (bytes / 1024).toFixed(2) + ' KB';\n//         else return (bytes / 1048576).toFixed(2) + ' MB';\n//     };\n\n//     const fetchSubCategories = async (category) => {\n//         try {\n//             const response = await axiosInstance.get(`/user/allSubcategories?category=${encodeURIComponent(category)}`);\n//             console.log(\"Fetched subCategories:\", response.data);\n//             setSubCategoryList(response.data);\n//         } catch (error) {\n//             console.error(\"Error fetching subcategories:\", error);\n//         }\n//     };\n\n//     const fetchData = async () => {\n//         try {\n//             const response = await axiosInstance.get('/user/allcategories');\n//             console.log(\"Fetched categories:\", response.data);\n//             setCategoryList(response.data);\n//         } catch (error) {\n//             console.error(\"Error fetching categories:\", error);\n//         }\n//     };\n\n//     // Handle change for a particular quantity input\n//     const handleQuantityChange = (index, value) => {\n//         setFormData(prev => {\n//             const newQuantities = [...prev.quantity];\n//             newQuantities[index] = value;\n//             return { ...prev, quantity: newQuantities };\n//         });\n//     };\n\n//     // Add another empty quantity input field\n//     const addQuantityField = () => {\n//         setFormData(prev => ({\n//             ...prev,\n//             quantity: [...prev.quantity, \"\"]\n//         }));\n//     };\n\n//     // Remove quantity input at given index\n//     const removeQuantityField = (index) => {\n//         setFormData(prev => {\n//             const newQuantities = [...prev.quantity];\n//             newQuantities.splice(index, 1);\n//             return { ...prev, quantity: newQuantities };\n//         });\n//     };\n\n//     return (\n//         <div>\n//             <div className=\"herbal-form-container\">\n//                 <div className=\"herbal-form-header\">\n//                     <h2>{isEditMode ? \"Edit Product\" : \"Add New Product\"}</h2>\n//                     <button type=\"button\" className=\"herbal-cancel-btn\" onClick={() => navigate(\"/pharma-admin/products\")}>\n//                         Cancel\n//                     </button>\n//                 </div>\n\n//                 {isSubmitted ? (\n//                     <div className=\"herbal-success-message\">\n//                         <p>Product submitted successfully!</p>\n//                         <button onClick={handleReset}>Add Another Product</button>\n//                     </div>\n//                 ) : (\n//                     <form onSubmit={handleSubmit} className=\"herbal-product-form\">\n//                         {/* Basic Information */}\n//                         <div className=\"herbal-form-section\">\n//                             <h3>Basic Information</h3>\n//                             <div className=\"herbal-form-row\">\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Product Name*</label>\n//                                     <input\n//                                         type=\"text\"\n//                                         name=\"name\"\n//                                         value={formData.name}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter product name\"\n//                                     />\n//                                     {errors.name && <span className=\"herbal-error\">{errors.name}</span>}\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Product Media (Images/Videos)*</label>\n//                                     <div className=\"media-upload-container\">\n//                                         <input\n//                                             type=\"file\"\n//                                             ref={fileInputRef}\n//                                             onChange={handleMediaChange}\n//                                             accept=\"image/*,video/*\"\n//                                             multiple\n//                                             style={{ display: 'none' }}\n//                                         />\n//                                         <button\n//                                             type=\"button\"\n//                                             className=\"media-upload-btn\"\n//                                             onClick={triggerFileInput}\n//                                         >\n//                                             Add Media\n//                                         </button>\n//                                         <p className=\"media-upload-hint\">Supports JPG, PNG, GIF, MP4 (Max 10MB each)</p>\n//                                         <div className=\"media-preview-container\">\n//                                             {formData.media.length === 0 ? (\n//                                                 <div className=\"no-media-placeholder\">\n//                                                     No media selected\n//                                                 </div>\n//                                             ) : (\n//                                                 formData.media.map((media, index) => (\n//                                                     <div key={index} className=\"media-preview-item\">\n//                                                         {media.type === 'video' ? (\n//                                                             <video controls>\n//                                                                 <source src={media.url} type={`video/${media.file.name.split('.').pop()}`} />\n//                                                                 Your browser does not support the video tag.\n//                                                             </video>\n//                                                         ) : (\n//                                                             <img src={media.url} alt={`Preview ${index}`} />\n//                                                         )}\n//                                                         <button\n//                                                             type=\"button\"\n//                                                             className=\"remove-media-btn\"\n//                                                             onClick={() => removeMedia(index)}\n//                                                             aria-label=\"Remove media\"\n//                                                         >\n//                                                             ×\n//                                                         </button>\n//                                                         <div className=\"media-info\">\n//                                                             <span className=\"media-name\">{media.name}</span>\n//                                                             <span className=\"media-size\">{formatFileSize(media.size)}</span>\n//                                                         </div>\n//                                                     </div>\n//                                                 ))\n//                                             )}\n//                                         </div>\n//                                     </div>\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label >Prescription</label>\n//                                     <select name=\"prescription\" value={formData.prescription} onChange={handleChange} >\n//                                         {/* <option value=\"\">Select Prescription</option> */}\n//                                         <option value=\"required\">Required</option>\n//                                         <option value=\"Notrequired\">Not Required</option>\n//                                     </select>\n//                                 </div>\n//                             </div>\n\n//                             <div className=\"herbal-form-group\">\n//                                 <label>Description*</label>\n//                                 <textarea\n//                                     name=\"description\"\n//                                     value={formData.description}\n//                                     onChange={handleChange}\n//                                     placeholder=\"Enter product description\"\n//                                     rows=\"3\"\n//                                 />\n//                                 {errors.description && <span className=\"herbal-error\">{errors.description}</span>}\n//                             </div>\n//                         </div>\n\n//                         {/* Pricing Information */}\n//                         <div className=\"herbal-form-section\">\n//                             <h3>Pricing Information</h3>\n//                             <div className=\"herbal-form-row\">\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>MRP</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"mrp\"\n//                                         value={formData.mrp}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter maximum retail price\"\n//                                         min=\"0\"\n//                                         step=\"0.01\"\n//                                     />\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Discount (%)</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"discount\"\n//                                         value={formData.discount}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter discount percentage\"\n//                                         min=\"0\"\n//                                         max=\"100\"\n//                                     />\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Discounted Price</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"consumer_price\"\n//                                         value={formData.consumer_price}\n//                                         readOnly\n//                                         placeholder=\"Calculated consumer price\"\n//                                         min=\"0\"\n//                                         step=\"0.01\"\n//                                     />\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>GST</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"gst\"\n//                                         value={formData.gst}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter GST %\"\n//                                         min=\"0\"\n//                                         step=\"0.01\"\n//                                     />\n\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Final Consumer Price</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"consumer_price\"\n//                                         value={formData.consumer_price}\n//                                         readOnly\n//                                         placeholder=\"Calculated consumer price\"\n//                                         min=\"0\"\n//                                         step=\"0.01\"\n//                                     />\n//                                 </div>\n\n//                             </div>\n\n//                             <div className=\"herbal-form-row\">\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>WholesalePartner Price (MRP)*</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"retail_price\"\n//                                         value={formData.retail_price}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter retail price\"\n//                                         min=\"0\"\n//                                         step=\"0.01\"\n//                                     />\n//                                     {errors.retail_price && <span className=\"herbal-error\">{errors.retail_price}</span>}\n//                                 </div>\n\n//                                 {/* <div className=\"herbal-form-group\">\n//                                     <label>Quantity*</label>\n//                                     <input\n//                                         type=\"text\"\n//                                         name=\"quantity\"\n//                                         value={formData.quantity}\n//                                         onChange={handleChange}\n//                                         placeholder=\"e.g., 100ml, 50g\"\n//                                     />\n//                                     {errors.quantity && <span className=\"herbal-error\">{errors.quantity}</span>}\n//                                 </div> */}\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Quantities*</label>\n//                                     {formData.quantity?.length === 0 && (\n//                                         <p>No quantities added yet. Click 'Add Quantity' to start.</p>\n//                                     )}\n//                                     {formData.quantity?.map((qty, index) => (\n//                                         <div key={index} style={{ display: 'flex', alignItems: 'center', marginBottom: '8px' }}>\n//                                             <input\n//                                                 type=\"text\"\n//                                                 value={qty}\n//                                                 onChange={(e) => handleQuantityChange(index, e.target.value)}\n//                                                 placeholder=\"Enter quantity\"\n//                                                 style={{ flexGrow: 1 }}\n//                                             />\n//                                             <button\n//                                                 type=\"button\"\n//                                                 onClick={() => removeQuantityField(index)}\n//                                                 aria-label=\"Remove quantity\"\n//                                                 style={{\n//                                                     marginLeft: '8px',\n//                                                     backgroundColor: '#f44336',\n//                                                     color: '#fff',\n//                                                     border: 'none',\n//                                                     padding: '0 8px',\n//                                                     cursor: 'pointer',\n//                                                     borderRadius: '4px',\n//                                                     height: '32px'\n//                                                 }}\n//                                             >\n//                                                 ×\n//                                             </button>\n//                                         </div>\n//                                     ))}\n\n//                                     <button\n//                                         type=\"button\"\n//                                         onClick={addQuantityField}\n//                                         style={{\n//                                             marginTop: '8px',\n//                                             backgroundColor: '#4CAF50',\n//                                             color: 'white',\n//                                             border: 'none',\n//                                             padding: '8px 12px',\n//                                             cursor: 'pointer',\n//                                             borderRadius: '4px'\n//                                         }}\n//                                     >\n//                                         Add Quantity\n//                                     </button>\n\n//                                     {errors.quantity && <span className=\"herbal-error\">{errors.quantity}</span>}\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Use By* (Expiry Date)</label>\n//                                     <input\n//                                         // type=\"date\"\n//                                         type=\"text\"\n//                                         name=\"expires_on\"\n//                                         value={formData.expires_on}\n//                                         onChange={handleChange}\n//                                     // min={new Date().toISOString().split('T')[0]}\n//                                     />\n//                                     {errors.expires_on && <span className=\"herbal-error\">{errors.expires_on}</span>}\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label >Stock *</label>\n//                                     <select name=\"stock\" required value={formData.stock} onChange={handleChange} >\n//                                         <option value=\"yes\">Yes</option>\n//                                         <option value=\"no\">No</option>\n//                                     </select>\n//                                 </div>\n//                             </div>\n//                         </div>\n\n//                         {/* Category Information */}\n//                         <div className=\"herbal-form-section\">\n//                             <h3>Category Information</h3>\n//                             <div className=\"herbal-form-row\">\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Variety*</label>\n//                                     <select\n//                                         name=\"productvariety\"\n//                                         value={formData.productvariety}\n//                                         onChange={(e) => {\n//                                             const selectedVariety = e.target.value;\n//                                             setFormData(prev => ({\n//                                                 ...prev,\n//                                                 productvariety: selectedVariety,\n//                                                 category: \"\",\n//                                                 sub_category: \"\"\n//                                             }));\n//                                         }}\n//                                         className='selectCss'\n//                                     >\n//                                         <option value=\"\">Select Variety</option>\n//                                         <option value=\"Human\">Human</option>\n//                                         <option value=\"Veterinary\">Veterinary</option>\n//                                     </select>\n//                                     {errors.variety && <span className=\"herbal-error\">{errors.variety}</span>}\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Category*</label>\n//                                     <select\n//                                         name=\"category\"\n//                                         value={formData.category}\n//                                         onChange={handleChange}\n//                                         required\n//                                     >\n//                                         <option value=\"\">Select Category</option>\n//                                         {categoryList\n//                                             .filter(cat => cat.variety === formData.productvariety\n//                                             )\n//                                             .map((sub, index) => (\n//                                                 <option key={index} value={sub.name}>{sub.name}</option>\n//                                             ))}\n//                                     </select>\n//                                     {errors.category && <span className=\"herbal-error\">{errors.category}</span>}\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Sub Category</label>\n//                                     <select\n//                                         name=\"sub_category\"\n//                                         value={formData.sub_category}\n//                                         onChange={handleChange}\n//                                         required\n//                                     >\n//                                         <option value=\"\">Select subcategory</option>\n//                                         {subCategoryList.map((sub, index) => (\n//                                             <option key={index} value={sub.name}>{sub.name}</option>\n//                                         ))}\n//                                     </select>\n\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Suitable For</label>\n//                                     <input\n//                                         type=\"text\"\n//                                         name=\"suitable_for\"\n//                                         value={formData.suitable_for}\n//                                         onChange={handleChange}\n//                                         placeholder=\"e.g., Adults, Children, All ages\"\n//                                     />\n//                                 </div>\n//                             </div>\n//                         </div>\n\n//                         {/* Product Details */}\n//                         <div className=\"herbal-form-section\">\n//                             <h3>Product Details</h3>\n//                             <div className=\"herbal-form-row\">\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Benefits (comma separated)</label>\n//                                     <textarea\n//                                         name=\"benefits\"\n//                                         value={formData.benefits}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter benefits separated by commas\"\n//                                         rows=\"3\"\n//                                     />\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Dosage/Usage Instructions*</label>\n//                                     <textarea\n//                                         name=\"dosage\"\n//                                         value={formData.dosage}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter dosage instructions\"\n//                                         rows=\"3\"\n//                                     />\n//                                     {errors.dosage && <span className=\"herbal-error\">{errors.dosage}</span>}\n//                                 </div>\n//                             </div>\n\n//                             <div className=\"herbal-form-group\">\n//                                 <label>Side Effects</label>\n//                                 <textarea\n//                                     name=\"side_effects\"\n//                                     value={formData.side_effects}\n//                                     onChange={handleChange}\n//                                     placeholder=\"Enter any known side effects\"\n//                                     rows=\"2\"\n//                                 />\n//                             </div>\n//                         </div>\n\n//                         <div className=\"herbal-form-actions\">\n//                             <button type=\"button\" onClick={handleReset} className=\"herbal-reset-btn\">\n//                                 Reset\n//                             </button>\n//                             {/* <p>{isEditMode ? \"Edit Product\" : \"Add New Product\"}</p> */}\n\n//                             <button type=\"submit\" className=\"herbal-submit-btn\">\n//                                 {isEditMode ? \"Update Product\" : \"Submit Product\"}\n//                             </button>\n\n//                         </div>\n//                     </form>\n//                 )}\n//             </div>\n//         </div>\n//     )\n// }\n\n// export default AddNewProduct\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport axiosInstance from '../../../components/AxiosInstance';\nimport { toast } from 'react-toastify';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport JoinUrl from '../../../JoinUrl';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddNewProduct = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const isEditMode = !!id;\n  const navigate = useNavigate();\n  const [categoryList, setCategoryList] = useState([]);\n  const [subCategoryList, setSubCategoryList] = useState([]);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    description: \"\",\n    media: [],\n    retail_price: \"\",\n    consumer_price: \"\",\n    // kept for legacy — not used for variants\n    discount: \"\",\n    mrp: \"\",\n    gst: \"\",\n    stock: \"yes\",\n    quantity: [],\n    // legacy list of labels\n    category: \"\",\n    productvariety: \"\",\n    sub_category: \"\",\n    expires_on: \"\",\n    suitable_for: \"\",\n    benefits: \"\",\n    dosage: \"\",\n    side_effects: \"\",\n    prescription: \"required\",\n    created_at: new Date().toISOString(),\n    deleted_at: null\n  });\n  const [errors, setErrors] = useState({});\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const fileInputRef = useRef(null);\n  useEffect(() => {\n    const init = async () => {\n      try {\n        const categoriesResponse = await axiosInstance.get('/user/allcategories');\n        setCategoryList(categoriesResponse.data);\n        if (isEditMode) {\n          const productResponse = await axiosInstance.get(`/user/product/${id}`);\n          const product = productResponse.data;\n\n          // fetch subcategories\n          if (product.category) {\n            const subCategoryResponse = await axiosInstance.get(`/user/allSubcategories?category=${encodeURIComponent(product.category)}`);\n            setSubCategoryList(subCategoryResponse.data);\n          }\n\n          // normalize quantity rows\n          const normalizeRow = r => {\n            var _r$label, _r$mrp, _r$discount, _r$gst, _r$retail_price, _r$final_price, _r$in_stock;\n            return {\n              label: (_r$label = r === null || r === void 0 ? void 0 : r.label) !== null && _r$label !== void 0 ? _r$label : typeof r === 'string' ? r : '',\n              mrp: (_r$mrp = r === null || r === void 0 ? void 0 : r.mrp) !== null && _r$mrp !== void 0 ? _r$mrp : \"\",\n              discount: (_r$discount = r === null || r === void 0 ? void 0 : r.discount) !== null && _r$discount !== void 0 ? _r$discount : \"\",\n              gst: (_r$gst = r === null || r === void 0 ? void 0 : r.gst) !== null && _r$gst !== void 0 ? _r$gst : \"\",\n              retail_price: (_r$retail_price = r === null || r === void 0 ? void 0 : r.retail_price) !== null && _r$retail_price !== void 0 ? _r$retail_price : \"\",\n              final_price: (_r$final_price = r === null || r === void 0 ? void 0 : r.final_price) !== null && _r$final_price !== void 0 ? _r$final_price : \"\",\n              in_stock: ((_r$in_stock = r === null || r === void 0 ? void 0 : r.in_stock) !== null && _r$in_stock !== void 0 ? _r$in_stock : 'yes').toLowerCase() === 'no' ? 'no' : 'yes'\n            };\n          };\n          let quantityRows = [];\n          if (Array.isArray(product.quantity) && product.quantity.length > 0) {\n            quantityRows = product.quantity.map(normalizeRow);\n          } else if (Array.isArray(product.variants) && product.variants.length > 0) {\n            quantityRows = product.variants.map(normalizeRow);\n          }\n          setFormData(prev => {\n            var _ref, _product$expires_on$s, _product$expires_on, _product$expires_on$s2, _product$expires_on$s3;\n            return {\n              ...prev,\n              ...product,\n              expires_on: (_ref = (_product$expires_on$s = (_product$expires_on = product.expires_on) === null || _product$expires_on === void 0 ? void 0 : (_product$expires_on$s2 = _product$expires_on.split) === null || _product$expires_on$s2 === void 0 ? void 0 : (_product$expires_on$s3 = _product$expires_on$s2.call(_product$expires_on, 'T')) === null || _product$expires_on$s3 === void 0 ? void 0 : _product$expires_on$s3[0]) !== null && _product$expires_on$s !== void 0 ? _product$expires_on$s : product.expires_on) !== null && _ref !== void 0 ? _ref : \"\",\n              media: (product.media || []).map(m => {\n                var _m$url, _m$url$startsWith, _m$type, _m$type$includes;\n                return {\n                  ...m,\n                  url: (_m$url = m.url) !== null && _m$url !== void 0 && (_m$url$startsWith = _m$url.startsWith) !== null && _m$url$startsWith !== void 0 && _m$url$startsWith.call(_m$url, 'http') ? m.url : `${m.url}`,\n                  type: (_m$type = m.type) !== null && _m$type !== void 0 && (_m$type$includes = _m$type.includes) !== null && _m$type$includes !== void 0 && _m$type$includes.call(_m$type, 'video') ? 'video' : 'image',\n                  file: null\n                };\n              }),\n              stock: (_product$stock => {\n                const s = ((_product$stock = product.stock) !== null && _product$stock !== void 0 ? _product$stock : '').toLowerCase().trim();\n                return s === 'yes' ? 'yes' : s === 'no' ? 'no' : 'yes';\n              })(),\n              quantity: quantityRows\n            };\n          });\n        }\n      } catch (error) {\n        console.error(\"Error during initialization:\", error);\n      }\n    };\n    init();\n  }, [id]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => {\n      const updated = {\n        ...prev,\n        [name]: value\n      };\n\n      // legacy single-price auto-calc\n      const mrp = parseFloat(updated.mrp);\n      const discount = parseFloat(updated.discount);\n      const gst = parseFloat(updated.gst);\n      let discountedPrice = 0;\n      if (!isNaN(mrp) && !isNaN(discount)) discountedPrice = mrp - mrp * (discount / 100);\n      if (!isNaN(gst) && gst > 0) {\n        const finalPrice = discountedPrice + discountedPrice * (gst / 100);\n        updated.consumer_price = isFinite(finalPrice) && finalPrice > 0 ? finalPrice.toFixed(2) : \"\";\n      } else {\n        updated.consumer_price = discountedPrice > 0 ? discountedPrice.toFixed(2) : \"\";\n      }\n      if (name === \"category\") {\n        updated.sub_category = \"\";\n        fetchSubCategories(value);\n      }\n      return updated;\n    });\n  };\n  const addQuantityRow = () => {\n    setFormData(prev => ({\n      ...prev,\n      quantity: [...prev.quantity, {\n        label: \"\",\n        mrp: \"\",\n        discount: \"\",\n        gst: \"\",\n        retail_price: \"\",\n        final_price: \"\",\n        in_stock: \"yes\"\n      }]\n    }));\n  };\n  const removeQuantityRow = index => {\n    setFormData(prev => {\n      const q = [...prev.quantity];\n      q.splice(index, 1);\n      return {\n        ...prev,\n        quantity: q\n      };\n    });\n  };\n  const handleQuantityRowChange = (index, field, value) => {\n    setFormData(prev => {\n      const q = [...prev.quantity];\n      q[index] = {\n        ...q[index],\n        [field]: value\n      };\n\n      // auto compute final_price when mrp/discount/gst changes\n      const mrp = parseFloat(q[index].mrp);\n      const discount = parseFloat(q[index].discount);\n      const gst = parseFloat(q[index].gst);\n      if (!isNaN(mrp)) {\n        const discounted = !isNaN(discount) ? mrp * (1 - discount / 100) : mrp;\n        const final = !isNaN(gst) ? discounted * (1 + gst / 100) : discounted;\n        q[index].final_price = isFinite(final) && final > 0 ? final.toFixed(2) : \"\";\n      } else {\n        q[index].final_price = \"\";\n      }\n      return {\n        ...prev,\n        quantity: q\n      };\n    });\n  };\n  const handleMediaChange = e => {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n    const mediaPromises = files.map(file => {\n      return new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          resolve({\n            url: reader.result,\n            type: file.type.startsWith('video') ? 'video' : 'image',\n            name: file.name,\n            size: file.size,\n            file: file\n          });\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    Promise.all(mediaPromises).then(newMedia => {\n      setFormData(prev => ({\n        ...prev,\n        media: [...prev.media, ...newMedia]\n      }));\n    });\n  };\n  const removeMedia = index => {\n    setFormData(prev => {\n      const updatedMedia = [...prev.media];\n      updatedMedia.splice(index, 1);\n      return {\n        ...prev,\n        media: updatedMedia\n      };\n    });\n  };\n  const triggerFileInput = () => {\n    fileInputRef.current.value = null;\n    fileInputRef.current.click();\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    const requiredFields = ['name', 'description', 'category', 'expires_on', 'dosage', 'productvariety'];\n    requiredFields.forEach(field => {\n      if (!formData[field]) newErrors[field] = `${field.replace('_', ' ')} is required`;\n    });\n\n    // Validate at least one quantity row exists\n    if (formData.quantity.length === 0) {\n      newErrors.quantity = \"At least one quantity/variant is required\";\n    } else {\n      // Validate each quantity row\n      formData.quantity.forEach((q, i) => {\n        if (!q.label) newErrors[`quantity.${i}.label`] = \"Quantity label is required\";\n        if (!q.mrp || isNaN(parseFloat(q.mrp))) newErrors[`quantity.${i}.mrp`] = \"Valid MRP is required\";\n      });\n    }\n\n    // Validate media\n    if (formData.media.length === 0) {\n      newErrors.media = \"At least one media file is required\";\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsSubmitted(true);\n    if (!validateForm()) {\n      toast.error(\"Please fix the errors in the form\");\n      return;\n    }\n    try {\n      const formPayload = new FormData();\n\n      // Append all form data except media and quantity\n      Object.entries(formData).forEach(([key, value]) => {\n        if (key === 'media' || key === 'quantity') return;\n        if (value !== null && value !== undefined) {\n          formPayload.append(key, value);\n        }\n      });\n\n      // Append quantity as JSON string\n      formPayload.append('quantity', JSON.stringify(formData.quantity));\n\n      // Handle media files\n      formData.media.forEach(mediaItem => {\n        if (mediaItem.file) {\n          formPayload.append('media', mediaItem.file);\n        } else if (mediaItem.url) {\n          formPayload.append('existingMedia', mediaItem.url);\n        }\n      });\n      let response;\n      if (isEditMode) {\n        response = await axiosInstance.put(`/user/updateProduct/${id}`, formPayload, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        toast.success('Product updated successfully!');\n      } else {\n        response = await axiosInstance.post('/user/createProduct', formPayload, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        toast.success('Product created successfully!');\n      }\n      navigate('/pharma-admin/products');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error submitting form:', error);\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Failed to submit product');\n    }\n  };\n  const handleReset = () => {\n    setFormData({\n      name: \"\",\n      description: \"\",\n      media: [],\n      retail_price: \"\",\n      consumer_price: \"\",\n      discount: \"\",\n      mrp: \"\",\n      stock: \"yes\",\n      gst: \"\",\n      quantity: [],\n      category: \"\",\n      sub_category: \"\",\n      productvariety: \"\",\n      expires_on: \"\",\n      suitable_for: \"\",\n      benefits: \"\",\n      dosage: \"\",\n      side_effects: \"\",\n      prescription: \"required\",\n      created_at: new Date().toISOString(),\n      deleted_at: null\n    });\n    setErrors({});\n    setIsSubmitted(false);\n  };\n  const formatFileSize = bytes => {\n    if (bytes < 1024) return bytes + ' bytes';else if (bytes < 1048576) return (bytes / 1024).toFixed(2) + ' KB';else return (bytes / 1048576).toFixed(2) + ' MB';\n  };\n  const fetchSubCategories = async category => {\n    try {\n      const response = await axiosInstance.get(`/user/allSubcategories?category=${encodeURIComponent(category)}`);\n      setSubCategoryList(response.data);\n    } catch (error) {\n      console.error(\"Error fetching subcategories:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"herbal-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"herbal-form-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: isEditMode ? \"Edit Product\" : \"Add New Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"herbal-cancel-btn\",\n          onClick: () => navigate(\"/pharma-admin/products\"),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1110,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"herbal-product-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"herbal-form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Basic Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"herbal-form-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Product Name*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1121,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"name\",\n                value: formData.name,\n                onChange: handleChange,\n                placeholder: \"Enter product name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1122,\n                columnNumber: 33\n              }, this), errors.name && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"herbal-error\",\n                children: errors.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1129,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1120,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Product Media (Images/Videos)*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1133,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"media-upload-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  ref: fileInputRef,\n                  onChange: handleMediaChange,\n                  accept: \"image/*,video/*\",\n                  multiple: true,\n                  style: {\n                    display: 'none'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1135,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"media-upload-btn\",\n                  onClick: triggerFileInput,\n                  children: \"Add Media\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1143,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"media-upload-hint\",\n                  children: \"Supports JPG, PNG, GIF, MP4 (Max 10MB each)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1146,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"media-preview-container\",\n                  children: formData.media.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"no-media-placeholder\",\n                    children: \"No media selected\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1149,\n                    columnNumber: 45\n                  }, this) : formData.media.map((media, index) => {\n                    var _media$file, _media$file$name;\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"media-preview-item\",\n                      children: [media.type === 'video' ? /*#__PURE__*/_jsxDEV(\"video\", {\n                        controls: true,\n                        children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                          src: media.url,\n                          type: `video/${((_media$file = media.file) === null || _media$file === void 0 ? void 0 : (_media$file$name = _media$file.name) === null || _media$file$name === void 0 ? void 0 : _media$file$name.split('.').pop()) || 'mp4'}`\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1155,\n                          columnNumber: 61\n                        }, this), \"Your browser does not support the video tag.\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1154,\n                        columnNumber: 57\n                      }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: JoinUrl(media.url),\n                        alt: `Preview ${index}`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1159,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"remove-media-btn\",\n                        onClick: () => removeMedia(index),\n                        \"aria-label\": \"Remove media\",\n                        children: \"\\xD7\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1161,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"media-info\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"media-name\",\n                          children: media.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1170,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"media-size\",\n                          children: formatFileSize(media.size || 0)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1171,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1169,\n                        columnNumber: 53\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1152,\n                      columnNumber: 49\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1147,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1134,\n                columnNumber: 33\n              }, this), errors.media && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"herbal-error\",\n                children: errors.media\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1178,\n                columnNumber: 50\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1132,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Prescription\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1182,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"prescription\",\n                value: formData.prescription,\n                onChange: handleChange,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"required\",\n                  children: \"Required\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1184,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Notrequired\",\n                  children: \"Not Required\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1185,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1183,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1181,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"herbal-form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Description*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1191,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"description\",\n              value: formData.description,\n              onChange: handleChange,\n              placeholder: \"Enter product description\",\n              rows: \"3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1192,\n              columnNumber: 29\n            }, this), errors.description && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"herbal-error\",\n              children: errors.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1199,\n              columnNumber: 52\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1190,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"herbal-form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Quantity & Pricing\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1205,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              marginTop: -8,\n              opacity: 0.8\n            },\n            children: [\"Add each pack size (e.g., \", /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"8 fl oz, 16 fl oz, 1 L\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1207,\n              columnNumber: 55\n            }, this), \") with its own price. Final price auto-calculates.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1206,\n            columnNumber: 25\n          }, this), errors.quantity && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"herbal-error\",\n            style: {\n              marginBottom: 10\n            },\n            children: errors.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1210,\n            columnNumber: 45\n          }, this), formData.quantity.map((q, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"herbal-form-row\",\n            style: {\n              border: '1px solid #eee',\n              padding: 12,\n              borderRadius: 8,\n              marginBottom: 10\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Quantity Label*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1215,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: q.label,\n                onChange: e => handleQuantityRowChange(i, 'label', e.target.value),\n                placeholder: \"e.g., 8 fl oz (Bottle)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1216,\n                columnNumber: 37\n              }, this), errors[`quantity.${i}.label`] && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"herbal-error\",\n                children: errors[`quantity.${i}.label`]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1222,\n                columnNumber: 71\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1214,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"MRP*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1225,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: q.mrp,\n                onChange: e => handleQuantityRowChange(i, 'mrp', e.target.value),\n                placeholder: \"0.00\",\n                min: \"0\",\n                step: \"0.01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1226,\n                columnNumber: 37\n              }, this), errors[`quantity.${i}.mrp`] && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"herbal-error\",\n                children: errors[`quantity.${i}.mrp`]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1234,\n                columnNumber: 69\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1224,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Discount (%)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1237,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: q.discount,\n                onChange: e => handleQuantityRowChange(i, 'discount', e.target.value),\n                placeholder: \"0\",\n                min: \"0\",\n                max: \"100\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1238,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1236,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"GST (%)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1248,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: q.gst,\n                onChange: e => handleQuantityRowChange(i, 'gst', e.target.value),\n                placeholder: \"0\",\n                min: \"0\",\n                step: \"0.01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1249,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1247,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Final Consumer Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1259,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: q.final_price,\n                readOnly: true,\n                placeholder: \"Auto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1260,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1258,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"WholesalePartner Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1268,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: q.retail_price,\n                onChange: e => handleQuantityRowChange(i, 'retail_price', e.target.value),\n                placeholder: \"Optional\",\n                min: \"0\",\n                step: \"0.01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1269,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1267,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"In Stock\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1279,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: q.in_stock,\n                onChange: e => handleQuantityRowChange(i, 'in_stock', e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"yes\",\n                  children: \"Yes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1284,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"no\",\n                  children: \"No\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1285,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1280,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1278,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              style: {\n                alignSelf: 'flex-end'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => removeQuantityRow(i),\n                className: \"herbal-reset-btn\",\n                style: {\n                  background: '#f44336',\n                  color: '#fff'\n                },\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1290,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1289,\n              columnNumber: 33\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1213,\n            columnNumber: 29\n          }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: addQuantityRow,\n            className: \"herbal-submit-btn\",\n            style: {\n              width: 'fit-content'\n            },\n            children: \"+ Add Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1302,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1204,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"herbal-form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Category Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1314,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"herbal-form-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Variety*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1317,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"productvariety\",\n                value: formData.productvariety,\n                onChange: e => {\n                  const selectedVariety = e.target.value;\n                  setFormData(prev => ({\n                    ...prev,\n                    productvariety: selectedVariety,\n                    category: \"\",\n                    sub_category: \"\"\n                  }));\n                },\n                className: \"selectCss\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Variety\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1332,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Human\",\n                  children: \"Human\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1333,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Veterinary\",\n                  children: \"Veterinary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1334,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1318,\n                columnNumber: 33\n              }, this), errors.productvariety && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"herbal-error\",\n                children: errors.productvariety\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1336,\n                columnNumber: 59\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1316,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Category*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1340,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"category\",\n                value: formData.category,\n                onChange: handleChange,\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1347,\n                  columnNumber: 37\n                }, this), categoryList.filter(cat => cat.variety === formData.productvariety).map((sub, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: sub.name,\n                  children: sub.name\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1351,\n                  columnNumber: 45\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1341,\n                columnNumber: 33\n              }, this), errors.category && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"herbal-error\",\n                children: errors.category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1354,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1339,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Sub Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1358,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"sub_category\",\n                value: formData.sub_category,\n                onChange: handleChange,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select subcategory\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1364,\n                  columnNumber: 37\n                }, this), subCategoryList.map((sub, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: sub.name,\n                  children: sub.name\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1366,\n                  columnNumber: 41\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1359,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1357,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Use By* (Expiry Date)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1372,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"expires_on\",\n                value: formData.expires_on,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1373,\n                columnNumber: 33\n              }, this), errors.expires_on && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"herbal-error\",\n                children: errors.expires_on\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1379,\n                columnNumber: 55\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1371,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1315,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1313,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"herbal-form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Product Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1386,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"herbal-form-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Suitable For\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1389,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"suitable_for\",\n                value: formData.suitable_for,\n                onChange: handleChange,\n                placeholder: \"e.g., Adults, Children, All ages\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1390,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1388,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"herbal-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Benefits (comma separated)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1399,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                name: \"benefits\",\n                value: formData.benefits,\n                onChange: handleChange,\n                placeholder: \"Enter benefits separated by commas\",\n                rows: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1400,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1398,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1387,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"herbal-form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Dosage/Usage Instructions*\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1410,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"dosage\",\n              value: formData.dosage,\n              onChange: handleChange,\n              placeholder: \"Enter dosage instructions\",\n              rows: \"3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1411,\n              columnNumber: 29\n            }, this), errors.dosage && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"herbal-error\",\n              children: errors.dosage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1418,\n              columnNumber: 47\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1409,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"herbal-form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Side Effects\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1421,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"side_effects\",\n              value: formData.side_effects,\n              onChange: handleChange,\n              placeholder: \"Enter any known side effects\",\n              rows: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1422,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1420,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1385,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"herbal-form-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleReset,\n            className: \"herbal-reset-btn\",\n            children: \"Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1433,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"herbal-submit-btn\",\n            children: isEditMode ? \"Update Product\" : \"Submit Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1436,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1432,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1107,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1106,\n    columnNumber: 9\n  }, this);\n};\n_s(AddNewProduct, \"GEz/i/Rl0LeiKX+VTYDWOUHKXVs=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = AddNewProduct;\nexport default AddNewProduct;\nvar _c;\n$RefreshReg$(_c, \"AddNewProduct\");","map":{"version":3,"names":["React","useEffect","useState","useRef","axiosInstance","toast","useParams","useNavigate","JoinUrl","jsxDEV","_jsxDEV","AddNewProduct","_s","id","isEditMode","navigate","categoryList","setCategoryList","subCategoryList","setSubCategoryList","formData","setFormData","name","description","media","retail_price","consumer_price","discount","mrp","gst","stock","quantity","category","productvariety","sub_category","expires_on","suitable_for","benefits","dosage","side_effects","prescription","created_at","Date","toISOString","deleted_at","errors","setErrors","isSubmitted","setIsSubmitted","fileInputRef","init","categoriesResponse","get","data","productResponse","product","subCategoryResponse","encodeURIComponent","normalizeRow","r","_r$label","_r$mrp","_r$discount","_r$gst","_r$retail_price","_r$final_price","_r$in_stock","label","final_price","in_stock","toLowerCase","quantityRows","Array","isArray","length","map","variants","prev","_ref","_product$expires_on$s","_product$expires_on","_product$expires_on$s2","_product$expires_on$s3","split","call","m","_m$url","_m$url$startsWith","_m$type","_m$type$includes","url","startsWith","type","includes","file","_product$stock","s","trim","error","console","handleChange","e","value","target","updated","parseFloat","discountedPrice","isNaN","finalPrice","isFinite","toFixed","fetchSubCategories","addQuantityRow","removeQuantityRow","index","q","splice","handleQuantityRowChange","field","discounted","final","handleMediaChange","files","from","mediaPromises","Promise","resolve","reader","FileReader","onloadend","result","size","readAsDataURL","all","then","newMedia","removeMedia","updatedMedia","triggerFileInput","current","click","validateForm","newErrors","requiredFields","forEach","replace","i","Object","keys","handleSubmit","preventDefault","formPayload","FormData","entries","key","undefined","append","JSON","stringify","mediaItem","response","put","headers","success","post","_error$response","_error$response$data","message","handleReset","formatFileSize","bytes","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","onChange","placeholder","ref","accept","multiple","style","display","_media$file","_media$file$name","controls","src","pop","alt","rows","marginTop","opacity","marginBottom","border","padding","borderRadius","min","step","max","readOnly","alignSelf","background","color","width","selectedVariety","required","filter","cat","variety","sub","_c","$RefreshReg$"],"sources":["/Users/himanshu/Desktop/Dr BSK/Dr bsk/src/Pages/pharma-admin/component/AddNewProduct.js"],"sourcesContent":["// import React, { useEffect, useState, useRef } from 'react'\n// import axiosInstance from '../../../components/AxiosInstance';\n// import { toast } from 'react-toastify';\n// import { useParams, useNavigate } from 'react-router-dom';\n\n\n// const AddNewProduct = () => {\n//     const { id } = useParams();\n//     const isEditMode = !!id;\n//     const navigate = useNavigate();\n\n//     const [categoryList, setCategoryList] = useState([]);\n//     const [subCategoryList, setSubCategoryList] = useState([]);\n//     const [formData, setFormData] = useState({\n//         name: \"\",\n//         description: \"\",\n//         media: [],\n//         retail_price: \"\",\n//         consumer_price: \"\",\n//         discount: \"\",\n//         mrp: \"\",\n//         gst: \"\",\n//         stock: \"yes\",\n//         quantity: [],\n//         category: \"\",\n//         productvariety: \"\",\n//         sub_category: \"\",\n//         expires_on: \"\",\n//         suitable_for: \"\",\n//         benefits: \"\",\n//         dosage: \"\",\n//         side_effects: \"\",\n//         prescription: \"required\",\n//         created_at: new Date().toISOString(),\n//         deleted_at: null\n//     });\n\n//     const [errors, setErrors] = useState({});\n//     const [isSubmitted, setIsSubmitted] = useState(false);\n//     const fileInputRef = useRef(null);\n\n//     useEffect(() => {\n//         const init = async () => {\n//             try {\n//                 const categoriesResponse = await axiosInstance.get('/user/allcategories');\n//                 setCategoryList(categoriesResponse.data);\n\n//                 if (isEditMode) {\n//                     const productResponse = await axiosInstance.get(`/user/product/${id}`);\n//                     const product = productResponse.data;\n//                     // console.log('lksdjf;sdkjfl;skjfl;sjdf;', productResponse.data)\n\n//                     // Fetch subcategories for selected category\n//                     if (product.category) {\n//                         const subCategoryResponse = await axiosInstance.get(\n//                             `/user/allSubcategories?category=${encodeURIComponent(product.category)}`\n//                         );\n//                         setSubCategoryList(subCategoryResponse.data);\n//                     }\n\n//                     setFormData({\n//                         ...product,\n//                         expires_on: product.expires_on?.split('T')[0],\n//                         media: product.media.map(m => ({\n//                             ...m,\n//                             url: m.url.startsWith('http') ? m.url : `${m.url}`,\n//                             type: m.type.includes('video') ? 'video' : 'image',\n//                             file: null\n//                         })),\n//                         quantity: Array.isArray(product.quantity)\n//                             ? product.quantity\n//                             : (typeof product.quantity === 'string' && product.quantity.length > 0\n//                                 ? [product.quantity]\n//                                 : []),\n//                         stock: (() => {\n//                             const s = (product.stock ?? '').toLowerCase().trim();\n//                             console.log(\"Stock value:\", s);\n//                             return s === 'yes' ? 'yes'\n//                                 : s === 'no' ? 'no'\n//                                     : 'yes';\n//                         })(),\n\n//                     });\n\n\n//                 }\n//             } catch (error) {\n//                 console.error(\"Error during initialization:\", error);\n//             }\n//         };\n\n//         init();\n//     }, [id]);\n\n//     const handleChange = (e) => {\n//         const { name, value } = e.target;\n//         setFormData(prev => {\n//             const updatedData = { ...prev, [name]: value };\n\n//             // Parse numeric values safely\n//             const mrp = parseFloat(updatedData.mrp);\n//             const discount = parseFloat(updatedData.discount);\n//             const gst = parseFloat(updatedData.gst);\n\n//             // Calculate base discounted price\n//             let discountedPrice = 0;\n//             if (!isNaN(mrp) && !isNaN(discount)) {\n//                 discountedPrice = mrp - (mrp * (discount / 100));\n//             }\n\n//             // Calculate consumer_price based on GST presence\n//             if (!isNaN(gst) && gst > 0) {\n//                 // Add GST on top of discounted price\n//                 const finalPrice = discountedPrice + (discountedPrice * (gst / 100));\n//                 updatedData.consumer_price = finalPrice.toFixed(2);\n//             } else {\n//                 // No GST, consumer_price is just discounted price\n//                 if (discountedPrice > 0) {\n//                     updatedData.consumer_price = discountedPrice.toFixed(2);\n//                 } else {\n//                     updatedData.consumer_price = \"\";\n//                 }\n//             }\n\n//             // Reset sub_category if category changes\n//             if (name === \"category\") {\n//                 updatedData.sub_category = \"\";\n//                 fetchSubCategories(value);\n//             }\n\n//             return updatedData;\n//         });\n//     };\n\n\n\n//     const handleMediaChange = (e) => {\n//         const files = Array.from(e.target.files);\n//         if (files.length === 0) return;\n\n//         const mediaPromises = files.map(file => {\n//             return new Promise((resolve) => {\n//                 const reader = new FileReader();\n//                 reader.onloadend = () => {\n//                     resolve({\n//                         url: reader.result,\n//                         type: file.type.startsWith('video') ? 'video' : 'image',\n//                         name: file.name,\n//                         size: file.size,\n//                         file: file\n//                     });\n//                 };\n//                 reader.readAsDataURL(file);\n//             });\n//         });\n\n//         Promise.all(mediaPromises).then(newMedia => {\n//             setFormData(prev => ({\n//                 ...prev,\n//                 media: [...prev.media, ...newMedia]\n//             }));\n//         });\n//     };\n\n//     const removeMedia = (index) => {\n//         setFormData(prev => {\n//             const updatedMedia = [...prev.media];\n//             updatedMedia.splice(index, 1);\n//             return {\n//                 ...prev,\n//                 media: updatedMedia\n//             };\n//         });\n//     };\n\n//     const triggerFileInput = () => {\n//         fileInputRef.current.value = null;\n//         fileInputRef.current.click();\n//     };\n\n//     const validateForm = () => {\n//         const newErrors = {};\n//         const requiredFields = [\n//             'name', 'description', 'retail_price', 'consumer_price',\n//             'quantity', 'category', 'expires_on', 'dosage', 'productvariety'\n//         ];\n\n\n//         requiredFields.forEach(field => {\n//             if (!formData[field]) {\n//                 newErrors[field] = `${field.replace('_', ' ')} is required`;\n//             }\n//         });\n\n//         // if (formData.expires_on && new Date(formData.expires_on) < new Date()) {\n//         //     newErrors.expires_on = \"Expiry date must be in the future\";\n//         // }\n\n//         setErrors(newErrors);\n//         return Object.keys(newErrors).length === 0;\n//     };\n\n//     const handleSubmit = async (e) => {\n//         e.preventDefault();\n//         if (!validateForm()) return;\n\n//         try {\n//             const formPayload = new FormData();\n\n//             // Append all fields (excluding media for now)\n//             Object.entries(formData).forEach(([key, value]) => {\n//                 if (key === 'media') return;\n//                 if (value !== null && value !== undefined) {\n//                     formPayload.append(key, value);\n//                 }\n//             });\n\n//             // Append media files (only new uploads with .file property)\n//             formData.media.forEach((item) => {\n//                 if (item?.file) {\n//                     formPayload.append('media', item.file);\n//                 } else {\n//                     // Optionally append existing media URLs if needed\n//                     formPayload.append('existingMedia', item.url);\n//                 }\n//             });\n\n//             let res;\n//             if (isEditMode) {\n//                 res = await axiosInstance.put(\n//                     `/user/updateProduct/${id}`,\n//                     formPayload,\n//                     {\n//                         headers: {\n//                             'Content-Type': 'multipart/form-data',\n//                         },\n//                     }\n//                 );\n//                 toast.success('Product updated successfully!');\n//             } else {\n//                 res = await axiosInstance.post(\n//                     '/user/createProduct',\n//                     formPayload,\n//                     {\n//                         headers: {\n//                             'Content-Type': 'multipart/form-data',\n//                         },\n//                     }\n//                 );\n//                 toast.success('Product added successfully!');\n//             }\n\n//             navigate('/pharma-admin/products');\n//         } catch (error) {\n//             console.error('Submit Error:', error);\n//             toast.error('Something went wrong. Please try again.', error);\n//         }\n//     };\n\n\n//     const handleReset = () => {\n//         setFormData({\n//             name: \"\",\n//             description: \"\",\n//             media: [],\n//             retail_price: \"\",\n//             consumer_price: \"\",\n//             discount: \"\",\n//             mrp: \"\",\n//             stock: \"\",\n//             gst: \"\",\n//             quantity: [],\n//             category: \"\",\n//             sub_category: \"\",\n//             productvariety: \"\",\n//             expires_on: \"\",\n//             suitable_for: \"\",\n//             benefits: \"\",\n//             dosage: \"\",\n//             side_effects: \"\",\n//             prescription: \"\",\n//             created_at: new Date().toISOString(),\n//             deleted_at: null\n//         });\n//         setErrors({});\n//         setIsSubmitted(false);\n//     };\n\n//     const formatFileSize = (bytes) => {\n//         if (bytes < 1024) return bytes + ' bytes';\n//         else if (bytes < 1048576) return (bytes / 1024).toFixed(2) + ' KB';\n//         else return (bytes / 1048576).toFixed(2) + ' MB';\n//     };\n\n//     const fetchSubCategories = async (category) => {\n//         try {\n//             const response = await axiosInstance.get(`/user/allSubcategories?category=${encodeURIComponent(category)}`);\n//             console.log(\"Fetched subCategories:\", response.data);\n//             setSubCategoryList(response.data);\n//         } catch (error) {\n//             console.error(\"Error fetching subcategories:\", error);\n//         }\n//     };\n\n\n//     const fetchData = async () => {\n//         try {\n//             const response = await axiosInstance.get('/user/allcategories');\n//             console.log(\"Fetched categories:\", response.data);\n//             setCategoryList(response.data);\n//         } catch (error) {\n//             console.error(\"Error fetching categories:\", error);\n//         }\n//     };\n\n//     // Handle change for a particular quantity input\n//     const handleQuantityChange = (index, value) => {\n//         setFormData(prev => {\n//             const newQuantities = [...prev.quantity];\n//             newQuantities[index] = value;\n//             return { ...prev, quantity: newQuantities };\n//         });\n//     };\n\n//     // Add another empty quantity input field\n//     const addQuantityField = () => {\n//         setFormData(prev => ({\n//             ...prev,\n//             quantity: [...prev.quantity, \"\"]\n//         }));\n//     };\n\n//     // Remove quantity input at given index\n//     const removeQuantityField = (index) => {\n//         setFormData(prev => {\n//             const newQuantities = [...prev.quantity];\n//             newQuantities.splice(index, 1);\n//             return { ...prev, quantity: newQuantities };\n//         });\n//     };\n\n\n//     return (\n//         <div>\n//             <div className=\"herbal-form-container\">\n//                 <div className=\"herbal-form-header\">\n//                     <h2>{isEditMode ? \"Edit Product\" : \"Add New Product\"}</h2>\n//                     <button type=\"button\" className=\"herbal-cancel-btn\" onClick={() => navigate(\"/pharma-admin/products\")}>\n//                         Cancel\n//                     </button>\n//                 </div>\n\n//                 {isSubmitted ? (\n//                     <div className=\"herbal-success-message\">\n//                         <p>Product submitted successfully!</p>\n//                         <button onClick={handleReset}>Add Another Product</button>\n//                     </div>\n//                 ) : (\n//                     <form onSubmit={handleSubmit} className=\"herbal-product-form\">\n//                         {/* Basic Information */}\n//                         <div className=\"herbal-form-section\">\n//                             <h3>Basic Information</h3>\n//                             <div className=\"herbal-form-row\">\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Product Name*</label>\n//                                     <input\n//                                         type=\"text\"\n//                                         name=\"name\"\n//                                         value={formData.name}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter product name\"\n//                                     />\n//                                     {errors.name && <span className=\"herbal-error\">{errors.name}</span>}\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Product Media (Images/Videos)*</label>\n//                                     <div className=\"media-upload-container\">\n//                                         <input\n//                                             type=\"file\"\n//                                             ref={fileInputRef}\n//                                             onChange={handleMediaChange}\n//                                             accept=\"image/*,video/*\"\n//                                             multiple\n//                                             style={{ display: 'none' }}\n//                                         />\n//                                         <button\n//                                             type=\"button\"\n//                                             className=\"media-upload-btn\"\n//                                             onClick={triggerFileInput}\n//                                         >\n//                                             Add Media\n//                                         </button>\n//                                         <p className=\"media-upload-hint\">Supports JPG, PNG, GIF, MP4 (Max 10MB each)</p>\n//                                         <div className=\"media-preview-container\">\n//                                             {formData.media.length === 0 ? (\n//                                                 <div className=\"no-media-placeholder\">\n//                                                     No media selected\n//                                                 </div>\n//                                             ) : (\n//                                                 formData.media.map((media, index) => (\n//                                                     <div key={index} className=\"media-preview-item\">\n//                                                         {media.type === 'video' ? (\n//                                                             <video controls>\n//                                                                 <source src={media.url} type={`video/${media.file.name.split('.').pop()}`} />\n//                                                                 Your browser does not support the video tag.\n//                                                             </video>\n//                                                         ) : (\n//                                                             <img src={media.url} alt={`Preview ${index}`} />\n//                                                         )}\n//                                                         <button\n//                                                             type=\"button\"\n//                                                             className=\"remove-media-btn\"\n//                                                             onClick={() => removeMedia(index)}\n//                                                             aria-label=\"Remove media\"\n//                                                         >\n//                                                             ×\n//                                                         </button>\n//                                                         <div className=\"media-info\">\n//                                                             <span className=\"media-name\">{media.name}</span>\n//                                                             <span className=\"media-size\">{formatFileSize(media.size)}</span>\n//                                                         </div>\n//                                                     </div>\n//                                                 ))\n//                                             )}\n//                                         </div>\n//                                     </div>\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label >Prescription</label>\n//                                     <select name=\"prescription\" value={formData.prescription} onChange={handleChange} >\n//                                         {/* <option value=\"\">Select Prescription</option> */}\n//                                         <option value=\"required\">Required</option>\n//                                         <option value=\"Notrequired\">Not Required</option>\n//                                     </select>\n//                                 </div>\n//                             </div>\n\n//                             <div className=\"herbal-form-group\">\n//                                 <label>Description*</label>\n//                                 <textarea\n//                                     name=\"description\"\n//                                     value={formData.description}\n//                                     onChange={handleChange}\n//                                     placeholder=\"Enter product description\"\n//                                     rows=\"3\"\n//                                 />\n//                                 {errors.description && <span className=\"herbal-error\">{errors.description}</span>}\n//                             </div>\n//                         </div>\n\n\n//                         {/* Pricing Information */}\n//                         <div className=\"herbal-form-section\">\n//                             <h3>Pricing Information</h3>\n//                             <div className=\"herbal-form-row\">\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>MRP</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"mrp\"\n//                                         value={formData.mrp}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter maximum retail price\"\n//                                         min=\"0\"\n//                                         step=\"0.01\"\n//                                     />\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Discount (%)</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"discount\"\n//                                         value={formData.discount}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter discount percentage\"\n//                                         min=\"0\"\n//                                         max=\"100\"\n//                                     />\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Discounted Price</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"consumer_price\"\n//                                         value={formData.consumer_price}\n//                                         readOnly\n//                                         placeholder=\"Calculated consumer price\"\n//                                         min=\"0\"\n//                                         step=\"0.01\"\n//                                     />\n//                                 </div>\n\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>GST</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"gst\"\n//                                         value={formData.gst}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter GST %\"\n//                                         min=\"0\"\n//                                         step=\"0.01\"\n//                                     />\n\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Final Consumer Price</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"consumer_price\"\n//                                         value={formData.consumer_price}\n//                                         readOnly\n//                                         placeholder=\"Calculated consumer price\"\n//                                         min=\"0\"\n//                                         step=\"0.01\"\n//                                     />\n//                                 </div>\n\n//                             </div>\n\n\n//                             <div className=\"herbal-form-row\">\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>WholesalePartner Price (MRP)*</label>\n//                                     <input\n//                                         type=\"number\"\n//                                         name=\"retail_price\"\n//                                         value={formData.retail_price}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter retail price\"\n//                                         min=\"0\"\n//                                         step=\"0.01\"\n//                                     />\n//                                     {errors.retail_price && <span className=\"herbal-error\">{errors.retail_price}</span>}\n//                                 </div>\n\n//                                 {/* <div className=\"herbal-form-group\">\n//                                     <label>Quantity*</label>\n//                                     <input\n//                                         type=\"text\"\n//                                         name=\"quantity\"\n//                                         value={formData.quantity}\n//                                         onChange={handleChange}\n//                                         placeholder=\"e.g., 100ml, 50g\"\n//                                     />\n//                                     {errors.quantity && <span className=\"herbal-error\">{errors.quantity}</span>}\n//                                 </div> */}\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Quantities*</label>\n//                                     {formData.quantity?.length === 0 && (\n//                                         <p>No quantities added yet. Click 'Add Quantity' to start.</p>\n//                                     )}\n//                                     {formData.quantity?.map((qty, index) => (\n//                                         <div key={index} style={{ display: 'flex', alignItems: 'center', marginBottom: '8px' }}>\n//                                             <input\n//                                                 type=\"text\"\n//                                                 value={qty}\n//                                                 onChange={(e) => handleQuantityChange(index, e.target.value)}\n//                                                 placeholder=\"Enter quantity\"\n//                                                 style={{ flexGrow: 1 }}\n//                                             />\n//                                             <button\n//                                                 type=\"button\"\n//                                                 onClick={() => removeQuantityField(index)}\n//                                                 aria-label=\"Remove quantity\"\n//                                                 style={{\n//                                                     marginLeft: '8px',\n//                                                     backgroundColor: '#f44336',\n//                                                     color: '#fff',\n//                                                     border: 'none',\n//                                                     padding: '0 8px',\n//                                                     cursor: 'pointer',\n//                                                     borderRadius: '4px',\n//                                                     height: '32px'\n//                                                 }}\n//                                             >\n//                                                 ×\n//                                             </button>\n//                                         </div>\n//                                     ))}\n\n//                                     <button\n//                                         type=\"button\"\n//                                         onClick={addQuantityField}\n//                                         style={{\n//                                             marginTop: '8px',\n//                                             backgroundColor: '#4CAF50',\n//                                             color: 'white',\n//                                             border: 'none',\n//                                             padding: '8px 12px',\n//                                             cursor: 'pointer',\n//                                             borderRadius: '4px'\n//                                         }}\n//                                     >\n//                                         Add Quantity\n//                                     </button>\n\n//                                     {errors.quantity && <span className=\"herbal-error\">{errors.quantity}</span>}\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Use By* (Expiry Date)</label>\n//                                     <input\n//                                         // type=\"date\"\n//                                         type=\"text\"\n//                                         name=\"expires_on\"\n//                                         value={formData.expires_on}\n//                                         onChange={handleChange}\n//                                     // min={new Date().toISOString().split('T')[0]}\n//                                     />\n//                                     {errors.expires_on && <span className=\"herbal-error\">{errors.expires_on}</span>}\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label >Stock *</label>\n//                                     <select name=\"stock\" required value={formData.stock} onChange={handleChange} >\n//                                         <option value=\"yes\">Yes</option>\n//                                         <option value=\"no\">No</option>\n//                                     </select>\n//                                 </div>\n//                             </div>\n//                         </div>\n\n\n//                         {/* Category Information */}\n//                         <div className=\"herbal-form-section\">\n//                             <h3>Category Information</h3>\n//                             <div className=\"herbal-form-row\">\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Variety*</label>\n//                                     <select\n//                                         name=\"productvariety\"\n//                                         value={formData.productvariety}\n//                                         onChange={(e) => {\n//                                             const selectedVariety = e.target.value;\n//                                             setFormData(prev => ({\n//                                                 ...prev,\n//                                                 productvariety: selectedVariety,\n//                                                 category: \"\",\n//                                                 sub_category: \"\"\n//                                             }));\n//                                         }}\n//                                         className='selectCss'\n//                                     >\n//                                         <option value=\"\">Select Variety</option>\n//                                         <option value=\"Human\">Human</option>\n//                                         <option value=\"Veterinary\">Veterinary</option>\n//                                     </select>\n//                                     {errors.variety && <span className=\"herbal-error\">{errors.variety}</span>}\n//                                 </div>\n\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Category*</label>\n//                                     <select\n//                                         name=\"category\"\n//                                         value={formData.category}\n//                                         onChange={handleChange}\n//                                         required\n//                                     >\n//                                         <option value=\"\">Select Category</option>\n//                                         {categoryList\n//                                             .filter(cat => cat.variety === formData.productvariety\n//                                             )\n//                                             .map((sub, index) => (\n//                                                 <option key={index} value={sub.name}>{sub.name}</option>\n//                                             ))}\n//                                     </select>\n//                                     {errors.category && <span className=\"herbal-error\">{errors.category}</span>}\n//                                 </div>\n\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Sub Category</label>\n//                                     <select\n//                                         name=\"sub_category\"\n//                                         value={formData.sub_category}\n//                                         onChange={handleChange}\n//                                         required\n//                                     >\n//                                         <option value=\"\">Select subcategory</option>\n//                                         {subCategoryList.map((sub, index) => (\n//                                             <option key={index} value={sub.name}>{sub.name}</option>\n//                                         ))}\n//                                     </select>\n\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Suitable For</label>\n//                                     <input\n//                                         type=\"text\"\n//                                         name=\"suitable_for\"\n//                                         value={formData.suitable_for}\n//                                         onChange={handleChange}\n//                                         placeholder=\"e.g., Adults, Children, All ages\"\n//                                     />\n//                                 </div>\n//                             </div>\n//                         </div>\n\n//                         {/* Product Details */}\n//                         <div className=\"herbal-form-section\">\n//                             <h3>Product Details</h3>\n//                             <div className=\"herbal-form-row\">\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Benefits (comma separated)</label>\n//                                     <textarea\n//                                         name=\"benefits\"\n//                                         value={formData.benefits}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter benefits separated by commas\"\n//                                         rows=\"3\"\n//                                     />\n//                                 </div>\n\n//                                 <div className=\"herbal-form-group\">\n//                                     <label>Dosage/Usage Instructions*</label>\n//                                     <textarea\n//                                         name=\"dosage\"\n//                                         value={formData.dosage}\n//                                         onChange={handleChange}\n//                                         placeholder=\"Enter dosage instructions\"\n//                                         rows=\"3\"\n//                                     />\n//                                     {errors.dosage && <span className=\"herbal-error\">{errors.dosage}</span>}\n//                                 </div>\n//                             </div>\n\n//                             <div className=\"herbal-form-group\">\n//                                 <label>Side Effects</label>\n//                                 <textarea\n//                                     name=\"side_effects\"\n//                                     value={formData.side_effects}\n//                                     onChange={handleChange}\n//                                     placeholder=\"Enter any known side effects\"\n//                                     rows=\"2\"\n//                                 />\n//                             </div>\n//                         </div>\n\n//                         <div className=\"herbal-form-actions\">\n//                             <button type=\"button\" onClick={handleReset} className=\"herbal-reset-btn\">\n//                                 Reset\n//                             </button>\n//                             {/* <p>{isEditMode ? \"Edit Product\" : \"Add New Product\"}</p> */}\n\n//                             <button type=\"submit\" className=\"herbal-submit-btn\">\n//                                 {isEditMode ? \"Update Product\" : \"Submit Product\"}\n//                             </button>\n\n//                         </div>\n//                     </form>\n//                 )}\n//             </div>\n//         </div>\n//     )\n// }\n\n// export default AddNewProduct\n\n\nimport React, { useEffect, useState, useRef } from 'react'\nimport axiosInstance from '../../../components/AxiosInstance';\nimport { toast } from 'react-toastify';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport JoinUrl from '../../../JoinUrl';\n\nconst AddNewProduct = () => {\n    const { id } = useParams();\n    const isEditMode = !!id;\n    const navigate = useNavigate();\n\n    const [categoryList, setCategoryList] = useState([]);\n    const [subCategoryList, setSubCategoryList] = useState([]);\n\n    const [formData, setFormData] = useState({\n        name: \"\",\n        description: \"\",\n        media: [],\n        retail_price: \"\",\n        consumer_price: \"\", // kept for legacy — not used for variants\n        discount: \"\",\n        mrp: \"\",\n        gst: \"\",\n        stock: \"yes\",\n        quantity: [], // legacy list of labels\n        category: \"\",\n        productvariety: \"\",\n        sub_category: \"\",\n        expires_on: \"\",\n        suitable_for: \"\",\n        benefits: \"\",\n        dosage: \"\",\n        side_effects: \"\",\n        prescription: \"required\",\n        created_at: new Date().toISOString(),\n        deleted_at: null\n    });\n\n    const [errors, setErrors] = useState({});\n    const [isSubmitted, setIsSubmitted] = useState(false);\n    const fileInputRef = useRef(null);\n\n    useEffect(() => {\n        const init = async () => {\n            try {\n                const categoriesResponse = await axiosInstance.get('/user/allcategories');\n                setCategoryList(categoriesResponse.data);\n\n                if (isEditMode) {\n                    const productResponse = await axiosInstance.get(`/user/product/${id}`);\n                    const product = productResponse.data;\n\n                    // fetch subcategories\n                    if (product.category) {\n                        const subCategoryResponse = await axiosInstance.get(\n                            `/user/allSubcategories?category=${encodeURIComponent(product.category)}`\n                        );\n                        setSubCategoryList(subCategoryResponse.data);\n                    }\n\n                    // normalize quantity rows\n                    const normalizeRow = (r) => ({\n                        label: r?.label ?? (typeof r === 'string' ? r : ''),\n                        mrp: r?.mrp ?? \"\",\n                        discount: r?.discount ?? \"\",\n                        gst: r?.gst ?? \"\",\n                        retail_price: r?.retail_price ?? \"\",\n                        final_price: r?.final_price ?? \"\",\n                        in_stock: (r?.in_stock ?? 'yes').toLowerCase() === 'no' ? 'no' : 'yes'\n                    });\n\n                    let quantityRows = [];\n                    if (Array.isArray(product.quantity) && product.quantity.length > 0) {\n                        quantityRows = product.quantity.map(normalizeRow);\n                    } else if (Array.isArray(product.variants) && product.variants.length > 0) {\n                        quantityRows = product.variants.map(normalizeRow);\n                    }\n\n                    setFormData(prev => ({\n                        ...prev,\n                        ...product,\n                        expires_on: product.expires_on?.split?.('T')?.[0] ?? product.expires_on ?? \"\",\n                        media: (product.media || []).map(m => ({\n                            ...m,\n                            url: m.url?.startsWith?.('http') ? m.url : `${m.url}`,\n                            type: m.type?.includes?.('video') ? 'video' : 'image',\n                            file: null\n                        })),\n                        stock: (() => {\n                            const s = (product.stock ?? '').toLowerCase().trim();\n                            return s === 'yes' ? 'yes' : s === 'no' ? 'no' : 'yes';\n                        })(),\n                        quantity: quantityRows\n                    }));\n                }\n            } catch (error) {\n                console.error(\"Error during initialization:\", error);\n            }\n        };\n\n        init();\n    }, [id]);\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setFormData(prev => {\n            const updated = { ...prev, [name]: value };\n\n            // legacy single-price auto-calc\n            const mrp = parseFloat(updated.mrp);\n            const discount = parseFloat(updated.discount);\n            const gst = parseFloat(updated.gst);\n            let discountedPrice = 0;\n            if (!isNaN(mrp) && !isNaN(discount)) discountedPrice = mrp - (mrp * (discount / 100));\n            if (!isNaN(gst) && gst > 0) {\n                const finalPrice = discountedPrice + (discountedPrice * (gst / 100));\n                updated.consumer_price = isFinite(finalPrice) && finalPrice > 0 ? finalPrice.toFixed(2) : \"\";\n            } else {\n                updated.consumer_price = discountedPrice > 0 ? discountedPrice.toFixed(2) : \"\";\n            }\n\n            if (name === \"category\") {\n                updated.sub_category = \"\";\n                fetchSubCategories(value);\n            }\n            return updated;\n        });\n    };\n\n    const addQuantityRow = () => {\n        setFormData(prev => ({\n            ...prev,\n            quantity: [\n                ...prev.quantity,\n                { label: \"\", mrp: \"\", discount: \"\", gst: \"\", retail_price: \"\", final_price: \"\", in_stock: \"yes\" }\n            ]\n        }));\n    };\n\n    const removeQuantityRow = (index) => {\n        setFormData(prev => {\n            const q = [...prev.quantity];\n            q.splice(index, 1);\n            return { ...prev, quantity: q };\n        });\n    };\n\n    const handleQuantityRowChange = (index, field, value) => {\n        setFormData(prev => {\n            const q = [...prev.quantity];\n            q[index] = { ...q[index], [field]: value };\n\n            // auto compute final_price when mrp/discount/gst changes\n            const mrp = parseFloat(q[index].mrp);\n            const discount = parseFloat(q[index].discount);\n            const gst = parseFloat(q[index].gst);\n            if (!isNaN(mrp)) {\n                const discounted = !isNaN(discount) ? mrp * (1 - (discount / 100)) : mrp;\n                const final = !isNaN(gst) ? discounted * (1 + (gst / 100)) : discounted;\n                q[index].final_price = isFinite(final) && final > 0 ? final.toFixed(2) : \"\";\n            } else {\n                q[index].final_price = \"\";\n            }\n\n            return { ...prev, quantity: q };\n        });\n    };\n\n    const handleMediaChange = (e) => {\n        const files = Array.from(e.target.files);\n        if (files.length === 0) return;\n\n        const mediaPromises = files.map(file => {\n            return new Promise((resolve) => {\n                const reader = new FileReader();\n                reader.onloadend = () => {\n                    resolve({\n                        url: reader.result,\n                        type: file.type.startsWith('video') ? 'video' : 'image',\n                        name: file.name,\n                        size: file.size,\n                        file: file\n                    });\n                };\n                reader.readAsDataURL(file);\n            });\n        });\n\n        Promise.all(mediaPromises).then(newMedia => {\n            setFormData(prev => ({\n                ...prev,\n                media: [...prev.media, ...newMedia]\n            }));\n        });\n    };\n\n    const removeMedia = (index) => {\n        setFormData(prev => {\n            const updatedMedia = [...prev.media];\n            updatedMedia.splice(index, 1);\n            return { ...prev, media: updatedMedia };\n        });\n    };\n\n    const triggerFileInput = () => {\n        fileInputRef.current.value = null;\n        fileInputRef.current.click();\n    };\n\n    const validateForm = () => {\n        const newErrors = {};\n        const requiredFields = [\n            'name', 'description', 'category', 'expires_on', 'dosage', 'productvariety'\n        ];\n        \n        requiredFields.forEach(field => {\n            if (!formData[field]) newErrors[field] = `${field.replace('_', ' ')} is required`;\n        });\n\n        // Validate at least one quantity row exists\n        if (formData.quantity.length === 0) {\n            newErrors.quantity = \"At least one quantity/variant is required\";\n        } else {\n            // Validate each quantity row\n            formData.quantity.forEach((q, i) => {\n                if (!q.label) newErrors[`quantity.${i}.label`] = \"Quantity label is required\";\n                if (!q.mrp || isNaN(parseFloat(q.mrp))) newErrors[`quantity.${i}.mrp`] = \"Valid MRP is required\";\n            });\n        }\n\n        // Validate media\n        if (formData.media.length === 0) {\n            newErrors.media = \"At least one media file is required\";\n        }\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setIsSubmitted(true);\n        \n        if (!validateForm()) {\n            toast.error(\"Please fix the errors in the form\");\n            return;\n        }\n\n        try {\n            const formPayload = new FormData();\n\n            // Append all form data except media and quantity\n            Object.entries(formData).forEach(([key, value]) => {\n                if (key === 'media' || key === 'quantity') return;\n                if (value !== null && value !== undefined) {\n                    formPayload.append(key, value);\n                }\n            });\n\n            // Append quantity as JSON string\n            formPayload.append('quantity', JSON.stringify(formData.quantity));\n\n            // Handle media files\n            formData.media.forEach((mediaItem) => {\n                if (mediaItem.file) {\n                    formPayload.append('media', mediaItem.file);\n                } else if (mediaItem.url) {\n                    formPayload.append('existingMedia', mediaItem.url);\n                }\n            });\n\n            let response;\n            if (isEditMode) {\n                response = await axiosInstance.put(`/user/updateProduct/${id}`, formPayload, {\n                    headers: { 'Content-Type': 'multipart/form-data' }\n                });\n                toast.success('Product updated successfully!');\n            } else {\n                response = await axiosInstance.post('/user/createProduct', formPayload, {\n                    headers: { 'Content-Type': 'multipart/form-data' }\n                });\n                toast.success('Product created successfully!');\n            }\n\n            navigate('/pharma-admin/products');\n        } catch (error) {\n            console.error('Error submitting form:', error);\n            toast.error(error.response?.data?.message || 'Failed to submit product');\n        }\n    };\n\n    const handleReset = () => {\n        setFormData({\n            name: \"\",\n            description: \"\",\n            media: [],\n            retail_price: \"\",\n            consumer_price: \"\",\n            discount: \"\",\n            mrp: \"\",\n            stock: \"yes\",\n            gst: \"\",\n            quantity: [],\n            category: \"\",\n            sub_category: \"\",\n            productvariety: \"\",\n            expires_on: \"\",\n            suitable_for: \"\",\n            benefits: \"\",\n            dosage: \"\",\n            side_effects: \"\",\n            prescription: \"required\",\n            created_at: new Date().toISOString(),\n            deleted_at: null\n        });\n        setErrors({});\n        setIsSubmitted(false);\n    };\n\n    const formatFileSize = (bytes) => {\n        if (bytes < 1024) return bytes + ' bytes';\n        else if (bytes < 1048576) return (bytes / 1024).toFixed(2) + ' KB';\n        else return (bytes / 1048576).toFixed(2) + ' MB';\n    };\n\n    const fetchSubCategories = async (category) => {\n        try {\n            const response = await axiosInstance.get(`/user/allSubcategories?category=${encodeURIComponent(category)}`);\n            setSubCategoryList(response.data);\n        } catch (error) {\n            console.error(\"Error fetching subcategories:\", error);\n        }\n    };\n\n    return (\n        <div>\n            <div className=\"herbal-form-container\">\n                <div className=\"herbal-form-header\">\n                    <h2>{isEditMode ? \"Edit Product\" : \"Add New Product\"}</h2>\n                    <button type=\"button\" className=\"herbal-cancel-btn\" onClick={() => navigate(\"/pharma-admin/products\")}>\n                        Cancel\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"herbal-product-form\">\n                    {/* Basic Information */}\n                    <div className=\"herbal-form-section\">\n                        <h3>Basic Information</h3>\n                        <div className=\"herbal-form-row\">\n                            <div className=\"herbal-form-group\">\n                                <label>Product Name*</label>\n                                <input \n                                    type=\"text\" \n                                    name=\"name\" \n                                    value={formData.name} \n                                    onChange={handleChange} \n                                    placeholder=\"Enter product name\" \n                                />\n                                {errors.name && <span className=\"herbal-error\">{errors.name}</span>}\n                            </div>\n\n                            <div className=\"herbal-form-group\">\n                                <label>Product Media (Images/Videos)*</label>\n                                <div className=\"media-upload-container\">\n                                    <input \n                                        type=\"file\" \n                                        ref={fileInputRef} \n                                        onChange={handleMediaChange} \n                                        accept=\"image/*,video/*\" \n                                        multiple \n                                        style={{ display: 'none' }} \n                                    />\n                                    <button type=\"button\" className=\"media-upload-btn\" onClick={triggerFileInput}>\n                                        Add Media\n                                    </button>\n                                    <p className=\"media-upload-hint\">Supports JPG, PNG, GIF, MP4 (Max 10MB each)</p>\n                                    <div className=\"media-preview-container\">\n                                        {formData.media.length === 0 ? (\n                                            <div className=\"no-media-placeholder\">No media selected</div>\n                                        ) : (\n                                            formData.media.map((media, index) => (\n                                                <div key={index} className=\"media-preview-item\">\n                                                    {media.type === 'video' ? (\n                                                        <video controls>\n                                                            <source src={media.url} type={`video/${media.file?.name?.split('.').pop() || 'mp4'}`} />\n                                                            Your browser does not support the video tag.\n                                                        </video>\n                                                    ) : (\n                                                        <img src={JoinUrl(media.url)} alt={`Preview ${index}`} />\n                                                    )}\n                                                    <button \n                                                        type=\"button\" \n                                                        className=\"remove-media-btn\" \n                                                        onClick={() => removeMedia(index)} \n                                                        aria-label=\"Remove media\"\n                                                    >\n                                                        ×\n                                                    </button>\n                                                    <div className=\"media-info\">\n                                                        <span className=\"media-name\">{media.name}</span>\n                                                        <span className=\"media-size\">{formatFileSize(media.size || 0)}</span>\n                                                    </div>\n                                                </div>\n                                            ))\n                                        )}\n                                    </div>\n                                </div>\n                                {errors.media && <span className=\"herbal-error\">{errors.media}</span>}\n                            </div>\n\n                            <div className=\"herbal-form-group\">\n                                <label>Prescription</label>\n                                <select name=\"prescription\" value={formData.prescription} onChange={handleChange}>\n                                    <option value=\"required\">Required</option>\n                                    <option value=\"Notrequired\">Not Required</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div className=\"herbal-form-group\">\n                            <label>Description*</label>\n                            <textarea \n                                name=\"description\" \n                                value={formData.description} \n                                onChange={handleChange} \n                                placeholder=\"Enter product description\" \n                                rows=\"3\" \n                            />\n                            {errors.description && <span className=\"herbal-error\">{errors.description}</span>}\n                        </div>\n                    </div>\n\n                    {/* Pricing Information */}\n                    <div className=\"herbal-form-section\">\n                        <h3>Quantity & Pricing</h3>\n                        <p style={{ marginTop: -8, opacity: 0.8 }}>\n                            Add each pack size (e.g., <i>8 fl oz, 16 fl oz, 1 L</i>) with its own price. Final price auto-calculates.\n                        </p>\n\n                        {errors.quantity && <div className=\"herbal-error\" style={{ marginBottom: 10 }}>{errors.quantity}</div>}\n\n                        {formData.quantity.map((q, i) => (\n                            <div key={i} className=\"herbal-form-row\" style={{ border: '1px solid #eee', padding: 12, borderRadius: 8, marginBottom: 10 }}>\n                                <div className=\"herbal-form-group\">\n                                    <label>Quantity Label*</label>\n                                    <input\n                                        type=\"text\"\n                                        value={q.label}\n                                        onChange={(e) => handleQuantityRowChange(i, 'label', e.target.value)}\n                                        placeholder=\"e.g., 8 fl oz (Bottle)\"\n                                    />\n                                    {errors[`quantity.${i}.label`] && <span className=\"herbal-error\">{errors[`quantity.${i}.label`]}</span>}\n                                </div>\n                                <div className=\"herbal-form-group\">\n                                    <label>MRP*</label>\n                                    <input\n                                        type=\"number\"\n                                        value={q.mrp}\n                                        onChange={(e) => handleQuantityRowChange(i, 'mrp', e.target.value)}\n                                        placeholder=\"0.00\"\n                                        min=\"0\" \n                                        step=\"0.01\"\n                                    />\n                                    {errors[`quantity.${i}.mrp`] && <span className=\"herbal-error\">{errors[`quantity.${i}.mrp`]}</span>}\n                                </div>\n                                <div className=\"herbal-form-group\">\n                                    <label>Discount (%)</label>\n                                    <input\n                                        type=\"number\"\n                                        value={q.discount}\n                                        onChange={(e) => handleQuantityRowChange(i, 'discount', e.target.value)}\n                                        placeholder=\"0\"\n                                        min=\"0\" \n                                        max=\"100\"\n                                    />\n                                </div>\n                                <div className=\"herbal-form-group\">\n                                    <label>GST (%)</label>\n                                    <input\n                                        type=\"number\"\n                                        value={q.gst}\n                                        onChange={(e) => handleQuantityRowChange(i, 'gst', e.target.value)}\n                                        placeholder=\"0\"\n                                        min=\"0\" \n                                        step=\"0.01\"\n                                    />\n                                </div>\n                                <div className=\"herbal-form-group\">\n                                    <label>Final Consumer Price</label>\n                                    <input \n                                        type=\"number\" \n                                        value={q.final_price} \n                                        readOnly \n                                        placeholder=\"Auto\" \n                                    />\n                                </div>\n                                <div className=\"herbal-form-group\">\n                                    <label>WholesalePartner Price</label>\n                                    <input\n                                        type=\"number\"\n                                        value={q.retail_price}\n                                        onChange={(e) => handleQuantityRowChange(i, 'retail_price', e.target.value)}\n                                        placeholder=\"Optional\"\n                                        min=\"0\" \n                                        step=\"0.01\"\n                                    />\n                                </div>\n                                <div className=\"herbal-form-group\">\n                                    <label>In Stock</label>\n                                    <select \n                                        value={q.in_stock} \n                                        onChange={(e) => handleQuantityRowChange(i, 'in_stock', e.target.value)}\n                                    >\n                                        <option value=\"yes\">Yes</option>\n                                        <option value=\"no\">No</option>\n                                    </select>\n                                </div>\n\n                                <div className=\"herbal-form-group\" style={{ alignSelf: 'flex-end' }}>\n                                    <button\n                                        type=\"button\"\n                                        onClick={() => removeQuantityRow(i)}\n                                        className=\"herbal-reset-btn\"\n                                        style={{ background: '#f44336', color: '#fff' }}\n                                    >\n                                        Remove\n                                    </button>\n                                </div>\n                            </div>\n                        ))}\n\n                        <button \n                            type=\"button\" \n                            onClick={addQuantityRow} \n                            className=\"herbal-submit-btn\" \n                            style={{ width: 'fit-content' }}\n                        >\n                            + Add Quantity\n                        </button>\n                    </div>\n\n                    {/* Category Information */}\n                    <div className=\"herbal-form-section\">\n                        <h3>Category Information</h3>\n                        <div className=\"herbal-form-row\">\n                            <div className=\"herbal-form-group\">\n                                <label>Variety*</label>\n                                <select\n                                    name=\"productvariety\"\n                                    value={formData.productvariety}\n                                    onChange={(e) => {\n                                        const selectedVariety = e.target.value;\n                                        setFormData(prev => ({\n                                            ...prev,\n                                            productvariety: selectedVariety,\n                                            category: \"\",\n                                            sub_category: \"\"\n                                        }));\n                                    }}\n                                    className='selectCss'\n                                >\n                                    <option value=\"\">Select Variety</option>\n                                    <option value=\"Human\">Human</option>\n                                    <option value=\"Veterinary\">Veterinary</option>\n                                </select>\n                                {errors.productvariety && <span className=\"herbal-error\">{errors.productvariety}</span>}\n                            </div>\n\n                            <div className=\"herbal-form-group\">\n                                <label>Category*</label>\n                                <select \n                                    name=\"category\" \n                                    value={formData.category} \n                                    onChange={handleChange} \n                                    required\n                                >\n                                    <option value=\"\">Select Category</option>\n                                    {categoryList\n                                        .filter(cat => cat.variety === formData.productvariety)\n                                        .map((sub, index) => (\n                                            <option key={index} value={sub.name}>{sub.name}</option>\n                                        ))}\n                                </select>\n                                {errors.category && <span className=\"herbal-error\">{errors.category}</span>}\n                            </div>\n\n                            <div className=\"herbal-form-group\">\n                                <label>Sub Category</label>\n                                <select \n                                    name=\"sub_category\" \n                                    value={formData.sub_category} \n                                    onChange={handleChange} \n                                >\n                                    <option value=\"\">Select subcategory</option>\n                                    {subCategoryList.map((sub, index) => (\n                                        <option key={index} value={sub.name}>{sub.name}</option>\n                                    ))}\n                                </select>\n                            </div>\n\n                            <div className=\"herbal-form-group\">\n                                <label>Use By* (Expiry Date)</label>\n                                <input \n                                    type=\"text\" \n                                    name=\"expires_on\" \n                                    value={formData.expires_on} \n                                    onChange={handleChange} \n                                />\n                                {errors.expires_on && <span className=\"herbal-error\">{errors.expires_on}</span>}\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Product Details */}\n                    <div className=\"herbal-form-section\">\n                        <h3>Product Details</h3>\n                        <div className=\"herbal-form-row\">\n                            <div className=\"herbal-form-group\">\n                                <label>Suitable For</label>\n                                <input \n                                    type=\"text\" \n                                    name=\"suitable_for\" \n                                    value={formData.suitable_for} \n                                    onChange={handleChange} \n                                    placeholder=\"e.g., Adults, Children, All ages\" \n                                />\n                            </div>\n                            <div className=\"herbal-form-group\">\n                                <label>Benefits (comma separated)</label>\n                                <textarea \n                                    name=\"benefits\" \n                                    value={formData.benefits} \n                                    onChange={handleChange} \n                                    placeholder=\"Enter benefits separated by commas\" \n                                    rows=\"3\" \n                                />\n                            </div>\n                        </div>\n                        <div className=\"herbal-form-group\">\n                            <label>Dosage/Usage Instructions*</label>\n                            <textarea \n                                name=\"dosage\" \n                                value={formData.dosage} \n                                onChange={handleChange} \n                                placeholder=\"Enter dosage instructions\" \n                                rows=\"3\" \n                            />\n                            {errors.dosage && <span className=\"herbal-error\">{errors.dosage}</span>}\n                        </div>\n                        <div className=\"herbal-form-group\">\n                            <label>Side Effects</label>\n                            <textarea \n                                name=\"side_effects\" \n                                value={formData.side_effects} \n                                onChange={handleChange} \n                                placeholder=\"Enter any known side effects\" \n                                rows=\"2\" \n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"herbal-form-actions\">\n                        <button type=\"button\" onClick={handleReset} className=\"herbal-reset-btn\">\n                            Reset\n                        </button>\n                        <button type=\"submit\" className=\"herbal-submit-btn\">\n                            {isEditMode ? \"Update Product\" : \"Submit Product\"}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default AddNewProduct;"],"mappings":";;AAAA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,aAAa,MAAM,mCAAmC;AAC7D,SAASC,KAAK,QA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}