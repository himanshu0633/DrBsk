{"ast":null,"code":"import axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport API_URL from \"../../config\";\nconst axiosInstance = axios.create({\n  baseURL: API_URL\n});\naxiosInstance.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"userToken\");\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nexport const setupAxiosInterceptors = (navigate, params) => {\n  axiosInstance.interceptors.response.use(response => {\n    return response;\n  }, error => {\n    if (error.response && (error.response.status === 401 || error.response.status === 403)) {\n      toast.error(\"Session expired. Please sign in again.\");\n      localStorage.clear();\n      const org_id = params === null || params === void 0 ? void 0 : params.org_id;\n      if (org_id) {\n        navigate(`/client/${org_id}/login`);\n      } else {\n        navigate(\"/superadmin/login\");\n      }\n    }\n    return Promise.reject(error);\n  });\n};\nexport default axiosInstance;","map":{"version":3,"names":["axios","toast","API_URL","axiosInstance","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","setupAxiosInterceptors","navigate","params","response","status","clear","org_id"],"sources":["/Users/himanshu/Desktop/Dr BSK/Dr bsk/src/components/AxiosInstance/index.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport API_URL from \"../../config\";\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: API_URL,\r\n});\r\n\r\naxiosInstance.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem(\"userToken\");\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const setupAxiosInterceptors = (navigate, params) => {\r\n  axiosInstance.interceptors.response.use(\r\n    (response) => {\r\n      return response;\r\n    },\r\n    (error) => {\r\n      if (error.response && (error.response.status === 401 || error.response.status === 403)) {\r\n        toast.error(\"Session expired. Please sign in again.\");\r\n        localStorage.clear();\r\n        const org_id = params?.org_id;\r\n        if (org_id) {\r\n          navigate(`/client/${org_id}/login`);\r\n        } else {\r\n          navigate(\"/superadmin/login\");\r\n        }\r\n      }\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n};\r\n\r\nexport default axiosInstance;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAOC,OAAO,MAAM,cAAc;AAElC,MAAMC,aAAa,GAAGH,KAAK,CAACI,MAAM,CAAC;EACjCC,OAAO,EAAEH;AACX,CAAC,CAAC;AAEFC,aAAa,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CACnCC,MAAM,IAAK;EACV,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAC/C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACI,OAAO,CAACC,aAAa,GAAG,UAAUJ,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACAM,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,OAAO,MAAMG,sBAAsB,GAAGA,CAACC,QAAQ,EAAEC,MAAM,KAAK;EAC1DjB,aAAa,CAACG,YAAY,CAACe,QAAQ,CAACb,GAAG,CACpCa,QAAQ,IAAK;IACZ,OAAOA,QAAQ;EACjB,CAAC,EACAN,KAAK,IAAK;IACT,IAAIA,KAAK,CAACM,QAAQ,KAAKN,KAAK,CAACM,QAAQ,CAACC,MAAM,KAAK,GAAG,IAAIP,KAAK,CAACM,QAAQ,CAACC,MAAM,KAAK,GAAG,CAAC,EAAE;MACtFrB,KAAK,CAACc,KAAK,CAAC,wCAAwC,CAAC;MACrDJ,YAAY,CAACY,KAAK,CAAC,CAAC;MACpB,MAAMC,MAAM,GAAGJ,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEI,MAAM;MAC7B,IAAIA,MAAM,EAAE;QACVL,QAAQ,CAAC,WAAWK,MAAM,QAAQ,CAAC;MACrC,CAAC,MAAM;QACLL,QAAQ,CAAC,mBAAmB,CAAC;MAC/B;IACF;IACA,OAAOH,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;EAC9B,CACF,CAAC;AACH,CAAC;AAED,eAAeZ,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}